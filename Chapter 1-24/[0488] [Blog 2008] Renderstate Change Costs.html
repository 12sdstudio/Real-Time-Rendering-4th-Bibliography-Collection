<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd"> <html xmlns=http://www.w3.org/1999/xhtml xml:lang=en lang=en class=hb-loaded><!--
 Page saved with SingleFile 
 url: https://tomforsyth1000.github.io/blog.wiki.html 
 saved date: Sun Oct 03 2021 22:14:18 GMT+0800 (中国标准时间)
--><meta charset=utf-8>
<meta name=copyright content="
TiddlyWiki created by Jeremy Ruston, (jeremy [at] osmosoft [dot] com)

Copyright (c) Jeremy Ruston 2004-2007
Copyright (c) UnaMesa Association 2007-2012

Redistribution and use in source and binary forms, with or without modification,
are permitted provided that the following conditions are met:

Redistributions of source code must retain the above copyright notice, this
list of conditions and the following disclaimer.

Redistributions in binary form must reproduce the above copyright notice, this
list of conditions and the following disclaimer in the documentation and/or other
materials provided with the distribution.

Neither the name of the UnaMesa Association nor the names of its contributors may be
used to endorse or promote products derived from this software without specific
prior written permission.

THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS 'AS IS' AND ANY
EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED WARRANTIES
OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE DISCLAIMED. IN NO EVENT
SHALL THE COPYRIGHT OWNER OR CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT,
INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED
TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, OR PROFITS; OR
BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF LIABILITY, WHETHER IN
CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN
ANY WAY OUT OF THE USE OF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH
DAMAGE.

">
<link rel=alternate type=application/rss+xml title=RSS href=https://tomforsyth1000.github.io/index.xml>
<title>TomF's Tech Blog - It's only pretending to be a wiki.</title>
<style id=StyleSheetColors>@keyframes caretBlink{from{opacity:1.0}to{opacity:0.0}}@keyframes rotateSpinner{from{transform:rotate(0deg)}to{transform:rotate(360deg)}}body{font-size:.75em;font-family:arial,helvetica;margin:0;padding:0}a{text-decoration:none}.txtOptionInput{width:11em}.externalLink{text-decoration:underline}.tiddlyLinkExisting{font-weight:bold}#mainMenu .tiddlyLinkExisting{font-weight:normal;font-style:normal}#sidebarTabs .tiddlyLinkExisting{font-weight:bold;font-style:normal}.header a:hover{background:transparent}.headerShadow{position:relative;padding:4.5em 0 1em 1em;left:-1px;top:-1px}.headerForeground{position:absolute;padding:4.5em 0 1em 1em;left:0;top:0}.siteTitle{font-size:3em}.siteSubtitle{font-size:1.2em}#mainMenu{position:absolute;left:0;width:10em;text-align:right;line-height:1.6em;padding:1.5em 0.5em 0.5em 0.5em;font-size:1.1em}#sidebar{position:absolute;right:3px;width:16em;font-size:.9em}#sidebarOptions{padding-top:0.3em}#sidebarOptions a{margin:0 0.2em;padding:0.2em 0.3em;display:block}#sidebarOptions input{margin:0.4em 0.5em}#sidebarOptions .sliderPanel{margin-left:1em;padding:0.5em;font-size:.85em}#sidebarTabs .tabContents{width:15em;overflow:hidden}#messageArea{position:fixed;top:2em;right:0;margin:0.5em;padding:0.5em;z-index:2000}.tabset{padding:1em 0 0 0.5em}.tab{margin:0 0 0 0.25em;padding:2px}.tabContents{padding:0.5em}.tabContents ul{margin:0;padding:0}.txtMainTab .tabContents li{list-style:none}.tabContents li.listLink{margin-left:.75em}#contentWrapper{display:block}#displayArea{margin:1em 17em 0 14em}.toolbar{text-align:right;font-size:.9em}.tiddler{padding:1em 1em 0}.title{font-size:1.6em;font-weight:bold}.subtitle{font-size:1.1em}.tiddler .button{padding:0.2em 0.4em}.tagged{margin:0.5em;float:right}.tagged{font-size:0.9em;padding:0.25em}.tagged ul{list-style:none;margin:0.25em;padding:0}.tagClear{clear:both}.viewer{line-height:1.4em;padding-top:0.5em}.viewer blockquote{line-height:1.5em;padding-left:0.8em;margin-left:2.5em}.viewer ul{margin-left:0.5em;padding-left:1.5em}.viewer pre{padding:0.5em;margin-left:0.5em;font-size:1.2em;line-height:1.4em;overflow:auto}.viewer code{font-size:1.2em;line-height:1.4em}#backstage{position:relative;width:100%;z-index:50}body{background:#fff;color:#000}a{color:#04b}a:hover{background-color:#04b;color:#fff}.button{color:#014;border:1px solid #fff}.button:hover{color:#014;background:#fe8;border-color:#db4}.button:active{color:#fff;background:#db4;border:1px solid #841}.header{background:#04b}.headerShadow{color:#000}.headerShadow a{font-weight:normal;color:#000}.headerForeground{color:#fff}.headerForeground a{font-weight:normal;color:#8cf}.tabSelected{color:#014;background:#eee;border-left:1px solid #ccc;border-top:1px solid #ccc;border-right:1px solid #ccc}.tabUnselected{color:#fff;background:#999}.tabContents{color:#014;background:#eee;border:1px solid #ccc}#sidebarOptions input{border:1px solid #04b}#sidebarOptions .sliderPanel{background:#8cf}#messageArea{border:1px solid #db4;background:#fe8;color:#000}.tiddler .defaultCommand{font-weight:bold}.title{color:#841}.subtitle{color:#666}.toolbar{color:#04b}.toolbar a{color:#ccc}.tagged{border:1px solid #eee;background-color:#eee}.tagged .listTitle{color:#014}.tagged .button{border:none}.viewer blockquote{border-left:3px solid #666}.viewer pre{border:1px solid #fe8;background:#ffc}.viewer code{color:#841}</style><link type=image/x-icon rel="shortcut icon" href="data:image/gif;base64,R0lGODlhAQABAAAAACH5BAEKAAEALAAAAAABAAEAAAICTAEAOw=="><style>.sf-hidden{display:none!important}</style><link rel=canonical href=https://tomforsyth1000.github.io/blog.wiki.html><meta http-equiv=content-security-policy content="default-src 'none'; font-src 'self' data:; img-src 'self' data:; style-src 'unsafe-inline'; media-src 'self' data:; script-src 'unsafe-inline' data:;"></head>
<body huaban_collector_injected=true>
<div id=copyright class=sf-hidden>
Welcome to TiddlyWiki created by Jeremy Ruston; Copyright © 2004-2007 Jeremy Ruston, Copyright © 2007-2011 UnaMesa Association
</div>
<noscript>
<div id="javascriptWarning">
This page requires JavaScript to function properly.<br /><br />If you are using Microsoft Internet Explorer you may need to click on the yellow bar above and select 'Allow Blocked Content'. You must then click 'Yes' on the following security warning.
</div>

</noscript>
<div id=saveTest class=sf-hidden>savetest</div>
<div id=backstageCloak class=sf-hidden></div>
<div id=backstageButton class=sf-hidden></div>
<div id=backstageArea class=sf-hidden></div>
<div id=backstage>
 <div id=backstagePanel class=sf-hidden></div>
</div>
<div id=contentWrapper>
<div class=header role=banner style=position:relative;overflow:hidden;z-index:0>
<div class=headerShadow>
<span class=siteTitle refresh=content tiddler=SiteTitle><a href=https://tomforsyth1000.github.io/blog.wiki.html title="TomF - TomForsyth, 2014/2/16 下午2:05:00" class="tiddlyLink tiddlyLinkExisting" refresh=link tiddlylink=TomF>TomF</a>'s Tech Blog</span>&nbsp;
<span class=siteSubtitle refresh=content tiddler=SiteSubtitle>It's only pretending to be a wiki.</span>
</div>
<div class=headerForeground>
<span class=siteTitle refresh=content tiddler=SiteTitle><a href=https://tomforsyth1000.github.io/blog.wiki.html title="TomF - TomForsyth, 2014/2/16 下午2:05:00" class="tiddlyLink tiddlyLinkExisting" refresh=link tiddlylink=TomF>TomF</a>'s Tech Blog</span>&nbsp;
<span class=siteSubtitle refresh=content tiddler=SiteSubtitle>It's only pretending to be a wiki.</span>
</div>
<div style=position:absolute;left:0px;top:0%;width:100%;height:101%;z-index:-1;background-color:#1188ff></div><div style=position:absolute;left:0px;top:2%;width:100%;height:99%;z-index:-1;background-color:#1086fd></div><div style=position:absolute;left:0px;top:4%;width:100%;height:97%;z-index:-1;background-color:#1085fc></div><div style=position:absolute;left:0px;top:6%;width:100%;height:95%;z-index:-1;background-color:#0f83fa></div><div style=position:absolute;left:0px;top:8%;width:100%;height:93%;z-index:-1;background-color:#0f82f9></div><div style=position:absolute;left:0px;top:10%;width:100%;height:91%;z-index:-1;background-color:#0f81f8></div><div style=position:absolute;left:0px;top:12%;width:100%;height:89%;z-index:-1;background-color:#0e7ff6></div><div style=position:absolute;left:0px;top:14%;width:100%;height:87%;z-index:-1;background-color:#0e7ef5></div><div style=position:absolute;left:0px;top:16%;width:100%;height:85%;z-index:-1;background-color:#0e7df4></div><div style=position:absolute;left:0px;top:18%;width:100%;height:83%;z-index:-1;background-color:#0d7bf2></div><div style=position:absolute;left:0px;top:20%;width:100%;height:81%;z-index:-1;background-color:#0d7af1></div><div style=position:absolute;left:0px;top:22%;width:100%;height:79%;z-index:-1;background-color:#0d79f0></div><div style=position:absolute;left:0px;top:24%;width:100%;height:77%;z-index:-1;background-color:#0c77ee></div><div style=position:absolute;left:0px;top:26%;width:100%;height:75%;z-index:-1;background-color:#0c76ed></div><div style=position:absolute;left:0px;top:28%;width:100%;height:73%;z-index:-1;background-color:#0c74eb></div><div style=position:absolute;left:0px;top:30%;width:100%;height:71%;z-index:-1;background-color:#0b73ea></div><div style=position:absolute;left:0px;top:32%;width:100%;height:69%;z-index:-1;background-color:#0b72e9></div><div style=position:absolute;left:0px;top:34%;width:100%;height:67%;z-index:-1;background-color:#0b70e7></div><div style=position:absolute;left:0px;top:36%;width:100%;height:65%;z-index:-1;background-color:#0a6fe6></div><div style=position:absolute;left:0px;top:38%;width:100%;height:63%;z-index:-1;background-color:#0a6ee5></div><div style=position:absolute;left:0px;top:40%;width:100%;height:61%;z-index:-1;background-color:#0a6ce3></div><div style=position:absolute;left:0px;top:42%;width:100%;height:59%;z-index:-1;background-color:#096be2></div><div style=position:absolute;left:0px;top:44%;width:100%;height:57%;z-index:-1;background-color:#096ae1></div><div style=position:absolute;left:0px;top:46%;width:100%;height:55%;z-index:-1;background-color:#0968df></div><div style=position:absolute;left:0px;top:48%;width:100%;height:53%;z-index:-1;background-color:#0867de></div><div style=position:absolute;left:0px;top:50%;width:100%;height:51%;z-index:-1;background-color:#0866dd></div><div style=position:absolute;left:0px;top:52%;width:100%;height:49%;z-index:-1;background-color:#0864db></div><div style=position:absolute;left:0px;top:54%;width:100%;height:47%;z-index:-1;background-color:#0763da></div><div style=position:absolute;left:0px;top:56%;width:100%;height:45%;z-index:-1;background-color:#0761d8></div><div style=position:absolute;left:0px;top:58%;width:100%;height:43%;z-index:-1;background-color:#0760d7></div><div style=position:absolute;left:0px;top:60%;width:100%;height:41%;z-index:-1;background-color:#065fd6></div><div style=position:absolute;left:0px;top:62%;width:100%;height:39%;z-index:-1;background-color:#065dd4></div><div style=position:absolute;left:0px;top:64%;width:100%;height:37%;z-index:-1;background-color:#065cd3></div><div style=position:absolute;left:0px;top:66%;width:100%;height:35%;z-index:-1;background-color:#055bd2></div><div style=position:absolute;left:0px;top:68%;width:100%;height:33%;z-index:-1;background-color:#0559d0></div><div style=position:absolute;left:0px;top:70%;width:100%;height:31%;z-index:-1;background-color:#0558cf></div><div style=position:absolute;left:0px;top:72%;width:100%;height:29%;z-index:-1;background-color:#0457ce></div><div style=position:absolute;left:0px;top:74%;width:100%;height:27%;z-index:-1;background-color:#0455cc></div><div style=position:absolute;left:0px;top:76%;width:100%;height:25%;z-index:-1;background-color:#0454cb></div><div style=position:absolute;left:0px;top:78%;width:100%;height:23%;z-index:-1;background-color:#0352c9></div><div style=position:absolute;left:0px;top:80%;width:100%;height:21%;z-index:-1;background-color:#0351c8></div><div style=position:absolute;left:0px;top:82%;width:100%;height:19%;z-index:-1;background-color:#0350c7></div><div style=position:absolute;left:0px;top:84%;width:100%;height:17%;z-index:-1;background-color:#024ec5></div><div style=position:absolute;left:0px;top:86%;width:100%;height:15%;z-index:-1;background-color:#024dc4></div><div style=position:absolute;left:0px;top:88%;width:100%;height:13%;z-index:-1;background-color:#024cc3></div><div style=position:absolute;left:0px;top:90%;width:100%;height:11%;z-index:-1;background-color:#014ac1></div><div style=position:absolute;left:0px;top:92%;width:100%;height:9%;z-index:-1;background-color:#0149c0></div><div style=position:absolute;left:0px;top:94%;width:100%;height:7%;z-index:-1;background-color:#0148bf></div><div style=position:absolute;left:0px;top:96%;width:100%;height:5%;z-index:-1;background-color:#0046bd></div><div style=position:absolute;left:0px;top:98%;width:100%;height:3%;z-index:-1;background-color:#0045bc></div><div style=position:absolute;left:0px;top:100%;width:100%;height:1%;z-index:-1;background-color:#0044bb></div></div>
<div id=mainMenu role=navigation refresh=content tiddler=MainMenu>I am <a href=https://tomforsyth1000.github.io/blog.wiki.html title="TomF - TomForsyth, 2014/2/16 下午2:05:00" class="tiddlyLink tiddlyLinkExisting" refresh=link tiddlylink=TomF>TomF</a><br><a href=https://tomforsyth1000.github.io/blog.wiki.html title="EmailMe - TomForsyth, 2006/5/6 上午6:36:00" class="tiddlyLink tiddlyLinkExisting" refresh=link tiddlylink=EmailMe>EmailMe</a><br><br><a class=externalLink href=http://eelpi.gotdns.org/blog.wiki.html title="External link to http://eelpi.gotdns.org/blog.wiki.html" target=_blank>Show all blog entries</a><br><a class=externalLink href=http://eelpi.gotdns.org/blog.wiki.html title="External link to http://eelpi.gotdns.org/blog.wiki.html" target=_blank>Link to this blog</a><br><a class=externalLink href=http://eelpi.gotdns.org/blog.wiki.xml title="External link to http://eelpi.gotdns.org/blog.wiki.xml" target=_blank>RSS feed</a><br><a class=externalLink href=http://eelpi.gotdns.org/ title="External link to http://eelpi.gotdns.org/" target=_blank>Main website</a><br><br>The Blog Roll:<br><a class=externalLink href=http://eelpi.livejournal.com/ title="External link to http://eelpi.livejournal.com/" target=_blank>My wife</a><br><a class=externalLink href=http://www.lycanthrope.org/~canis/ title="External link to http://www.lycanthrope.org/~canis/" target=_blank>Canis</a><br><a class=externalLink href=http://technobubble.info/ title="External link to http://technobubble.info/" target=_blank>Mark Baker</a><br><a class=externalLink href=http://onepartcode.com/main title="External link to http://onepartcode.com/main" target=_blank>Dave Moore</a><br><a class=externalLink href=http://diaryofagraphicsprogrammer.blogspot.com/ title="External link to http://diaryofagraphicsprogrammer.blogspot.com/" target=_blank>Wolfgang Engel</a><br><a class=externalLink href=http://blog.jakeworld.org/ title="External link to http://blog.jakeworld.org/" target=_blank>Jake Simpson</a><br><a class=externalLink href=http://www.digital-eel.com/blog/ title="External link to http://www.digital-eel.com/blog/" target=_blank>Rich Carlson</a><br><a class=externalLink href=http://castano.ludicon.com/blog/ title="External link to http://castano.ludicon.com/blog/" target=_blank>Ignacio Castaño</a><br><a class=externalLink href=http://tomsdxfaq.blogspot.com/ title="External link to http://tomsdxfaq.blogspot.com/" target=_blank>My DirectX FAQ</a><br><br><a href=https://tomforsyth1000.github.io/blog.wiki.html title="WhatIsThisThing - TomForsyth, 2006/4/13 上午8:22:00" class="tiddlyLink tiddlyLinkExisting" refresh=link tiddlylink=WhatIsThisThing>WhatIsThisThing</a><br><a class=externalLink href=http://www.tiddlywiki.com/ title="External link to http://www.tiddlywiki.com/" target=_blank>TiddlyWiki main</a></div>
<div id=sidebar>
<div id=sidebarOptions role=navigation refresh=content tiddler=SideBarOptions><a href=https://tomforsyth1000.github.io/blog.wiki.html title="Search this TiddlyWiki" class=searchButton>search</a><input class="txtOptionInput searchField" type=search results=5 size=15 accesskey=F autocomplete=off lastsearchtext placeholder value><a href=https://tomforsyth1000.github.io/blog.wiki.html title="Close all displayed tiddlers (except any that are being edited)" class=button>close all</a><a href=https://tomforsyth1000.github.io/blog.wiki.html title="Link to an URL that retrieves all the currently displayed tiddlers" class=button>permaview</a><a href=https://tomforsyth1000.github.io/blog.wiki.html title="Change TiddlyWiki advanced options" class=button>options »</a><div class=sliderPanel cookie=chkSliderOptionsPanel refresh=content tiddler=OptionsPanel style=display:none>These for customising are saved in your browserYour username for signing your edits. Write it as a (eg ) Also see </div></div>
<div id=sidebarTabs role=complementary refresh=content force=true tiddler=SideBarTabs><div class="tabsetWrapper txtMainTab"><div class=tabset cookie=txtMainTab><a href=https://tomforsyth1000.github.io/blog.wiki.html title=Timeline class="tab tabSelected" tab=Timeline content=TabTimeline>Timeline<span style=font-size:0pt;line-height:0px> </span></a><a href=https://tomforsyth1000.github.io/blog.wiki.html title="All tiddlers" class="tab tabUnselected" tab=All content=TabAll>All<span style=font-size:0pt;line-height:0px> </span></a><a href=https://tomforsyth1000.github.io/blog.wiki.html title="All tags" class="tab tabUnselected" tab=Tags content=TabTags>Tags<span style=font-size:0pt;line-height:0px> </span></a><a href=https://tomforsyth1000.github.io/blog.wiki.html title="More lists" class="tab tabUnselected" tab=More content=TabMore>More<span style=font-size:0pt;line-height:0px> </span></a></div><div class=tabContents><div params macroname=timeline refresh=macro><ul class=timeline><li class=listTitle>16 December 2019<li class=listLink><a href=https://tomforsyth1000.github.io/blog.wiki.html title="VR optics and why IPD means too many things - TomForsyth, 2019/12/16 上午11:35:00" class="tiddlyLink tiddlyLinkExisting" refresh=link tiddlylink="VR optics and why IPD means too many things">VR optics and why IPD means too many things</a><li class=listLink><a href=https://tomforsyth1000.github.io/blog.wiki.html title="The tiddlers listed in this shadow tiddler will be automatically displayed when ~TiddlyWiki starts up" class="tiddlyLink tiddlyLinkExisting" refresh=link tiddlylink=DefaultTiddlers>DefaultTiddlers</a><li class=listLink><a href=https://tomforsyth1000.github.io/blog.wiki.html title="All blog entries - TomForsyth, 2019/12/16 上午11:34:00" class="tiddlyLink tiddlyLinkExisting" refresh=link tiddlylink="All blog entries">All blog entries</a></ul><ul class=timeline><li class=listTitle>16 August 2016<li class=listLink><a href=https://tomforsyth1000.github.io/blog.wiki.html title="Why didn't Larrabee fail? - TomForsyth, 2016/8/16 下午1:24:00" class="tiddlyLink tiddlyLinkExisting" refresh=link tiddlylink="Why didn't Larrabee fail?">Why didn't Larrabee fail?</a><li class=listLink><a href=https://tomforsyth1000.github.io/blog.wiki.html title="HelloThere - TomForsyth, 2016/8/16 下午1:24:00" class="tiddlyLink tiddlyLinkExisting" refresh=link tiddlylink=HelloThere>HelloThere</a><li class=listLink><a href=https://tomforsyth1000.github.io/blog.wiki.html title="Wrangling enums - TomForsyth, 2016/8/16 上午1:23:00" class="tiddlyLink tiddlyLinkExisting" refresh=link tiddlylink="Wrangling enums">Wrangling enums</a><li class=listLink><a href=https://tomforsyth1000.github.io/blog.wiki.html title="Elite Dangerous on the Rift - TomForsyth, 2016/8/16 上午1:16:00" class="tiddlyLink tiddlyLinkExisting" refresh=link tiddlylink="Elite Dangerous on the Rift">Elite Dangerous on the Rift</a></ul><ul class=timeline><li class=listTitle>1 December 2015<li class=listLink><a href=https://tomforsyth1000.github.io/blog.wiki.html title="The sRGB learning curve - TomForsyth, 2015/12/1 上午8:21:00" class="tiddlyLink tiddlyLinkExisting" refresh=link tiddlylink="The sRGB learning curve">The sRGB learning curve</a></ul><ul class=timeline><li class=listTitle>10 September 2015<li class=listLink><a href=https://tomforsyth1000.github.io/blog.wiki.html title="NaNs cause the craziest bugs - TomForsyth, 2015/9/10 下午11:28:00" class="tiddlyLink tiddlyLinkExisting" refresh=link tiddlylink="NaNs cause the craziest bugs">NaNs cause the craziest bugs</a></ul><ul class=timeline><li class=listTitle>25 April 2015<li class=listLink><a href=https://tomforsyth1000.github.io/blog.wiki.html title="Memory stacks and more resizable arrays - TomForsyth, 2015/4/25 上午3:17:00" class="tiddlyLink tiddlyLinkExisting" refresh=link tiddlylink="Memory stacks and more resizable arrays">Memory stacks and more resizable arrays</a></ul><ul class=timeline><li class=listTitle>18 March 2015<li class=listLink><a href=https://tomforsyth1000.github.io/blog.wiki.html title="Premultiplied alpha part 2 - TomForsyth, 2015/3/18 下午7:27:00" class="tiddlyLink tiddlyLinkExisting" refresh=link tiddlylink="Premultiplied alpha part 2">Premultiplied alpha part 2</a><li class=listLink><a href=https://tomforsyth1000.github.io/blog.wiki.html title="Premultiplied alpha - TomForsyth, 2015/3/18 下午7:26:00" class="tiddlyLink tiddlyLinkExisting" refresh=link tiddlylink="Premultiplied alpha">Premultiplied alpha</a><li class=listLink><a href=https://tomforsyth1000.github.io/blog.wiki.html title="OffendOMatic - TomForsyth, 2015/3/18 下午7:23:00" class="tiddlyLink tiddlyLinkExisting" refresh=link tiddlylink=OffendOMatic>OffendOMatic</a></ul><ul class=timeline><li class=listTitle>27 February 2015<li class=listLink><a href=https://tomforsyth1000.github.io/blog.wiki.html title="Texture coordinate origin - TomForsyth, 2015/2/27 下午1:59:00" class="tiddlyLink tiddlyLinkExisting" refresh=link tiddlylink="Texture coordinate origin">Texture coordinate origin</a></ul><ul class=timeline><li class=listTitle>29 November 2014<li class=listLink><a href=https://tomforsyth1000.github.io/blog.wiki.html title="A matter of precision - TomForsyth, 2014/11/29 上午9:37:00" class="tiddlyLink tiddlyLinkExisting" refresh=link tiddlylink="A matter of precision">A matter of precision</a></ul><ul class=timeline><li class=listTitle>6 October 2014<li class=listLink><a href=https://tomforsyth1000.github.io/blog.wiki.html title="Display rate, rendering rate, and persistence - TomForsyth, 2014/10/6 下午1:38:00" class="tiddlyLink tiddlyLinkExisting" refresh=link tiddlylink="Display rate, rendering rate, and persistence">Display rate, rendering rate, and persistence</a></ul><ul class=timeline><li class=listTitle>23 June 2014<li class=listLink><a href=https://tomforsyth1000.github.io/blog.wiki.html title="Saving, loading, replaying and debugging - TomForsyth, 2014/6/23 上午9:40:00" class="tiddlyLink tiddlyLinkExisting" refresh=link tiddlylink="Saving, loading, replaying and debugging">Saving, loading, replaying and debugging</a></ul><ul class=timeline><li class=listTitle>17 February 2014<li class=listLink><a href=https://tomforsyth1000.github.io/blog.wiki.html title="Simple Perforce setup for the solo coder - TomForsyth, 2014/2/17 上午3:54:00" class="tiddlyLink tiddlyLinkExisting" refresh=link tiddlylink="Simple Perforce setup for the solo coder">Simple Perforce setup for the solo coder</a></ul><ul class=timeline><li class=listTitle>16 February 2014<li class=listLink><a href=https://tomforsyth1000.github.io/blog.wiki.html title="Resizable arrays without using STL - TomForsyth, 2014/2/16 下午2:13:00" class="tiddlyLink tiddlyLinkExisting" refresh=link tiddlylink="Resizable arrays without using STL">Resizable arrays without using STL</a><li class=listLink><a href=https://tomforsyth1000.github.io/blog.wiki.html title="TomF - TomForsyth, 2014/2/16 下午2:05:00" class="tiddlyLink tiddlyLinkExisting" refresh=link tiddlylink=TomF>TomF</a><li class=listLink><a href=https://tomforsyth1000.github.io/blog.wiki.html title="TweetMe - TomForsyth, 2014/2/16 下午2:04:00" class="tiddlyLink tiddlyLinkExisting" refresh=link tiddlylink=TweetMe>TweetMe</a></ul><ul class=timeline><li class=listTitle>5 February 2014<li class=listLink><a href=https://tomforsyth1000.github.io/blog.wiki.html title="Even more precision - TomForsyth, 2014/2/5 上午1:42:00" class="tiddlyLink tiddlyLinkExisting" refresh=link tiddlylink="Even more precision">Even more precision</a></ul><ul class=timeline><li class=listTitle>19 September 2013<li class=listLink><a href=https://tomforsyth1000.github.io/blog.wiki.html title="Polynomial interpolation - TomForsyth, 2013/9/19 下午12:56:00" class="tiddlyLink tiddlyLinkExisting" refresh=link tiddlylink="Polynomial interpolation">Polynomial interpolation</a></ul><ul class=timeline><li class=listTitle>17 June 2013<li class=listLink><a href=https://tomforsyth1000.github.io/blog.wiki.html title="How not to interview, part 2 - TomForsyth, 2013/6/17 上午11:45:00" class="tiddlyLink tiddlyLinkExisting" refresh=link tiddlylink="How not to interview, part 2">How not to interview, part 2</a></ul><ul class=timeline><li class=listTitle>10 June 2013<li class=listLink><a href=https://tomforsyth1000.github.io/blog.wiki.html title="Sparse-world storage formats - TomForsyth, 2013/6/10 下午1:23:00" class="tiddlyLink tiddlyLinkExisting" refresh=link tiddlylink="Sparse-world storage formats">Sparse-world storage formats</a></ul><ul class=timeline><li class=listTitle>20 May 2013<li class=listLink><a href=https://tomforsyth1000.github.io/blog.wiki.html title="This shadow tiddler is used as the contents of the main menu in the left-hand column of the screen" class="tiddlyLink tiddlyLinkExisting" refresh=link tiddlylink=MainMenu>MainMenu</a><li class=listLink><a href=https://tomforsyth1000.github.io/blog.wiki.html title="How not to interview - TomForsyth, 2013/5/20 上午3:22:00" class="tiddlyLink tiddlyLinkExisting" refresh=link tiddlylink="How not to interview">How not to interview</a></ul><ul class=timeline><li class=listTitle>17 September 2012<li class=listLink><a href=https://tomforsyth1000.github.io/blog.wiki.html title="Matrix maths and names - TomForsyth, 2012/9/17 上午6:55:00" class="tiddlyLink tiddlyLinkExisting" refresh=link tiddlylink="Matrix maths and names">Matrix maths and names</a><li class=listLink><a href=https://tomforsyth1000.github.io/blog.wiki.html title="VR, AR and other realities - TomForsyth, 2012/9/17 上午4:59:00" class="tiddlyLink tiddlyLinkExisting" refresh=link tiddlylink="VR, AR and other realities">VR, AR and other realities</a></ul><ul class=timeline><li class=listTitle>24 June 2012<li class=listLink><a href=https://tomforsyth1000.github.io/blog.wiki.html title="New Job - TomForsyth, 2012/6/24 上午9:24:00" class="tiddlyLink tiddlyLinkExisting" refresh=link tiddlylink="New Job">New Job</a></ul><ul class=timeline><li class=listTitle>9 August 2011<li class=listLink><a href=https://tomforsyth1000.github.io/blog.wiki.html title="A sprintf that isn't as ugly - TomForsyth, 2011/8/9 上午3:55:00" class="tiddlyLink tiddlyLinkExisting" refresh=link tiddlylink="A sprintf that isn't as ugly">A sprintf that isn't as ugly</a></ul><ul class=timeline><li class=listTitle>24 July 2011<li class=listLink><a href=https://tomforsyth1000.github.io/blog.wiki.html title="Deterministic gameplay - TomForsyth, 2011/7/24 上午3:33:00" class="tiddlyLink tiddlyLinkExisting" refresh=link tiddlylink="Deterministic gameplay">Deterministic gameplay</a></ul><ul class=timeline><li class=listTitle>23 July 2011<li class=listLink><a href=https://tomforsyth1000.github.io/blog.wiki.html title="DMT - TomForsyth, 2011/7/23 下午11:57:00" class="tiddlyLink tiddlyLinkExisting" refresh=link tiddlylink=DMT>DMT</a></ul><ul class=timeline><li class=listTitle>21 April 2011<li class=listLink><a href=https://tomforsyth1000.github.io/blog.wiki.html title="StarTopia love - TomForsyth, 2011/4/21 下午6:52:00" class="tiddlyLink tiddlyLinkExisting" refresh=link tiddlylink="StarTopia love">StarTopia love</a></ul><ul class=timeline><li class=listTitle>13 March 2011<li class=listLink><a href=https://tomforsyth1000.github.io/blog.wiki.html title="Logging, asserts and unit tests - TomForsyth, 2011/3/13 下午1:28:00" class="tiddlyLink tiddlyLinkExisting" refresh=link tiddlylink="Logging, asserts and unit tests">Logging, asserts and unit tests</a><li class=listLink><a href=https://tomforsyth1000.github.io/blog.wiki.html title="AltDevBlogADay - TomForsyth, 2011/3/13 上午6:21:00" class="tiddlyLink tiddlyLinkExisting" refresh=link tiddlylink=AltDevBlogADay>AltDevBlogADay</a></ul><ul class=timeline><li class=listTitle>8 March 2011<li class=listLink><a href=https://tomforsyth1000.github.io/blog.wiki.html title="Spherical Harmonics in Actual Games notes - TomForsyth, 2011/3/8 下午9:15:00" class="tiddlyLink tiddlyLinkExisting" refresh=link tiddlylink="Spherical Harmonics in Actual Games notes">Spherical Harmonics in Actual Games notes</a></ul><ul class=timeline><li class=listTitle>1 January 2011<li class=listLink><a href=https://tomforsyth1000.github.io/blog.wiki.html title="Data Oriented Luddites - TomForsyth, 2011/1/1 上午2:50:00" class="tiddlyLink tiddlyLinkExisting" refresh=link tiddlylink="Data Oriented Luddites">Data Oriented Luddites</a><li class=listLink><a href=https://tomforsyth1000.github.io/blog.wiki.html title="Platform-agnostic types - TomForsyth, 2011/1/1 上午1:01:00" class="tiddlyLink tiddlyLinkExisting" refresh=link tiddlylink="Platform-agnostic types">Platform-agnostic types</a><li class=listLink><a href=https://tomforsyth1000.github.io/blog.wiki.html title="Scene Graphs - just say no - TomForsyth, 2011/1/1 上午12:53:00" class="tiddlyLink tiddlyLinkExisting" refresh=link tiddlylink="Scene Graphs - just say no">Scene Graphs - just say no</a><li class=listLink><a href=https://tomforsyth1000.github.io/blog.wiki.html title="Moore's Law vs Duck Typing - TomForsyth, 2011/1/1 上午12:51:00" class="tiddlyLink tiddlyLinkExisting" refresh=link tiddlylink="Moore's Law vs Duck Typing">Moore's Law vs Duck Typing</a></ul><ul class=timeline><li class=listTitle>9 December 2010<li class=listLink><a href=https://tomforsyth1000.github.io/blog.wiki.html title="Texture streaming systems with two levels of cache - TomForsyth, 2010/12/9 下午8:52:00" class="tiddlyLink tiddlyLinkExisting" refresh=link tiddlylink="Texture streaming systems with two levels of cache">Texture streaming systems with two levels of cache</a><li class=listLink><a href=https://tomforsyth1000.github.io/blog.wiki.html title="Visibility and priority tests for streaming assets - TomForsyth, 2010/12/9 下午7:51:00" class="tiddlyLink tiddlyLinkExisting" refresh=link tiddlylink="Visibility and priority tests for streaming assets">Visibility and priority tests for streaming assets</a></ul><ul class=timeline><li class=listTitle>16 November 2010<li class=listLink><a href=https://tomforsyth1000.github.io/blog.wiki.html title="Streaming resource overview - TomForsyth, 2010/11/16 上午8:14:00" class="tiddlyLink tiddlyLinkExisting" refresh=link tiddlylink="Streaming resource overview">Streaming resource overview</a></ul><ul class=timeline><li class=listTitle>11 May 2010<li class=listLink><a href=https://tomforsyth1000.github.io/blog.wiki.html title="Squares or hexes - TomForsyth, 2010/5/11 上午12:18:00" class="tiddlyLink tiddlyLinkExisting" refresh=link tiddlylink="Squares or hexes">Squares or hexes</a><li class=listLink><a href=https://tomforsyth1000.github.io/blog.wiki.html title="Dwarf Minecart Tycoon - TomForsyth, 2010/5/11 上午12:06:00" class="tiddlyLink tiddlyLinkExisting" refresh=link tiddlylink="Dwarf Minecart Tycoon">Dwarf Minecart Tycoon</a></ul><ul class=timeline><li class=listTitle>12 January 2010<li class=listLink><a href=https://tomforsyth1000.github.io/blog.wiki.html title="Larrabee talk roundup and media attention - TomForsyth, 2010/1/12 下午4:36:00" class="tiddlyLink tiddlyLinkExisting" refresh=link tiddlylink="Larrabee talk roundup and media attention">Larrabee talk roundup and media attention</a></ul><ul class=timeline><li class=listTitle>1 April 2009<li class=listLink><a href=https://tomforsyth1000.github.io/blog.wiki.html title="GDC 09 - TomForsyth, 2009/4/1 下午7:55:00" class="tiddlyLink tiddlyLinkExisting" refresh=link tiddlylink="GDC 09">GDC 09</a></ul><ul class=timeline><li class=listTitle>16 February 2009<li class=listLink><a href=https://tomforsyth1000.github.io/blog.wiki.html title="How to walk better - TomForsyth, 2009/2/16 下午5:16:00" class="tiddlyLink tiddlyLinkExisting" refresh=link tiddlylink="How to walk better">How to walk better</a><li class=listLink><a href=https://tomforsyth1000.github.io/blog.wiki.html title="Larrabee ISA unveiled at GDC 2009 - TomForsyth, 2009/2/16 上午1:45:00" class="tiddlyLink tiddlyLinkExisting" refresh=link tiddlylink="Larrabee ISA unveiled at GDC 2009">Larrabee ISA unveiled at GDC 2009</a><li class=listLink><a href=https://tomforsyth1000.github.io/blog.wiki.html title="CAs in cloud formation - TomForsyth, 2009/2/16 上午1:04:00" class="tiddlyLink tiddlyLinkExisting" refresh=link tiddlylink="CAs in cloud formation">CAs in cloud formation</a></ul><ul class=timeline><li class=listTitle>2 February 2009<li class=listLink><a href=https://tomforsyth1000.github.io/blog.wiki.html title="Regular mesh vertex cache ordering - TomForsyth, 2009/2/2 下午7:36:00" class="tiddlyLink tiddlyLinkExisting" refresh=link tiddlylink="Regular mesh vertex cache ordering">Regular mesh vertex cache ordering</a></ul><ul class=timeline><li class=listTitle>10 January 2009<li class=listLink><a href=https://tomforsyth1000.github.io/blog.wiki.html title="Siggraph Asia 2008 - TomForsyth, 2009/1/10 上午7:38:00" class="tiddlyLink tiddlyLinkExisting" refresh=link tiddlylink="Siggraph Asia 2008">Siggraph Asia 2008</a></ul><ul class=timeline><li class=listTitle>7 January 2009<li class=listLink><a href=https://tomforsyth1000.github.io/blog.wiki.html title="Plague - TomForsyth, 2009/1/7 上午10:10:00" class="tiddlyLink tiddlyLinkExisting" refresh=link tiddlylink=Plague>Plague</a></ul><ul class=timeline><li class=listTitle>16 August 2008<li class=listLink><a href=https://tomforsyth1000.github.io/blog.wiki.html title="Siggraph 2008 - TomForsyth, 2008/8/16 下午11:23:00" class="tiddlyLink tiddlyLinkExisting" refresh=link tiddlylink="Siggraph 2008">Siggraph 2008</a></ul><ul class=timeline><li class=listTitle>19 July 2008<li class=listLink><a href=https://tomforsyth1000.github.io/blog.wiki.html title="RadGameTools - TomForsyth, 2008/7/19 下午10:51:00" class="tiddlyLink tiddlyLinkExisting" refresh=link tiddlylink=RadGameTools>RadGameTools</a><li class=listLink><a href=https://tomforsyth1000.github.io/blog.wiki.html title="ShaderX2 available for free - TomForsyth, 2008/7/19 下午10:34:00" class="tiddlyLink tiddlyLinkExisting" refresh=link tiddlylink="ShaderX2 available for free">ShaderX2 available for free</a><li class=listLink><a href=https://tomforsyth1000.github.io/blog.wiki.html title="SuperSecretProject - TomForsyth, 2008/7/19 下午10:29:00" class="tiddlyLink tiddlyLinkExisting" refresh=link tiddlylink=SuperSecretProject>SuperSecretProject</a><li class=listLink><a href=https://tomforsyth1000.github.io/blog.wiki.html title="Larrabee - TomForsyth, 2008/7/19 下午10:28:00" class="tiddlyLink tiddlyLinkExisting" refresh=link tiddlylink=Larrabee>Larrabee</a><li class=listLink><a href=https://tomforsyth1000.github.io/blog.wiki.html title="Displacement Compression - TomForsyth, 2008/7/19 下午10:22:00" class="tiddlyLink tiddlyLinkExisting" refresh=link tiddlylink="Displacement Compression">Displacement Compression</a></ul><ul class=timeline><li class=listTitle>18 April 2008<li class=listLink><a href=https://tomforsyth1000.github.io/blog.wiki.html title="Larrabee and raytracing - TomForsyth, 2008/4/18 上午8:56:00" class="tiddlyLink tiddlyLinkExisting" refresh=link tiddlylink="Larrabee and raytracing">Larrabee and raytracing</a></ul><ul class=timeline><li class=listTitle>28 January 2008<li class=listLink><a href=https://tomforsyth1000.github.io/blog.wiki.html title="Renderstate change costs - TomForsyth, 2008/1/28 上午7:06:00" class="tiddlyLink tiddlyLinkExisting" refresh=link tiddlylink="Renderstate change costs">Renderstate change costs</a></ul><ul class=timeline><li class=listTitle>27 January 2008<li class=listLink><a href=https://tomforsyth1000.github.io/blog.wiki.html title="Urban Chaos - TomForsyth, 2008/1/27 下午8:19:00" class="tiddlyLink tiddlyLinkExisting" refresh=link tiddlylink="Urban Chaos">Urban Chaos</a><li class=listLink><a href=https://tomforsyth1000.github.io/blog.wiki.html title="Knowing which mipmap levels are needed - TomForsyth, 2008/1/27 下午8:14:00" class="tiddlyLink tiddlyLinkExisting" refresh=link tiddlylink="Knowing which mipmap levels are needed">Knowing which mipmap levels are needed</a><li class=listLink><a href=https://tomforsyth1000.github.io/blog.wiki.html title="MuckyFoot - TomForsyth, 2008/1/27 下午8:13:00" class="tiddlyLink tiddlyLinkExisting" refresh=link tiddlylink=MuckyFoot>MuckyFoot</a></ul><ul class=timeline><li class=listTitle>8 January 2008<li class=listLink><a href=https://tomforsyth1000.github.io/blog.wiki.html title="Larrabee decloak - TomForsyth, 2008/1/8 下午8:59:00" class="tiddlyLink tiddlyLinkExisting" refresh=link tiddlylink="Larrabee decloak">Larrabee decloak</a></ul><ul class=timeline><li class=listTitle>2 January 2008<li class=listLink><a href=https://tomforsyth1000.github.io/blog.wiki.html title="Errata - TomForsyth, 2008/1/2 上午7:51:00" class="tiddlyLink tiddlyLinkExisting" refresh=link tiddlylink=Errata>Errata</a></ul><ul class=timeline><li class=listTitle>1 January 2008<li class=listLink><a href=https://tomforsyth1000.github.io/blog.wiki.html title="Game Editor vs DCC Editor - TomForsyth, 2008/1/1 下午10:55:00" class="tiddlyLink tiddlyLinkExisting" refresh=link tiddlylink="Game Editor vs DCC Editor">Game Editor vs DCC Editor</a><li class=listLink><a href=https://tomforsyth1000.github.io/blog.wiki.html title="Smart coder priorities - TomForsyth, 2008/1/1 下午10:54:00" class="tiddlyLink tiddlyLinkExisting" refresh=link tiddlylink="Smart coder priorities">Smart coder priorities</a><li class=listLink><a href=https://tomforsyth1000.github.io/blog.wiki.html title="Blog linkage - TomForsyth, 2008/1/1 下午9:24:00" class="tiddlyLink tiddlyLinkExisting" refresh=link tiddlylink="Blog linkage">Blog linkage</a></ul><ul class=timeline><li class=listTitle>27 December 2007<li class=listLink><a href=https://tomforsyth1000.github.io/blog.wiki.html title="Rasteriser vs Raytracer - TomForsyth, 2007/12/27 上午3:49:00" class="tiddlyLink tiddlyLinkExisting" refresh=link tiddlylink="Rasteriser vs Raytracer">Rasteriser vs Raytracer</a></ul><ul class=timeline><li class=listTitle>29 October 2007<li class=listLink><a href=https://tomforsyth1000.github.io/blog.wiki.html title="Texture formats for faster compression - TomForsyth, 2007/10/29 上午1:04:00" class="tiddlyLink tiddlyLinkExisting" refresh=link tiddlylink="Texture formats for faster compression">Texture formats for faster compression</a></ul><ul class=timeline><li class=listTitle>6 September 2007<li class=listLink><a href=https://tomforsyth1000.github.io/blog.wiki.html title="Blade II - TomForsyth, 2007/9/6 上午3:21:00" class="tiddlyLink tiddlyLinkExisting" refresh=link tiddlylink="Blade II">Blade II</a></ul><ul class=timeline><li class=listTitle>31 August 2007<li class=listLink><a href=https://tomforsyth1000.github.io/blog.wiki.html title="Granny3D - TomForsyth, 2007/8/31 下午11:27:00" class="tiddlyLink tiddlyLinkExisting" refresh=link tiddlylink=Granny3D>Granny3D</a><li class=listLink><a href=https://tomforsyth1000.github.io/blog.wiki.html title="SSE - TomForsyth, 2007/8/31 下午10:59:00" class="tiddlyLink tiddlyLinkExisting" refresh=link tiddlylink=SSE>SSE</a></ul><ul class=timeline><li class=listTitle>28 August 2007<li class=listLink><a href=https://tomforsyth1000.github.io/blog.wiki.html title="Patently evil - TomForsyth, 2007/8/28 下午2:18:00" class="tiddlyLink tiddlyLinkExisting" refresh=link tiddlylink="Patently evil">Patently evil</a></ul><ul class=timeline><li class=listTitle>19 August 2007<li class=listLink><a href=https://tomforsyth1000.github.io/blog.wiki.html title="LOD clamps for better atlasing - TomForsyth, 2007/8/19 下午5:13:00" class="tiddlyLink tiddlyLinkExisting" refresh=link tiddlylink="LOD clamps for better atlasing">LOD clamps for better atlasing</a><li class=listLink><a href=https://tomforsyth1000.github.io/blog.wiki.html title="Nyquist - TomForsyth, 2007/8/19 下午2:47:00" class="tiddlyLink tiddlyLinkExisting" refresh=link tiddlylink=Nyquist>Nyquist</a></ul><ul class=timeline><li class=listTitle>22 March 2007<li class=listLink><a href=https://tomforsyth1000.github.io/blog.wiki.html title="Trilights - TomForsyth, 2007/3/22 上午9:23:00" class="tiddlyLink tiddlyLinkExisting" refresh=link tiddlylink=Trilights>Trilights</a><li class=listLink><a href=https://tomforsyth1000.github.io/blog.wiki.html title="Bitangents - TomForsyth, 2007/3/22 上午6:46:00" class="tiddlyLink tiddlyLinkExisting" refresh=link tiddlylink=Bitangents>Bitangents</a></ul><ul class=timeline><li class=listTitle>13 March 2007<li class=listLink><a href=https://tomforsyth1000.github.io/blog.wiki.html title="More vertex cache optimisation - TomForsyth, 2007/3/13 上午9:19:00" class="tiddlyLink tiddlyLinkExisting" refresh=link tiddlylink="More vertex cache optimisation">More vertex cache optimisation</a></ul><ul class=timeline><li class=listTitle>11 March 2007<li class=listLink><a href=https://tomforsyth1000.github.io/blog.wiki.html title="Reinventing the wheel - again! - TomForsyth, 2007/3/11 上午6:50:00" class="tiddlyLink tiddlyLinkExisting" refresh=link tiddlylink="Reinventing the wheel - again!">Reinventing the wheel - again!</a><li class=listLink><a href=https://tomforsyth1000.github.io/blog.wiki.html title="Shadowbuffers and shaders - TomForsyth, 2007/3/11 上午1:46:00" class="tiddlyLink tiddlyLinkExisting" refresh=link tiddlylink="Shadowbuffers and shaders">Shadowbuffers and shaders</a></ul><ul class=timeline><li class=listTitle>4 March 2007<li class=listLink><a href=https://tomforsyth1000.github.io/blog.wiki.html title="Utah Teapot - TomForsyth, 2007/3/4 上午3:13:00" class="tiddlyLink tiddlyLinkExisting" refresh=link tiddlylink="Utah Teapot">Utah Teapot</a></ul><ul class=timeline><li class=listTitle>18 February 2007<li class=listLink><a href=https://tomforsyth1000.github.io/blog.wiki.html title="GDC survival guide - TomForsyth, 2007/2/18 下午11:51:00" class="tiddlyLink tiddlyLinkExisting" refresh=link tiddlylink="GDC survival guide">GDC survival guide</a></ul><ul class=timeline><li class=listTitle>7 February 2007<li class=listLink><a href=https://tomforsyth1000.github.io/blog.wiki.html title="Pixomatic slides - TomForsyth, 2007/2/7 上午6:37:00" class="tiddlyLink tiddlyLinkExisting" refresh=link tiddlylink="Pixomatic slides">Pixomatic slides</a></ul><ul class=timeline><li class=listTitle>5 February 2007<li class=listLink><a href=https://tomforsyth1000.github.io/blog.wiki.html title="Notepad++ - TomForsyth, 2007/2/5 上午9:57:00" class="tiddlyLink tiddlyLinkExisting" refresh=link tiddlylink=Notepad++>Notepad++</a><li class=listLink><a href=https://tomforsyth1000.github.io/blog.wiki.html title="More on SH - TomForsyth, 2007/2/5 上午9:35:00" class="tiddlyLink tiddlyLinkExisting" refresh=link tiddlylink="More on SH">More on SH</a><li class=listLink><a href=https://tomforsyth1000.github.io/blog.wiki.html title="Licenses - TomForsyth, 2007/2/5 上午9:28:00" class="tiddlyLink tiddlyLinkExisting" refresh=link tiddlylink=Licenses>Licenses</a></ul><ul class=timeline><li class=listTitle>17 January 2007<li class=listLink><a href=https://tomforsyth1000.github.io/blog.wiki.html title="Added some hindsights and notes on Spherical Harmonics - TomForsyth, 2007/1/17 上午9:33:00" class="tiddlyLink tiddlyLinkExisting" refresh=link tiddlylink="Added some hindsights and notes on Spherical Harmonics">Added some hindsights and notes on Spherical Harmonics</a></ul><ul class=timeline><li class=listTitle>30 December 2006<li class=listLink><a href=https://tomforsyth1000.github.io/blog.wiki.html title="Cellular Automata article added - TomForsyth, 2006/12/30 上午2:38:00" class="tiddlyLink tiddlyLinkExisting" refresh=link tiddlylink="Cellular Automata article added">Cellular Automata article added</a></ul><ul class=timeline><li class=listTitle>20 November 2006<li class=listLink><a href=https://tomforsyth1000.github.io/blog.wiki.html title="StarTopia - TomForsyth, 2006/11/20 下午5:35:00" class="tiddlyLink tiddlyLinkExisting" refresh=link tiddlylink=StarTopia>StarTopia</a><li class=listLink><a href=https://tomforsyth1000.github.io/blog.wiki.html title="Impostor article added - TomForsyth, 2006/11/20 下午5:31:00" class="tiddlyLink tiddlyLinkExisting" refresh=link tiddlylink="Impostor article added">Impostor article added</a></ul><ul class=timeline><li class=listTitle>8 October 2006<li class=listLink><a href=https://tomforsyth1000.github.io/blog.wiki.html title="Shadowmap vs shadowbuffer - TomForsyth, 2006/10/8 上午8:23:00" class="tiddlyLink tiddlyLinkExisting" refresh=link tiddlylink="Shadowmap vs shadowbuffer">Shadowmap vs shadowbuffer</a></ul><ul class=timeline><li class=listTitle>30 September 2006<li class=listLink><a href=https://tomforsyth1000.github.io/blog.wiki.html title="Vertex Cache Optimisation - TomForsyth, 2006/9/30 上午6:42:00" class="tiddlyLink tiddlyLinkExisting" refresh=link tiddlylink="Vertex Cache Optimisation">Vertex Cache Optimisation</a></ul><ul class=timeline><li class=listTitle>12 August 2006<li class=listLink><a href=https://tomforsyth1000.github.io/blog.wiki.html title="Strippers - TomForsyth, 2006/8/12 上午11:13:00" class="tiddlyLink tiddlyLinkExisting" refresh=link tiddlylink=Strippers>Strippers</a><li class=listLink><a href=https://tomforsyth1000.github.io/blog.wiki.html title="VIPM article in HTML - TomForsyth, 2006/8/12 上午5:47:00" class="tiddlyLink tiddlyLinkExisting" refresh=link tiddlylink="VIPM article in HTML">VIPM article in HTML</a><li class=listLink><a href=https://tomforsyth1000.github.io/blog.wiki.html title="Someone cited my VIPM article - TomForsyth, 2006/8/12 上午5:47:00" class="tiddlyLink tiddlyLinkExisting" refresh=link tiddlylink="Someone cited my VIPM article">Someone cited my VIPM article</a></ul><ul class=timeline><li class=listTitle>1 August 2006<li class=listLink><a href=https://tomforsyth1000.github.io/blog.wiki.html title="Dodgy demos - TomForsyth, 2006/8/1 上午8:05:00" class="tiddlyLink tiddlyLinkExisting" refresh=link tiddlylink="Dodgy demos">Dodgy demos</a></ul><ul class=timeline><li class=listTitle>7 July 2006<li class=listLink><a href=https://tomforsyth1000.github.io/blog.wiki.html title="Babbage was a true genius - TomForsyth, 2006/7/7 上午8:10:00" class="tiddlyLink tiddlyLinkExisting" refresh=link tiddlylink="Babbage was a true genius">Babbage was a true genius</a></ul><ul class=timeline><li class=listTitle>6 May 2006<li class=listLink><a href=https://tomforsyth1000.github.io/blog.wiki.html title="NoE - TomForsyth, 2006/5/6 上午6:55:00" class="tiddlyLink tiddlyLinkExisting" refresh=link tiddlylink=NoE>NoE</a><li class=listLink><a href=https://tomforsyth1000.github.io/blog.wiki.html title="EmailMe - TomForsyth, 2006/5/6 上午6:36:00" class="tiddlyLink tiddlyLinkExisting" refresh=link tiddlylink=EmailMe>EmailMe</a><li class=listLink><a href=https://tomforsyth1000.github.io/blog.wiki.html title="VGA was good enough for my grandfather - TomForsyth, 2006/5/6 上午6:29:00" class="tiddlyLink tiddlyLinkExisting" refresh=link tiddlylink="VGA was good enough for my grandfather">VGA was good enough for my grandfather</a><li class=listLink><a href=https://tomforsyth1000.github.io/blog.wiki.html title="RSS part 3 - TomForsyth, 2006/5/6 上午6:29:00" class="tiddlyLink tiddlyLinkExisting" refresh=link tiddlylink="RSS part 3">RSS part 3</a><li class=listLink><a href=https://tomforsyth1000.github.io/blog.wiki.html title="RAMDACs - TomForsyth, 2006/5/6 上午6:29:00" class="tiddlyLink tiddlyLinkExisting" refresh=link tiddlylink=RAMDACs>RAMDACs</a></ul><ul class=timeline><li class=listTitle>2 May 2006<li class=listLink><a href=https://tomforsyth1000.github.io/blog.wiki.html title="RSS part 2 - TomForsyth, 2006/5/2 下午12:22:00" class="tiddlyLink tiddlyLinkExisting" refresh=link tiddlylink="RSS part 2">RSS part 2</a></ul><ul class=timeline><li class=listTitle>16 April 2006<li class=listLink><a href=https://tomforsyth1000.github.io/blog.wiki.html title="Game Middleware list - TomForsyth, 2006/4/16 上午11:42:00" class="tiddlyLink tiddlyLinkExisting" refresh=link tiddlylink="Game Middleware list">Game Middleware list</a><li class=listLink><a href=https://tomforsyth1000.github.io/blog.wiki.html title="RSS banditry - TomForsyth, 2006/4/16 上午11:40:00" class="tiddlyLink tiddlyLinkExisting" refresh=link tiddlylink="RSS banditry">RSS banditry</a><li class=listLink><a href=https://tomforsyth1000.github.io/blog.wiki.html title="In the beginning... - TomForsyth, 2006/4/16 上午11:40:00" class="tiddlyLink tiddlyLinkExisting" refresh=link tiddlylink="In the beginning...">In the beginning...</a><li class=listLink><a href=https://tomforsyth1000.github.io/blog.wiki.html title="...there was a load of words - TomForsyth, 2006/4/16 上午11:40:00" class="tiddlyLink tiddlyLinkExisting" refresh=link tiddlylink="...there was a load of words">...there was a load of words</a></ul><ul class=timeline><li class=listTitle>13 April 2006<li class=listLink><a href=https://tomforsyth1000.github.io/blog.wiki.html title="This shadow tiddler should be set to the full target URL for publication" class="tiddlyLink tiddlyLinkExisting" refresh=link tiddlylink=SiteUrl>SiteUrl</a><li class=listLink><a href=https://tomforsyth1000.github.io/blog.wiki.html title="WriteInCamelCapsLikeThis - TomForsyth, 2006/4/13 上午8:22:00" class="tiddlyLink tiddlyLinkExisting" refresh=link tiddlylink=WriteInCamelCapsLikeThis>WriteInCamelCapsLikeThis</a><li class=listLink><a href=https://tomforsyth1000.github.io/blog.wiki.html title="WhatIsThisThing - TomForsyth, 2006/4/13 上午8:22:00" class="tiddlyLink tiddlyLinkExisting" refresh=link tiddlylink=WhatIsThisThing>WhatIsThisThing</a><li class=listLink><a href=https://tomforsyth1000.github.io/blog.wiki.html title="UphillBothWays - TomForsyth, 2006/4/13 上午8:22:00" class="tiddlyLink tiddlyLinkExisting" refresh=link tiddlylink=UphillBothWays>UphillBothWays</a><li class=listLink><a href=https://tomforsyth1000.github.io/blog.wiki.html title="This shadow tiddler is used as the first part of the page title" class="tiddlyLink tiddlyLinkExisting" refresh=link tiddlylink=SiteTitle>SiteTitle</a><li class=listLink><a href=https://tomforsyth1000.github.io/blog.wiki.html title="This shadow tiddler is used as the second part of the page title" class="tiddlyLink tiddlyLinkExisting" refresh=link tiddlylink=SiteSubtitle>SiteSubtitle</a><li class=listLink><a href=https://tomforsyth1000.github.io/blog.wiki.html title="TheWife - TomForsyth, 2006/4/13 上午7:16:00" class="tiddlyLink tiddlyLinkExisting" refresh=link tiddlylink=TheWife>TheWife</a></ul><ul class=timeline><li class=listTitle>12 April 2006<li class=listLink><a href=https://tomforsyth1000.github.io/blog.wiki.html title="TomForsyth - TomForsyth, 2006/4/12 上午11:10:00" class="tiddlyLink tiddlyLinkExisting" refresh=link tiddlylink=TomForsyth>TomForsyth</a></ul></div></div></div></div>
</div>
<div id=displayArea role=main>
<div id=messageArea style=display:none></div>
<div id=tiddlerDisplay><div class=tiddler id=tiddlerHelloThere refresh=tiddler tags tiddler=HelloThere template=ViewTemplate>
<div class=toolbar role=navigation><a href=https://tomforsyth1000.github.io/blog.wiki.html title="Close this tiddler" class="button command_closeTiddler" commandname=closeTiddler tiddler=HelloThere>close</a><a href=https://tomforsyth1000.github.io/blog.wiki.html title="Close all other tiddlers" class="button command_closeOthers" commandname=closeOthers tiddler=HelloThere>close others</a><a href=https://tomforsyth1000.github.io/blog.wiki.html title="View the source of this tiddler" class="button command_editTiddler defaultCommand" commandname=editTiddler tiddler=HelloThere>view</a><a href=https://tomforsyth1000.github.io/blog.wiki.html title="Show additional commands" class="button moreCommand">more</a><span class=moreCommand style=display:none></span></div>
<div class=title>HelloThere</div>
<div class=subtitle><span><a href=https://tomforsyth1000.github.io/blog.wiki.html title="TomForsyth - TomForsyth, 2006/4/12 上午11:10:00" class="tiddlyLink tiddlyLinkExisting" refresh=link tiddlylink=TomForsyth>TomForsyth</a></span>, <span>16 August 2016</span> (<span>created</span> <span>8 January 2006</span>)</div>
<div class="tagging sf-hidden"></div>
<div class=tagged><ul><li class=listTitle>no tags</ul></div>
<div class=viewer>Hello and welcome to my blog. Always fresh, always technobabble. Read the chronological blog that is usually listed below, or use some of the links to the left. Or <a href=https://tomforsyth1000.github.io/blog.wiki.html title="EmailMe - TomForsyth, 2006/5/6 上午6:36:00" class="tiddlyLink tiddlyLinkExisting" refresh=link tiddlylink=EmailMe>EmailMe</a>. Although this is technically a wiki, you'll just be editing your own personal copy, not the public one.</div>
<div class=tagClear></div>
</div><div class=tiddler id=tiddlerVR_optics_and_why_IPD_means_too_many_things refresh=tiddler tags="VR IPD Blog Oculus Research" tiddler="VR optics and why IPD means too many things" template=ViewTemplate>
<div class=toolbar role=navigation><a href=https://tomforsyth1000.github.io/blog.wiki.html title="Close this tiddler" class="button command_closeTiddler" commandname=closeTiddler tiddler="VR optics and why IPD means too many things">close</a><a href=https://tomforsyth1000.github.io/blog.wiki.html title="Close all other tiddlers" class="button command_closeOthers" commandname=closeOthers tiddler="VR optics and why IPD means too many things">close others</a><a href=https://tomforsyth1000.github.io/blog.wiki.html title="View the source of this tiddler" class="button command_editTiddler defaultCommand" commandname=editTiddler tiddler="VR optics and why IPD means too many things">view</a><a href=https://tomforsyth1000.github.io/blog.wiki.html title="Show additional commands" class="button moreCommand">more</a><span class=moreCommand style=display:none></span></div>
<div class=title>VR optics and why IPD means too many things</div>
<div class=subtitle><span><a href=https://tomforsyth1000.github.io/blog.wiki.html title="TomForsyth - TomForsyth, 2006/4/12 上午11:10:00" class="tiddlyLink tiddlyLinkExisting" refresh=link tiddlylink=TomForsyth>TomForsyth</a></span>, <span>16 December 2019</span> (<span>created</span> <span>16 December 2019</span>)</div>
<div class="tagging sf-hidden"></div>
<div class=tagged><ul><li class=listTitle>tags: <li><a href=https://tomforsyth1000.github.io/blog.wiki.html title="Show tiddlers tagged with 'VR'" class=button tag=VR tiddler="VR optics and why IPD means too many things">VR</a></li> <li><a href=https://tomforsyth1000.github.io/blog.wiki.html title="Show tiddlers tagged with 'IPD'" class=button tag=IPD tiddler="VR optics and why IPD means too many things">IPD</a></li> <li><a href=https://tomforsyth1000.github.io/blog.wiki.html title="Show tiddlers tagged with 'Blog'" class=button tag=Blog tiddler="VR optics and why IPD means too many things">Blog</a></li> <li><a href=https://tomforsyth1000.github.io/blog.wiki.html title="Show tiddlers tagged with 'Oculus'" class=button tag=Oculus tiddler="VR optics and why IPD means too many things">Oculus</a></li> <li><a href=https://tomforsyth1000.github.io/blog.wiki.html title="Show tiddlers tagged with 'Research'" class=button tag=Research tiddler="VR optics and why IPD means too many things">Research</a></ul></div>
<div class=viewer>Here's a bunch of things that people in the VR industry do know, but either forget they know, or find too complex to talk publicly about. As a result, they're very poorly understood in the public discussions, so I thought I'd try to share some of them. Be warned a few of the opinions are still somewhat contentious - not everyone will agree with some parts of this. That's in the nature of VR - nobody really knows how it works yet, certainly not me, so there will always be disagreement.<br><br><strong>On research</strong><br><br>This rather long post all started when a journalist called Chris Bratt wrote to me asking about some research he heard I had done on IPD distributions and male/female differences. This topic irritates me in many ways, most particularly when people call stuff "research" when it absolutely fails even the basic standards of robust research. In this case, calling what I did "research" is laughable. So let me explain what I <strong>actually</strong> did.<br><br>This was when I was at Valve in the early days of our VR investigations in around 2012. What we were trying to do was match the inter-camera-distance (ICD) to the user's actual inter-pupillary-distance (IPD) to provide an accurate feeling of scale - not with a mechanical system, but with a graphics display that you adjusted with a controller. This seemed to work at average IPDs for the people in the VR group, but we wanted to test it for some of the folks in the long tails of the IPD bell-curve. So I went wandering the halls of Valve looking for outliers - people with very wide or narrow IPDs.<br><br>So this is obviously where the idea of "robust research" goes out the window - I'm not throwing a meter-sided square out into the canteen and sampling everyone that falls inside the square - I'm actively looking for outliers. And it's surprising how little practice it takes to be able to gauge peoples' IPDs by just looking them square in the face for a second. So I'd wander the halls, go into a room of people working, and then go up to each person, say "excuse me" - they'd turn to look at me, I'd stare at them for a few seconds and mostly I'd say "no, boring, thanks." So that's totally not weird at all.<br><br>And Valve is a surprisingly large place, lots of people to try, and so since I was explicitly looking for outliers, to save time I instead focused on large men and small women - because logically they're where the outliers would be, right? Except this didn't work at all! The small women had roughly normal-sized heads and even when they had a small head, they didn't necessary have eyes that were close together. And the large men didn't usually have large heads, and even when they did most of the time their eyes were not widely spaced. This surprised me a lot - that if there was a correlation with height or head size, it was absolutely not obvious. Indeed - the person I found who had the narrowest IPD of the entire office (54mm) was an otherwise perfectly normally-proportioned 6-foot-2 man with an otherwise unremarkably-sized head.<br><br>To repeat - none of this is even remotely "research" - the sample sizes are tiny, and there's exactly zero randomisation done, and I was deliberately looking for outliers and ignoring the middle. But the "obvious" thing is absolutely not there - at least not in an "obvious" way. It was a lesson in even basic assumptions - VR laughs at them. In particular, the variance within any specific sub-population (men, women, tall, short, old, young) is usually much larger than the difference in their means.<br><br><strong>Inter-what-distance?</strong><br><br>IPD is a hugely over-used term. In VR there are a whole bunch of different things we can talk about, and they should all have different terms. Some of these are official terms, a few I just made up because we need to call them something:<br><br>1. Inter-Ocular Distance (IOD): The fixed distance between the center of the user’s eyeballs.<br>2. Inter-Pupillary Distance (IPD): The instantaneous distance between the center of the user’s pupils. This varies with vergence!<br>3. Inter-Axial Distance (IAD) or optical axis separation: The distance between the optical centres of the lenses on the HMD.<br>4. Inter-Camera Distance (ICD) or Virtual Camera Separation (VCS): The in-app distance between the virtual cameras used for rendering left and right views.<br><br>The last two terms are not universal, but they're the terms I shall use here. This is very pedantic, but since I'm going to talk about all four things and their relationships at various times, it's important to be precise and make sure we're talking about the right one.<br><br>Also note the word "vergence". Usually this is "con-vergence" - the eyes pointing towards each other to look at a nearby object, which shrinks the inter-PUPILLARY-distance (but not of course the inter-OCULAR-distance). However people with wall-eye can have di-vergence - eyes pointing away from each other - so the general term is simply "vergence".<br><br>I do find it amusing that the one we mostly don’t care about in VR – because it changes constantly – is the only one that’s actually called "IPD".<br><br>What people in VR mostly mean when they talk about "IPD" is in fact inter-ocular-distance (IOD) which doesn't change over time or according to vergence. However it's hard to measure directly - how do you find the middle of an eyeball? So usually what we measure is IPD with zero vergence, i.e. looking at an object at infinity. Note that when optometrists measure IPD, they always do at a stated distance (sometimes given in meters, sometimes in diopters), and if you have a piece of paper from your optometrist with your IPD on it, somewhere on there it will also say at what distance it was measured. This is important for example if getting glasses specifically for reading - they will measure your IPD with the vergence you use for reading.<br><br><strong>The size of eyeballs</strong><br><br>One thing that is fascinating about humans is all their eyeballs are almost exactly the same size. They all have a radius of 12mm to an astonishing degree of accuracy for nature (less than 5% variance). Think about the huge variation in the sizes of humans and their body parts - but they all have eyeballs that are almost exactly the same size. And what small variance there is has no correlation to age, height, gender, ethnicity, or anything else anybody can find. The reason is that that's how optical physics works - if your eyeball isn't the exact correct size, you can't see properly. And we have very precise feedback mechanisms to make sure our eyeballs grow to the exact correct size. It is also why children have such big eyes - they quickly grow them up to the right size - before any other part of their body - so that they can see. By age 3, the eyeball is 11mm radius, and full-grown by age 12.<br><br>This very consistent eyeball size is great for designing VR headsets of course - one less thing to measure! With that fixed size, we can easily calculate how much vergence affects IPD. Since a lot of VR games involve looking at things you pick up or manipulate with your actual hands, this is important. But how important?<br><br>Well, let's imagine you tend to manipulate things at a suspiciously-precise 332mm from your face, and let's say you are a man with an average inter-ocular distance, which according to the 2012 Army Survey data in Wikipedia is 64 mm. Looking at an object 332mm away from your eyes, and 64/2=32mm laterally from each one (i.e. in the middle, in line with your nose), the eyeballs have rotated inwards by atan(32/332) = 5.51 degrees. Since they have a radius of 12mm, this is a physical sideways movement of 12*sin(5.51) = 1.15mm. Each eyeball has moved that far, so the IPD when looking at this closer object is 64-(2*1.15) = 61.7mm. Which, because of course I carefully chose 332mm, is the Wikipedia-supplied average women's IPD. This means that even on a completely non-adjustable HMD, the optical quality experienced by the "average woman" looking at a mountain is the same as that experienced by the "average man" looking at something they are holding in their hands - because they both have the same IPD.<br><br><strong>The eye box</strong><br><br>Having established that the pupil moves significantly when looking at close-by objects, or just when looking around a scene (real or VR), we should quantify it. Because all eyeballs are the same size, this is pretty simple. Eyeballs can comfortably and routinely move about 40 degrees off-axis in normal use - you can move them further, but it's rare, and usually you instead turn your head. You can't move your eyeballs upwards quite as far, and you can move them downwards further, but let's ignore that for now - it's still roughly 80 degrees up to down. At 40 degrees off-center, that's 12*sin(40) = 7.7mm. Let's call it 7.5mm for nice numbers, or 15mm side-to-side for each eyeball. Note that when you do this your pupil also moves backwards by 12*(1-cos(40)) = 2.8mm. Let's call it 3mm.<br><br>So imagine this area of space through which your eyeball travels - it's 15mm wide and 3mm deep. This is what optical folks refer to as your "eyebox". It's not really a box shape of course, but well... that's the term, so I guess we're stuck with it. Optical systems also have an "eyebox" - this is the shape that your pupil can move inside and still get a "good" (for some arbitrary definition) image. If you have ever used binoculars or a microscope or a high-zoom rifle scope, you will know that most of these devices have a tiny eyebox - that is, when you hold it up to your face, even small motions of your eyeball make the image degrade in various ways - in focus, in brightness, or it vanishes altogether. Lower-power devices such as magnifying glasses or reading spectacles have a much larger eyebox - this makes them easier to use, and gives you wider fields of view. The trick with a VR device is to give the user an optical eyebox that matches their real eyebox. This is very difficult, and most VR headsets don't quite get there - the quality of image gradually degrades towards the edges - but in the center they are surprisingly good.<br><br>It is interesting to compare the range of motion of the eyeball in normal use with the variance in IOD (reminder - "IOD" is the separation of the middle of your eyeballs, not your pupils). A person's eyebox is as previously calculated around 15mm side to side, or a 7.5mm deviation from the midline. The range of IODs for 90% of the population (according to the Wikipedia data, taken from the 2012 Army Survey) is 55mm (women 5%) to 70mm (men 95%), which is also 15mm! However, this is misleading - the deviation from the average midline for each eyeball is actually a quarter that, or 3.75mm. A quick sanity-check - if the average IOD is 62.5mm, them moving each eyeball outwards by 3.75mm gives an IOD of 62.5 + 2 * 3.75 = 70mm. If each eyeball moves inwards by 3.75mm, that gives 62.5 - 2 * 3.75 = 55mm.<br><br>So the amount of pupil movement involved in just looking around normally is twice as large as the 90% range of IODs that most HMDs need to cope with. Now of course these things are cumulative - a person with narrow IOD has that but <strong>also</strong> has to be able to look around a scene - but the point here is that IOD variance is <strong>not</strong> the major cause of pupil movement while using VR. Another conclusion that is interesting to consider is that even if a headset has an "IPD adjustment" (more correctly, the "optical axis separation adjustment"), it is not that critical <strong>for optical reasons</strong> to get it to perfectly match the user's IOD. A few millimeters off may be OK because your pupils move by significantly more than a few millimeters in normal use anyway.<br><br><strong>Collimated images</strong><br><br>This is counterintuitive for most people. Surely if the lenses are not perfectly aligned with your eyeballs, the picture will be displaced? The lenses are so close to your eyes, even a small offset will be very obvious, right? But this isn't the case because of the special way the lenses work. VR lenses produce (almost) collimated images. "Collimated" means that the light rays for a particular bit of information (e.g. a single pixel) are all parallel - wherever they come out of the lens. So for that whole lens area you can see - all the light rays from a single pixel all exit that lens parallel to each other. This is an absolutely mind-blowing thing to try to get your head around - I've worked in VR for years and I still can't really visualise that. But the important thing is that your eyeballs are angle-measuring devices. They can only see light rays passing through a single point - your pupil - and what they do is measure the angle and colour of those light rays. Since all the light from a given pixel are all parallel, they all travel at the same angle. This means wherever you put your pupil in front of the lens, a single pixel's light all hits the pupil at the same angle. So translating the pupil around doesn't change the angle of the light rays, which means the image doesn't move.<br><br>At this point, if you're not a VR optics expert (and sometimes even if you are), you are yelling at the screen telling me I'm a fool. Of course the image moves - it's obvious! But try this experiment. If you can find a fixed test pattern, put that on the HMD's screen, then pull the HMD away from your face a little, and move it side to side by an inch or so (don't rotate it, just translate it). The image stays fixed in space! It’s a really strange thing – you’re moving the physical box, but the image inside it doesn’t move. That’s the power of collimated-light images, and it's still very unintuitive to me even though I understand the physics and maths very well.<br><br>Of course real VR lenses are not perfectly collimated for various reasons. But they're close enough that getting the IAD (optical axis separation) adjustment perfectly right is not as important as it appears at first. And if you think back to how far your pupil moves as you look around a scene, that's a good thing - if the image distorted wildly as you looked around, that would be bad. This is the fundamental reason why VR headsets produce collimated images, while most other optical devices do not - because they want to give you a wide field of view and let you look around, and that means allowing your pupils to roam around their eyebox.<br><br><strong>Virtual separation - or why IOD actually is important</strong><br><br>I've spent a lot of words trying to convince you that exactly measuring and matching IOD isn't that important, because IPD changes so much and so dynamically anyway. But that's only addressing the question of optical clarity. There's a much more important reason we <strong>do</strong> want to measure the user's IOD very precisely.<br><br>We as humans use a whole lot of interconnected cues to determine the motion of our heads and the orientation relative to the environment. One of the important ones is stereoscopy through parallax motion. As the head moves around, the inner ear semicircular canals "slosh", the neck muscles react to the weight of the head, the eyeballs rotate to counteract (VOR "vestibulo ocular reflexes" – lots of VR talk about these elsewhere) and images move across the retina and trigger motion detectors. All this data goes into the brain and is correlated together. If there's a mismatch in one of the bits of data, you tend to get nausea.<br><br>One of the ways we get an absolute sense of "scale" in what we're looking at is the comparison of the vergence of our eyes when looking at a specific object, compared to our IOD. We use the distance between our eyes as a fixed "measuring stick" against the world. It is important that the virtual ICD – the distance between in-game cameras – matches your real physical IOD. Otherwise the virtual world will seem larger or smaller than it really is. Which is actually a very cool effect by the way, and not inherently a problem. You can move the cameras further apart and make the world seem smaller, or move them closer together and make the world feel larger.<br><br>Where this change in virtual camera separation (ICD) becomes a problem is if you move your head side-to-side, causing parallax by motion, rather than parallax by displacement (IOD). If those two don't match, your brain gets confused, and that's discomfort and nausea. Specifically if you translate your head sideways by the distance of your IOD, your left eyeball should now be seeing what your right eyeball was seeing. If it doesn't, the brain worries that something bad has happened, and makes you feel bad about it.<br><br>Note that if you scale BOTH – you move the virtual cameras closer together, AND you reduce the in-game motion of the cameras due to head motion – everything is totally fine! The world just grew or shrank magically, but it all still works and you don't get nausea. There are a bunch of demos that do this, and it's quite an experience, but it's not actually uncomfortable. You would think you would make the player feel larger or smaller, but most people report that they feel the same size, while the world changes in size around them. If you want to make the player feel taller, you need to move the cameras upwards, but NOT outwards.<br><br>Anyway, so HMD tracking systems know how far your head is moving in absolute units. But if the virtual ICD is set wrong, then the stereoscopy won't match, and you have a comfort problem. Here's the key thing – the IOD that is important here is literally <strong>the user's own</strong> IOD. Where the HMD lenses are (the IAD) is NOT that important (except to get a decent image so you can see something of course). So even if the physical "IPD" (really the IAD) of an adjustable HMD won't exactly reach the user's actual IOD, but close enough to let them see decent images, you still need a way to adjust the virtual ICD of the in-game cameras to match the <strong>user's</strong> IOD (rather than the HMD).<br><br>The good news is that virtual ICD is completely controllable - it's just a number in code, and there's no reason it has to correspond to the physical IAD of the headset, or even be physically plausible. The two big problems are (1) you have to know what the user's IOD is, so how do they even measure that without going to an optometrist? And (2) most VR software I have seen does not have an IOD/ICD override. It just assumes the physical IAD of the headset matches the user's IOD, which may not be true. Note this override just has to be in the "driver" software like SteamVR or the Oculus runtime – it doesn't have to be in every game.<br><br>One obvious caveat is that a big chunk of the population has very poor stereoscopy. The figures are all over the place, but some numbers I've seen are that as much as 40% of people can't see in stereo very well. That is – both eyes work fine, but the machinery that forms a composite image with depth doesn't. These people get most of their depth cues by moving their head and seeing how parallax changes with a single eye, rather than by correlating the parallax between both eyes. This is almost as efficient as true stereoscopy – there have been plenty of world-class "flying ball game" players (cricket, baseball, soccer, etc) who can only see with one eye and get all their depth cues from head motion.<br><br>But you still have to be careful because we're not talking about catching balls, we're talking about discomfort, which is a very different thing. And it's totally plausible that someone with terrible stereo vision (e.g. extreme wall-eye, where the two foveas can't physically point at the same object) might nevertheless get discomfort because their virtual ICD does not match their physical IOD.<br><br>I personally believe that this mismatch factor between IOD and virtual ICD is a much larger cause of discomfort in the general VR-using population than the physical one of IOD and IAD (i.e. lens positioning). However it is also far less well-known as a mismatch problem, and also less obvious when it's wrong. If the lenses are significantly off, you can see it – the picture looks kinda crappy unless the lens designers are amazing. But if the virtual ICD is off, most people won't immediately notice. It's actually astonishing how often developers accidentally switch left and right eyes in code – effectively having the ICD be negative rather than positive – and it takes ages to consciously notice, if ever. But your subconscious notices, and you will end up being sick, and you won't know why!<br><br><strong>Physical HMD constraints</strong><br><br>HMD designers constantly work to make the eyebox of their devices as large as possible, but that has to trade off against clarity, distortion, and a whole bunch of other factors. One strong reason to have optical-axis adjustment is to minimise the size of the eyebox needed, but as we have seen, that doesn't help as much as you would hope - IOD variance is significantly smaller than the inherent motion of the pupil while looking around.<br><br>Adding an optical-axis adjustment adds weight, complexity, and cost to a design. All these three cause problems. Extra weight means the headset is less comfortable to use for some people, or it may mean some other feature needs to be removed to keep the weight down. Complexity is a problem because there are other adjustments that may be desirable - for example adjustable eye relief - and it may be prohibitively difficult to build a device with adjustment in both eye relief and optical axis separation. And cost is a problem because the more a device costs, the fewer people can afford to buy it, and the more exclusive VR remains.<br><br>It is interesting to note that Oculus have gone back-and-forth on this question. DK1 and DK2 both had fixed IAD but did have eye-relief adjustment. It wasn't GOOD eye-relief adjustment - the mechanism was fragile and constantly popping out of place, but hey that's why they're DevKits! The first version of Rift added IAD adjustment, but as a result had to remove eye-relief adjustment to make the mechanism practical. Its successor Rift S switched back again, fixing IAD and allowing eye-relief adjustment, and the user is asked to supply an ICD setting manually. Sadly, if you have the original Rift with the hardware IAD adjustment, there appears to be no path to override the hardware setting with your own IOD.<br><br>In SteamVR, there is a setting in the "steamvr.vrsettings" file called "ipdOffset". It appears to be in meters, and it has some effect on apparent world scale, but what it actually does in practice is unclear. Is it relative to the hardware-reported IAD? Is it per-eye or the sum of both eyes? Can you do asymmetry with it? Is positive outwards or inwards? Some experimentation required!<br><br>It is important to understand that VR HMD design is incredibly difficult. Nobody really knows how it works. A lot of the time it barely works. Every single decision costs money and weight and complexity. There is no way to make a headset that works for everyone – there will always be people excluded by any design. Make it too complex and now it's too heavy for some people to wear. It also excludes people because it’s more expensive to make, so some people don’t have enough money to buy it – that's also exclusionary! So you simply cannot get away from the fact that every decision excludes some portion of the population, and you have to make those tradeoffs consciously and deliberately and know who you're excluding and why and what it would take to include them back and in turn who would get excluded by that decision. These design decisions take ages and endless meetings and demographics tables and looking at population bell curves and so on.<br><br><strong>What I think the right solution is</strong><br><br>I should note that (at least at the time of writing) I no longer work at any VR companies. So this is just my opinion, and I know for sure it's not one that is universally or even widely shared, so do not take this as any hint of what Oculus, Valve, HTC or any other VR company is doing. This is just what I think they should be doing.<br><br>The first, and easiest part, is to allow people to have a biometric profile inside OculusHome/SteamVR that stores their IOD and their standing and sitting heights (specifically, the distance from their eyeballs to the ground, when standing, and when sitting in their "usual chair"). IOD can be measured by lens adjustment or by manual override (e.g. if they ask their optometrist - everyone should have an eye test every few years, so ask while you're there!). Standing and sitting heights can be measured by putting the headset on the ground, then putting it on and standing up or sitting down. Once those calibrations are done, software and hardware can use them to give the most accurate sense of scale possible, and put the ground where your real feet are.<br><br>Additionally, if the HMD has an inter-axial lens adjustment, the software can help guide the user to adjust the lenses appropriately, within the constraints of the hardware. I believe that having the hardware IAD guide the software ICD is <strong>not</strong> a particularly useful feature - it is very difficult to set the IAD to match your IOD just on visual cues alone, so having it determine your virtual ICD does not have sufficient accuracy to avoid nausea. In general it is much more robust to measure your IOD once, have that as a fixed number in software, and then have the software help you set the hardware IAD to match, in case it got bumped or someone else used the headset. Having a profile per person also makes it much simpler to share an HMD within family and friends, because then each person can have their own named profile with their own measurements. As a matter of privacy, the biometric profile should ONLY store this simple data, and in clear text so that you can inspect it if you need to.<br><br>The second part is for HMD makers to prioritise good eye-relief adjustment above IAD adjustment. Having both in a single device is complex, and in my opinion close and repeatable eye-relief is a far bigger influence on optical quality than IAD adjustment. The issue with eye relief is that every face is different, so when you put the HMD on your face, the distance from the lenses to your pupils is pretty arbitrary. However, unlike IOD, you can't build the HMD to use the "average" eye-relief distance - because then 50% of the population have lenses shoved into their eyeballs, which is suboptimal. So instead you have to build an HMD for the 95% percentile of the population, which means it sucks for almost everybody! If instead you can allow the user to move the lenses as close to their eyes as they can tolerate (typically the length of their eyelashes, or around 10mm), they get the best FOV physically possible, and the lens designers can design for a very thin eyebox. A lens that can produce 100 degrees FOV at 25mm eye-relief can produce a whopping 143 degrees FOV at 10mm! Additionally, having a consistently thin eyebox (because every user adjusts it to be a consistent distance away) turns out to be very powerful and allow for a lot more optical freedom in other axes to create a better experience for all. This is why I regard eye-relief adjustment as far more important than IAD adjustment.<br><br>The third part is if you are going to have IAD adjustment in the headset, it can and should be simpler. There is no requirement for IAD adjustment to be continuous, easy to adjust, or symmetrical. It is perfectly OK for lens position adjustment to require taking the headset off, and then putting each lens in one of N discrete positions. In some ways it's preferable - if the positions are simply numbered then it's repeatable - you're not putting them in a slightly different position each time you put the headset on. Five positions per eye covers the 99% range of IOD in the population in 2.4mm increments (5 positions per eye means there are 9 possible widths by moving only one eye, then moving the HMD sideways by 1.2mm), which means nobody's eyeballs are more than 1.2mm away from the centre of the lenses - that's plenty of precision. Allowing asymmetry is also important - most peoples noses are not exactly midway between their eyes. Keeping this mechanism simple makes having both eye-relief and IAD adjustment in a single device more practical.<br><br>The forth part is that many headsets now have well-calibrated cameras on the headsets for positional sensing and for passthrough video. I would love to allow the user to hold the HMD in front of their face "looking" at them, the user looks at a spot on the HMD, it then takes a picture of their face, figures out their actual IPD (with the appropriate vergence because they know the user is looking at the point on the HMD), calculates the IOD, and then puts that in the biometric profile. This is a more convenient alternative to going to the optometrist.<br><br>I hope this has been an interesting and sometimes pedantic trip through the intricacies of how far apart your eyes are.</div>
<div class=tagClear></div>
</div><div class=tiddler id="tiddlerWhy_didn't_Larrabee_fail?" refresh=tiddler tags=Larrabee tiddler="Why didn't Larrabee fail?" template=ViewTemplate>
<div class=toolbar role=navigation><a href=https://tomforsyth1000.github.io/blog.wiki.html title="Close this tiddler" class="button command_closeTiddler" commandname=closeTiddler tiddler="Why didn't Larrabee fail?">close</a><a href=https://tomforsyth1000.github.io/blog.wiki.html title="Close all other tiddlers" class="button command_closeOthers" commandname=closeOthers tiddler="Why didn't Larrabee fail?">close others</a><a href=https://tomforsyth1000.github.io/blog.wiki.html title="View the source of this tiddler" class="button command_editTiddler defaultCommand" commandname=editTiddler tiddler="Why didn't Larrabee fail?">view</a><a href=https://tomforsyth1000.github.io/blog.wiki.html title="Show additional commands" class="button moreCommand">more</a><span class=moreCommand style=display:none></span></div>
<div class=title>Why didn't Larrabee fail?</div>
<div class=subtitle><span><a href=https://tomforsyth1000.github.io/blog.wiki.html title="TomForsyth - TomForsyth, 2006/4/12 上午11:10:00" class="tiddlyLink tiddlyLinkExisting" refresh=link tiddlylink=TomForsyth>TomForsyth</a></span>, <span>16 August 2016</span> (<span>created</span> <span>15 August 2016</span>)</div>
<div class="tagging sf-hidden"></div>
<div class=tagged><ul><li class=listTitle>tags: <li><a href=https://tomforsyth1000.github.io/blog.wiki.html title="Show tiddlers tagged with 'Larrabee'" class=button tag=Larrabee tiddler="Why didn't Larrabee fail?">Larrabee</a></ul></div>
<div class=viewer>Every month or so, someone will ask me what happened to <a href=https://tomforsyth1000.github.io/blog.wiki.html title="Larrabee - TomForsyth, 2008/7/19 下午10:28:00" class="tiddlyLink tiddlyLinkExisting" refresh=link tiddlylink=Larrabee>Larrabee</a> and why it failed so badly. And I then try to explain to them that not only didn't it fail, it was a pretty huge success. And they are understandably very puzzled by this, because in the public consciousness Larrabee was like the Itanic and the SPU rolled into one, wasn't it? Well, not quite. So rather than explain it in person a whole bunch more times, I thought I should write it down.<br><br>This is not a history, and I'm going to skip a TON of details for brevity. One day I'll write the whole story down, because it's a pretty decent escapade with lots of fun characters. But not today. Today you just get the very start and the very end.<br><br>When I say "Larrabee" I mean all of Knights, all of MIC, all of Xeon Phi, all of the "Isle" cards - they're all exactly the same chip and the same people and the same software effort. Marketing seemed to dream up a new codeword every week, but there was only ever three chips:<br><ul><li> Knights Ferry / Aubrey Isle / LRB1 - mostly a prototype, had some performance gotchas, but did work, and shipped to partners.<li> Knights Corner / Xeon Phi / LRB2 - the thing we actually shipped in bulk.<li> Knights Landing - the new version that is shipping any day now (mid 2016).</ul><br>That's it. There were some other codenames I've forgotten over the years, but they're all of one of the above chips. Behind all the marketing smoke and mirrors there were only three chips ever made (so far), and only four planned in total (we had a thing called LRB3 planned between KNC and KNL for a while). All of them are "Larrabee", whether they do graphics or not.<br><br>When Larrabee was originally conceived back in about 2005, it was called "SMAC", and its original goals were, from most to least important:<br><br>1. Make the most powerful flops-per-watt machine for real-world workloads using a huge array of simple cores, on systems and boards that could be built into bazillo-core supercomputers.<br><br>2. Make it from x86 cores. That means memory coherency, store ordering, memory protection, real OSes, no ugly scratchpads, it runs legacy code, and so on. No funky DSPs or windowed register files or wacky programming models allowed. Do not build another Itanium or SPU!<br><br>3. Make it soon. That means keeping it simple.<br><br>4. Support the emerging GPGPU market with that same chip. Intel were absolutely not going to build a 150W PCIe card version of their embedded graphics chip (known as "Gen"), so we had to cover those programming models. As a bonus, run normal graphics well.<br><br>5. Add as little graphics-specific hardware as you can get away with.<br><br>That ordering is important - in terms of engineering and focus, Larrabee was never primarily a graphics card. If Intel had wanted a kick-ass graphics card, they already had a very good graphics team <strong>begging</strong> to be allowed to build a nice big fat hot discrete GPU - and the Gen architecture is such that they'd build a great one, too. But Intel management didn't want one, and still doesn't. But if we were going to build Larrabee anyway, they wanted us to cover that market as well.<br><br>Now remember this was around 2005 - just as GPGPU was starting to show that it could get interesting wins on real HPC workloads. But it was before the plethora of "kernel" style coding languages had spread to "normal" languages like C and FORTRAN (yes, big computing people still use FORTRAN, get over it). Intel was worried its existing Xeon CPU line just weren't cutting it against the emerging threat from things like GPGPU, the Sony CELL/SPU, Sun's Niagara, and other radical massively-parallel architectures. They needed something that was CPU-like to program, but GPU-like in number crunching power.<br><br>Over the years the external message got polluted and confused - sometimes intentionally - and I admit I played my own part in that. An awful lot of "highly speculative marketing projections" (i.e. bullshit) was issued as firm proclamations, and people talked about things that were 20 years off as if they were already in the chip/SW. It didn't help that marketing wanted to keep Larrabee (the graphics side) and MIC/Knights/Xeon Phi (the HPC side) separate in the public consciousness, even though they were the exact same chip on very nearly the exact same board. As I recall the only physical difference was that one of them didn't have a DVI connector soldered onto it!<br><br>Behind all that marketing, the design of Larrabee was of a CPU with a very wide SIMD unit, designed above all to be a real grown-up CPU - coherent caches, well-ordered memory rules, good memory protection, true multitasking, real threads, runs Linux/FreeBSD, etc. Larrabee, in the form of KNC, went on to become the fastest supercomputer in the world for a couple of years, and it's still making a ton of money for Intel in the HPC market that it was designed for, fighting very nicely against the GPUs and other custom architectures. Its successor, KNL, is just being released right now (mid 2016) and should do very nicely in that space too. Remember - KNC is literally the same chip as LRB2. It has texture samplers and a video out port sitting on the die. They don't test them or turn them on or expose them to software, but they're still there - it's still a graphics-capable part.<br><br>So how did we do on those original goals? Did we fail? Let's review:<br><br><ul><ul><li> 1. Make the most powerful flops-per-watt machine.</ul></ul><br><strong>SUCCESS!</strong> Fastest supercomputer in the world, and powers a whole bunch of the others in the top 10. Big win, covered a very vulnerable market for Intel, made a lot of money and good press.<br><br><ul><ul><li> 2. Make it from x86 cores.</ul></ul><br><strong>SUCCESS!</strong> The only compromise to full x86 compatibility was KNF/KNC didn't have SSE because it would have been too much work to build &amp; validate those units (remember we started with the original Pentium chip). KNL adds SSE legacy instructions back in, and so really truly is a proper x86 core. In fact it's so x86 that x86 grew to include it - the new AVX512 instruction set is Larrabee's instruction set with some encoding changes and a few tweaks.<br><br><ul><ul><li> 3. Make it soon. That means keeping it simple.</ul></ul><br><strong>NOT BAD.</strong> It's not quite as simple as slapping a bunch of Pentiums on a chip of course, but it wasn't infeasibly complex either. We did slip a year for various reasons, and then KNF's performance was badly hurt by a bunch of bugs, but these things happen. KNC was almost on time and turned out great.<br><br><ul><ul><li> 4. Support the emerging GPGPU market. As a bonus, run normal graphics well.</ul></ul><br>PRIMARY GOAL: <strong>VIRTUAL SUCCESS!</strong> It would have been a real success if it had ever shipped. Larrabee ran Compute Shaders and OpenCL very well - in many cases better (in flops/watt) than rival GPUs, and because it ran the other graphical bits of DirectX and OpenGL pretty well, if you were using graphics APIs mainly for compute, it was a compelling package. Unfortunately when the "we don't do graphics anymore" orders came down from on high, all that got thrown in the trash with the rest. It did also kickstart the development of a host of GPGPU-like programming models such as ISPC and CILK Plus, and those survive and are doing well.<br><br>BONUS GOAL: <strong>close, but no cigar.</strong> I'll talk about this more below.<br><br><ul><ul><li> 5. Add as little graphics-specific hardware as you can get away with.</ul></ul><br><strong>MODERATE SUCCESS:</strong> The only dedicated graphics hardware was the texture units (and we took them almost totally from Gen, so we didn't have to reinvent that wheel). Eyeballing die photos, they took up about 10% of the area, which certainly isn't small, but isn't crazy-huge either. When they're not being used they power down, so they're not a power drain unless you're using them, in which case of course they're massively better than doing texture sampling with a core. They were such a small part that nobody bothered to make a new version of KNC without them - they still sit there today, visible on the die photograph as 8 things that look like cores but are slightly thinner. Truth be told, if KNC had been a properly graphics-focused part we would have had 16 of the things, but it wasn't so we had to make do with 8.<br><br><br>In total I make that three wins, one acceptable, and a loss. By that score Larrabee hardly "failed". We made Intel a bunch of money, we're very much one of the top dogs in the HPC and supercomputer market, and the "big cores" have adopted our instruction set.<br><br><br>So let's talk about the elephant in the room - graphics. Yes, at that we did fail. And we failed mainly for reasons of time and politics. And even then we didn't fail by nearly as much as people think. Because we were never allowed to ship it, people just saw a giant crater, but in fact Larrabee did run graphics, and it ran it surprisingly well. Larrabee emulated a fully DirectX11 and OpenGL4.x compliant graphics card - by which I mean it was a PCIe card, you plugged it into your machine, you plugged the monitor into the back, you installed the standard Windows driver, and... it was a graphics card. There was no other graphics cards in the system. It had the full DX11 feature set, and there were over 300 titles running perfectly - you download the game from Steam and they Just Work - they totally think it's a graphics card! But it's still actually running FreeBSD on that card, and under FreeBSD it's just running an x86 program called DirectXGfx (248 threads of it). And it shares a file system with the host and you can telnet into it and give it other work to do and steal cores from your own graphics system - it was mind-bending! And because it was software, it could evolve - Larrabee was the first fully DirectX11-compatible card Intel had, because unlike Gen we didn't have to make a new chip when Microsoft released a new spec. It was also the fastest graphics card Intel had - possibly still is. Of course that's a totally unfair comparison because Gen (the integrated Intel gfx processor) has far less power and area budget. But that should still tell you that Larrabee ran graphics at perfectly respectable speeds. I got very good at ~Dirt3 on Larrabee.<br><br>Of course, this was just the very first properly working chip (KNF had all sorts of problems, so KNC was the first shippable one) and the software was very young. No, it wasn't competitive with the fastest GPUs on the market at the time, unless you chose the workload very carefully (it was excellent at running Compute Shaders). If we'd had more time to tune the software, it would have got a lot closer. And the next rev of the chip would have closed the gap further. It would have been a very strong chip in the high-end visualization world, where tiny triangles, super-short lines and massive data sets are the main workloads - all things Larrabee was great at. But we never got the time or the political will to get there, and so the graphics side was very publicly cancelled. And then a year later it was very publicly cancelled again because they hadn't actually done it the first time - people kept working on it. And then a third time in secret a bit later, because they didn't want anybody to know people were <strong>still</strong> working on graphics on LRB.<br><br>So - am I sad Larrabee as a graphics device failed? Well, yes and no.<br><br>I have always been a graphics programmer. The whole "CPU architect" thing was a total accident along the way. As such, I am sad that we didn't get to show what KNC could do as a really amazing emulation of a GPU. But I am still hugely proud of what the team managed to do with KNC given the brief of first and foremost being a real highly-coherent legacy-compatible CPU running a grown-up OS.<br><br>Do I think we could have done more graphics with KNC? In terms of hardware, honestly not really. There's nothing I sit here and think "if only we'd done X, it all would have been saved". KNC was a hell of a chip - still is - I don't see how we could have squeezed much more out of the time and effort budgets we had - we already had some features that were kicked in the arse until they squeezed in under the wire (thanks George!). Having 16 texture samplers instead of just 8 would have helped, but probably not enough to prevent us getting cancelled. We could certainly have done with another year of tuning the software. We could have also done with a single longer-term software effort, rather than 4-5 different short-term ones that the random whims of upper management forced upon us (that's a whole long story all by itself). I could also wish for a graphics-capable version of KNL (i.e. add the texture units back in), but honestly just imagine what people could have done in the five years since KNC shipped if they had allowed normal people to access the existing texture units, and write their own graphics pipelines - it would have been amazing! So my biggest regret is that we were forbidden from exposing the goodness that already existed - that's the thing that really annoys me about the whole process.<br><br>Even then, it's hard for me to be too morose when so many of my concepts, instructions and architecture features are now part of the broader x86 ecosystem in the form of AVX512. I'm not sure any other single person has added so many instructions to the most popular instruction set in the world. It's a perfectly adequate legacy for an old poly-pusher! And now I'm doing that VR thing instead. Maybe it all worked out for the best.</div>
<div class=tagClear></div>
</div><div class=tiddler id=tiddlerThe_sRGB_learning_curve refresh=tiddler tags="Blog Coding Rendering VideoCards Alphablending Oculus" tiddler="The sRGB learning curve" template=ViewTemplate>
<div class=toolbar role=navigation><a href=https://tomforsyth1000.github.io/blog.wiki.html title="Close this tiddler" class="button command_closeTiddler" commandname=closeTiddler tiddler="The sRGB learning curve">close</a><a href=https://tomforsyth1000.github.io/blog.wiki.html title="Close all other tiddlers" class="button command_closeOthers" commandname=closeOthers tiddler="The sRGB learning curve">close others</a><a href=https://tomforsyth1000.github.io/blog.wiki.html title="View the source of this tiddler" class="button command_editTiddler defaultCommand" commandname=editTiddler tiddler="The sRGB learning curve">view</a><a href=https://tomforsyth1000.github.io/blog.wiki.html title="Show additional commands" class="button moreCommand">more</a><span class=moreCommand style=display:none></span></div>
<div class=title>The sRGB learning curve</div>
<div class=subtitle><span><a href=https://tomforsyth1000.github.io/blog.wiki.html title="TomForsyth - TomForsyth, 2006/4/12 上午11:10:00" class="tiddlyLink tiddlyLinkExisting" refresh=link tiddlylink=TomForsyth>TomForsyth</a></span>, <span>1 December 2015</span> (<span>created</span> <span>1 December 2015</span>)</div>
<div class="tagging sf-hidden"></div>
<div class=tagged><ul><li class=listTitle>tags: <li><a href=https://tomforsyth1000.github.io/blog.wiki.html title="Show tiddlers tagged with 'Blog'" class=button tag=Blog tiddler="The sRGB learning curve">Blog</a></li> <li><a href=https://tomforsyth1000.github.io/blog.wiki.html title="Show tiddlers tagged with 'Coding'" class=button tag=Coding tiddler="The sRGB learning curve">Coding</a></li> <li><a href=https://tomforsyth1000.github.io/blog.wiki.html title="Show tiddlers tagged with 'Rendering'" class=button tag=Rendering tiddler="The sRGB learning curve">Rendering</a></li> <li><a href=https://tomforsyth1000.github.io/blog.wiki.html title="Show tiddlers tagged with 'VideoCards'" class=button tag=VideoCards tiddler="The sRGB learning curve">VideoCards</a></li> <li><a href=https://tomforsyth1000.github.io/blog.wiki.html title="Show tiddlers tagged with 'Alphablending'" class=button tag=Alphablending tiddler="The sRGB learning curve">Alphablending</a></li> <li><a href=https://tomforsyth1000.github.io/blog.wiki.html title="Show tiddlers tagged with 'Oculus'" class=button tag=Oculus tiddler="The sRGB learning curve">Oculus</a></ul></div>
<div class=viewer>(this is also posted on <a class=externalLink href=https://gamedevdaily.io/ title="External link to https://gamedevdaily.io/" target=_blank>GameDevDaily</a>)<br><br>Gamma encoding is a way to efficiently use the limited number of bits available in displays and buffers. For most monitors and image formats, we have 8 bits per channel. The naive way to distribute them would be to encode physical intensity (i.e. number-of-photons-per-second) linearly. However, the human eye responds to photons in a more logarithmic way, so a linear distribution gives too many shades in the brighter areas and not enough shades in the darker ones, causing visible banding.<br><br>If instead the 256 values are distributed according to a power law - typically somewhere in the range 2.0-2.5 - so that there are more shades assigned to darker areas than bright ones - the perceived intensity changes are more evenly distributed.<br><br>As it happens, this power law is closely matched to how the electron gun of a CRT responds to signals. This happy match between the CRT's mechanics and the eye's response made everyone very happy. The hardware was simple, and the distribution of precision matched human perception well. That reasoning has vanished now, but the legacy remains, and as legacies go it's actually a pretty good one.<br><br><strong>Gamma 2.2</strong><br><br>The simplest and most common form of power law suitable for encoding is gamma 2.2. That is, the relationship between photon count and encoding value (if they are both mapped to the 0-1 range) is:<br><br>photons = power(encoding, 2.2)<br>encoding = power(photons, 1/2.2)<br><br>It is really easy to get these switched around when doing conversions - I do it all the time. The way to help think about it is - what happens to the encoded value 0.5? We know that we want to give more encoding space to darker shades, so an encoded value of 0.5 should produce significantly fewer photons than half the full amount. And to check using the first equation: power(0.5, 2.2) = 0.22, which is indeed a lot less than half.<br><br>Going the other way, a photon count of half the maximum appears a lot brighter than half, so we want the encoding of that 0.5 to be high on the scale. And indeed using the second equation: power(0.5,1/2.2) = 0.73.<br><br>This has the (I think) counter-intuitive result that to go FROM linear TO gamma, you actually use the INVERSE of the "gamma power". So shouldn't it really be called "gamma 0.45" rather than "gamma 2.2"? Well, whatever, the convention is established, and we need to deal with it.<br><br>2.2 is certainly not the only sensible gamma value. People tune their monitors to all sorts of different gamma curves for various reasons. Apple Macs used 1.8 before 2009, and photographic film can follow all sorts of curves, many of them not simple power equations. However, the world has slowly settled towards something around 2.2 as a reasonable standard, but with a little twist.<br><br><strong>What is sRGB?</strong><br><br>sRGB is a slight tweaking of the simple gamma 2.2 curve. If you plot them both on a graph, they look almost identical. The formal equation for sRGB is:<br><br><pre>float D3DX_FLOAT_to_SRGB(float val)
{ 
    if( val &lt; 0.0031308f )
        val *= 12.92f;
    else
        val = 1.055f * pow(val,1.0f/2.4f) - 0.055f;
    return val;
}
</pre><br>(this code is taken from the DirectX utility file D3DX_DXGIFormatConvert.inl which used to be part of the DirectX SDK, but is now somewhat in limbo. But it should be in every DX coder's toolbox, so just search for it and download it!)<br><br>As you can see, at very low values, sRGB is linear, and at higher values it follows a pow(2.4) curve. However, the overall shape most closely follows a pow(2.2) curve. The reason for the complexity is that a simple power curve has a gradient of zero at the input/output value zero. This is undesirable for a variety of analytical reasons, and so sRGB uses a linear relationship to approach zero.<br><br>(the broader sRGB standard also has a bunch of gamut and colour-transform specifications, but we'll ignore those and just focus on the gamma-curve part for now, since that is what concerns us for graphics rendering)<br><br><strong>How different is sRGB from gamma 2.2</strong><br><br>It is very tempting to ignore the two-part nature of sRGB and just use pow(2.2) as an approximation. When drawn on a graph, they really are very very close - here you can just about see the dotted red line of gamma 2.2. peeping out from behind the solid blue sRGB line:<br><br><img src="data:image/png;base64,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"><br><br>However, when actually used to display images, the differences are apparent, especially around the darker regions, and your artists will not be happy if you display one format as the other! Here is an image of several colour ramps from a Shadertoy (<a class=externalLink href=https://www.shadertoy.com/view/lsd3zN title="External link to https://www.shadertoy.com/view/lsd3zN" target=_blank>https://www.shadertoy.com/view/lsd3zN</a>) used to illustrate the precision of linear, sRGB, and gamma 2.2. Note this is simulating 6 bits per channel to highlight the precision differences. The three bars for each colour ramp are linear on the left, sRGB in the middle, and gamma 2.2 on the right. As you can see, although gamma 2.2 and sRGB are similar, they are certainly not the same.<br><br><img src=data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAy4AAAHMCAIAAAC8wmtcAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAAJcEhZcwAADsMAAA7DAcdvqGQAAIn+SURBVHhe7f1dqGx7faYN10GgPdgH+2CDgiJiKyrsgw0qBgxRJIQtKOyAoAcKgoJKRG092G8/CpEkJJKECBEM2NgtEWw00oIhMRjSRt1rzVnfVbNmfcyPtXZIN0lIN92h0/QHoen3rvG/Xfye++/J+7J7r3U9T11cFGOOMWrUmLN+e81rV9WsGl1cXKzX6+3AcrmcDGjNfr/Xl5eXl9phNpuNBzabzWq10hot6FLMB3RdXUVfauH8/Hw6nerLto8u23G0sNvtdFihZV2rbT0cDtq5HVZ7aqt2E/pysVgM57VthxJtN13qVrSgnXVdHUpnqH1Eu13dnK7VDqKFq5+g9To3rdH6O3fuHA89nLnOQQvtCNqnnaFupe2gNdpB59aWtV5f6uA3NzftbHU07a9z0Flph3v37umY+lIndn19re9CK7WDrq6frU5A+2u9rtu+bDfavhEt64DaU7eiW9R1tbJ911rWzjqs9tSX2tp+ztpfy7p3tKyr65jaqmWt1Pnoug+Wddmuq/Nvx3/++ed1WzpCPbjOTcdpP9X2E/7Rj36kq7Rz0xrdlg7Sfiy61G661Ka7d++2o+m67Ry03A6rL3V1HVkLut22m5ZFmysdQdfSprOzM11Fyzqavpd2nlqpPduRddlORit1LR1Klzqy0M7aQZvaN9jmp94p2tpuWmu0g05Mt96+Td2bumK7ufbT0J5ao+V202I43+MdoZ31pfZsP592WF1Xy+0baTet3dp/Te1kdMI6oK6ifXScBzcndBra2q7ebr3dnM5Nx2lH0/7th3n//n1dRTtoZx1fm7Re19V6HUffezsZ7dn20S1qTfvRaTet18/2wXV1K7q6riW0rJ11XS1oh3bm7SC6da0U+jlr/XPPPdfOv11LZ9i+r3ZDWtC1tPLBt9/WaGf9Z6j9tVv70elSX2oH0U5Ga3SG7fi617RGpyfaDu0m2vm0NVrQzm2hfSO6IaEr6jj6z1yX+nHpZHRiunXtpgWt0Q46Pa2/vb3Vynaeunr771oH1M661Eodtn1TD05ey0LLurrQddv6dlZa1lXa7WqNjt++qTZsDzbpmNpZC0IrtVWH0pm3g+iYWtD5aEFH1qm267bd2kF0P7bvRVu1oMt2NM28zkG064q2j9AanYy+bOffzko8OHMtDFc9/dt++rf99G/7/9l/2/93YaRt2kPoOu3HpENov3YgHbH9uHWr2lO31L6H4SaO/5Roa9tfaFlo5fCt7bReO7eT01UenLSW23ot6LA6jr7U1bVJ131wWN1oOxktiHZ1HVY7N7SsI+uOaTch2jG1pw6i9W0fLetoWqmbaKfaLvVfrxZ0lTZzutT9rZVao61ao0v9ENt129V1KKFNOqw2aUE3105JZ9jGTl/qUl+2s9X+umK7rlbq+23761a0gyZSt9uOpi/Fg/Nva3TFdgJa3344Wqkv2z2qlTpO21lf6lC6CX2pPdv5tCvqPNu56Wi6FMNNrTRM2iS03H7U7TzbD0RoWT8THVlbten4Q//Jj10LutSh2m66ofYdaWf9DLWPrvLg1rXcplbrh9s/fo9a1p66rq7VTlu3pT11qhpcrdRVtKz/2NqX2qQflxa0p25L//lpof1wdBydj1bqUod6cGI6ghba8duZtxvS96KFdpJC+2il9hfarX2pHfRDbr+kdQL6mWihXbH95HV17abT0LXaVOtMdIs6jfZttm+/XWq9jty+qXYordeXOpSurmPq29RBdEBt0mW7lm5OW7W/1ujqutSZ6OBa2f5l1IL2Ebq6jqY1+nZ0zu0EtH+7OS3oUsfUDu0n1o6vndsPQddtV9HyD37wA52Jjtlmpp2MrqiVuhXtpp21rJvWVq3X99t+bz04VR1EC7ohfV9a0FbtpoNovRa0my61sh1f6Gja2g7YjqCbaEfTVXQmWm4LQsdsh9I+2kHX1e8SrddyO08Ng1bq1nV87aZjaqXQmesk25G1f7tFLWgHLWi9xk9f6lq6uhbaVXSpA7YdtFILWqNLXV1r2jfbjtnQTRy/peHnpuPoaLoL2v2rSx1Blzo3bW0/eS1oBx2h3ZZo30g7Pa3Ugg6iw2pPLesI2r9dUYfSj/HBbWk2dBV9qd10qX20cjip07/tp3/bjzenq7cfiNDy6d92fflw/213hQ2MdAXtrf+N0IG0kzZrJ30Puo4O1w6tlTqJ9k9V+060Set1Wtqk8xBaryPoaFrQT1lH0M7ttNqCjqCVuqJ21qF0qavrx6GtDe2pn3tb1lZ9qQPqaLpuO46uq5vWGm3V8vEnPcyBtupSN6orakEr289UX2pZP4h2PjpVHV/fka6uSW1btX/7FnQVHafdtNa0H4XQDbU7RpdCa7SD0HX1Q9NWfV9aqf11de1wPNef3En6sh1fl9qzXbdNlb5sy9pNp6fjizYfD46ss20/6ra/1ou2Wzs9Levb1NV1qe+ojXvbs12xnbC2Cn2pZe3WrqXl9uPSQtu5HVCX7bR1WJ2bzke3rj11i+3MtbMutZu2akFX0db2X7jW6Ka1Z/sNoQX98LVeaB9dsR1f19LWB2eolUJXbAds++u6QuegM9F/Le2GtI+WtZuW22TqCPpp6ODtsELX0jG1oOPrutqkH4tW6kx0FX0LWtZKbdLV9XNo3047YR2/fSM6rL5s/xHev3+//cC1STu3q+gIukr77rSPDqt92tlqz3YyOskf//jH7ZS0rH10XS3rbtVuugn9bLVGO7RbbPeatmpZK3XYdl3dVjuatgr9A9EWdD7a1E5MC+3n0K774NvRSu3fjqM1+snoUv/qtWvpS12lHUqnpPXKmgdn2HbQlz/84Q+1j36MWqPj60x0rXZdHVwr9Y3rR6H12llX1M3pdrWnNum71nX1c2gj95d/+Ze6bN+L9mk/Pe2vS+2vm9Bl+9dZ19VVdDTto2+k/aB0rQffo356Oo4OopvQaehSu+mstE/7FnRb7SC61PG1sh1HCzqIrttuVMfXVXRD2qQvtbKdnr7UwfWttT21m/6rVKfq9HQEfamD6FI3JHTrOiV9qct2c1oQ2kebdAQt6IBtBy20Y+pWdIvt5vQD1Bqdf/vRtX8htdzOSmeuHbSb9tEBdZx21+i6Oh+dpFY2dC3to/W6lq6rq5z+bW8/t3bTWtN+FEI3pPPUjepSaI12ELru6d92Legq2qqfalujm9ae7d8WLeiHr/VC++iK7fi6lrY+OEOtFLpiO2DbX9cVOgedyf/L/213hQ2M9L21u0HooLpCu3mdnK6mw+kHpNPSJp2QFnTQdhTdpBZ03tpHl0JfPjhR7aZLfQNaELpiOwndnG5CV9dNiPbdaqV+pjpR7aAvdah2VrrUDm2ftkmH0pft+9eljtm+bGerrbqudtNWXWpNO2edhpbbtdoR2m5aaCepS30X2qT99Qup3ZzWaAehE9albkJoQddtX7ab0J665/Rl++50qZXapJtrB9T3pf3bubWra1lbtSx0cKGr6zx1Lf0c2s9Th9Jx2g9QX7Yz1NF0fO2v9Vqp/6q1rE1C63U0Hbb9qLVVa7Reez733HNao9PQ5GkHrdGm9ptMt6hLrdTBhdbrilrQ/jqa7gJtalu1SaekrW2ytUZb27JuUfu0H0jbXwvtZ9X+S9PRdCu6bP+RtPPU96U1Ok7bsx2k3YROtf2ItKx92rdwHJef/M+ZtupaWq/D6rpC69uN6geiK7ah14+rHUfnoPVao/XPP/+81gjtrwPqlNr30s6zHe3BD19pok1ao0Nppa6u76hdt/0odKnddKkz0aX21C22GxW60fZv6IM7TkfTSbafvHbQd61NutQ56Mt2ArqhtlW7aZMOq4Poutqn3a7Oqt0d2lkL2lNn0tbo9LSn7mjtpm9Nl1rZfixa1j5CaaVT0jF1NN2ElnW72ln7aGehU2qb9K21/7nXN65b0UI9Q92orqUddKk12qRbbz8u7dxuS3fcX/zFX2irTqn9kLVJX+pktJuGUMdp++t8tFWH0q233GzfbztD7a9bb1fUtbSzrvXgTtFNa1mb2nL7abRz0xF0qDYq2tTOs52edtBKHUeX2k1H0LKO0H4yQiesc2jfYLuKrqvldmdp//bN6uq6aW3SVfSlbkIL2k3oKlrW/joHof9g249Ud6uupR+XlrWgQwltav+p6rDt56Or61paI/RD0Brdrg6rL3UtXerIQgta3/ZpP6t28jqT9jMX2l+Hauvb/agr6gTamejWtaDras92E1rQcbSPLoW+bOejnbWbLnW2w62d/m0//dt++rf9/89/211hAyOtbfeE9tCC9tZ1dMPtKO2/ybZeV9ZK3aR2FlrQVqEFHUQnod10EKHvSss6iI4gtEZX1H8G2rMdXPu389Oy0A46oI6vn4Uu23HaN9buG+3ZrttOQ1fRTegqutQacTzF4SR1xXZM3W47seFkj79d9GN98HNsK9s5a2ddUcs6vq6i42tPfV/aQefQ9tRuuq52ENpfu2mN7i0dSuuHGzzeYdra1uiKOsiDORDapPXaR7elTTpP7akb1bKuq920Q/tBaYd2u7qWjtCuop11qZXara3U0bRDO77W6FJHa9++Tq9t1dHaMbWyLev70nrNkC51KKE9H/xkdJy2g2jfkRa0XpftZ6Vz0HethXZMoenXVXQEnZuO325X94uupT11BG3VreiU2v66Ce2m4+hSV2lb9WU7SLst7dZORpftum1ru5aOqX+n2g1pT+2ghXbT2qEt68hCR9DWdjQdQVu1j9bre2n3oNboB6gDCq1vy7qhdobtCELfo8ZJw6mV2kFrtIMOqPU6uMpGV9SXorWFdm63qFvRpvYNtp+wfjLaQTehK+pQ2lPrdXk8g+FnpfW6ivbR6WlNO2Gt1I1quR1N375uSMfUeu2pb0dH1pda0P2i3XRd7alb0bW00L5THUc7C+2sTbp3dKg2Fe1b1tGE9hS6af0Hq0PphLWn1mhZV2wzpvPUshb0M9Fh26Had6cjaEHoRnUVHVnXbQ+GtWu1W9FZ6VBaaOfTxkP/o6l9NJy6dR2wbWq0k28/N92cTrt9a1rfvjuhgNOXbU+dmA6lE9BuOriOdrzV4eZ0rbagPXUoHVxHa1fUofTlg1vX1nYTOriuooX2H44OqCPr56N/zXVKuvvaQLb7SFt10+0HomvpUodqBzyewfATbpu0s66rI7TT0+3qUj8WfSm0my4fnJK+1HL7UlfULerm2pF1Ld1o+07bf5haqQXtqf112tpNC+2A2qpNul2d5HC843odXyt19eNP4fRv++nf9oHTv+3/p/9td4UNHFNMp9W+cx1UCzqb9sP9sz/7s29961vf//73/+Zv/uZ/cfjHEw+bUcf4f+H98j+y/X2+Pf/re8/S/cfPvhHuU3Q9TIXvabLgfnb0jycflv+fl97/v97+J5/4xCe+/e1vK21VWfrflRaIrZu1IFxhAyPVmfbTTrocMnHaIvGb3/ymAtN1g8I5cOLh4X/PCpE1RKNscEbWEO2JrCHalQ3OLBucHqZCZA3RiIOTL74apJe//OWf/OQn1WEqq/nwaN9kMrk3/MnnarVyhQ2MtE2Z9sMBFZiuoC+/+93vumuAOAdOPDzaP2eVyBqiUTY4I2uI9kTWEO3KBmeWDU4PUyGyhmhkwckXXw/TaPTWt761PR42+8kfb+pSNeYKGxhdX1+3JyjVaNp2dXX1zW9+01HDxDlw4uHhASxE1hCNssEZWUO0J7KGaFc2OLNscHqYCpE1RCMLTr74epgG/tk/+2ebn7zeTqGl6MonKNvLwtRoutTmP/3TP/37v/97Rw0T58CJh4enrxBZQzTKBmdkDdGeyBqiXdngzLLB6WEqRNYQjSw4+eLrYRr4J//kn/zRH/3RdPizALXW1fD2h66wgZEybXiB//FPV/b7/be+9S0XDRbnwImHh6evcPa/8P7eP7L9Et+eyBqiXdngzLLB6WEqRNYQjSw4+eLrYfoJH//4x9vfGre/tZxMJq6wgePL9lVj2qCF7Xb7p3/6py4aLM6BEw8Pj14hsoZolA3OyBqiPZE1RLuywZllg9PDVIisIRpZcPLF18P0E55++ml1mHLr8idvK+MKG/AHH10P72q4HvCvUyz//cTDxqNXOPtHvL/339l+iW/PPypl4P73z74R7lN0PUyF72my4H529N9PPlw9TD/hn/7Tf6oUU27pUim22+1cYQPHv6DcD28lNzxLuXTOkHEOnHh4ePQKkTVEo2xwRtYQ7YmsIdqVDc4sG5wepkJkDdHIgpMvvh6mgjpMBaYUE4ouV9jA8VGxyfBhI9ppOp06Z8g4B048PDx3hcgaolE2OCNriPZE1hDtygZnlg1OD1MhsoZoZMHJF18PU0H5dfGTzxPL9xVTgW2Gj2lrL9t3zpBxDpx4eHjuCpE1RKNscEbWEO2JrCHalQ3OLBucHqZCZA3RyIKTL74epsJ8QCl2e3t7Hp9BuRw+vVKo125ubpwzZJwDJx4enrtCZA3RKBuckTVEeyJriHZlgzPLBqeHqRBZQzSy4OSLr4epoNxSh10OnzCZKaZVQim2Hj7A1TlDxjlw4uHhuStE1hCNssEZWUO0J7KGaFc2OLNscHqYCpE1RCMLTr74epgK6rDVanV1daUmm8fHgWvbbvgYfAWZtjlnyDgHTjw8PHeFyBqiUTY4I2uI9kTWEO3KBmeWDU4PUyGyhmhkwckXXw9TQR12OBzW6/V4PNalK2xgtB9QjV0M7wD7P/n8w4mHjeeucPY/8f7eP7D9Et+e//nHz9L9h2ffCPcpuh6mwh9rsuA+O/qHkw9XD1NhMplst1vl1t27d/Nl+w+empxOp1pwzpBxDpx4eHjuCpE1RKNscEbWEO2JrCHalQ3OLBucHqZCZA3RyIKTL74epoJSTJWl6Do/P89HxfT1fD5XoF1eXp5S7MQLgueu8Nz/xPu7/8D2i3x7ImuIdmWDM8sGp4epEFlDNLLg5Iuvh6mwWCzUYe2Rr9ls5gobOL6kXxEm2nOUzhkyzoETDw/PXSGyhmiUDc7IGqI9kTVEu7LBmWWD08NUiKwhGllw8sXXw1RYD1xdXbVnKl1hA8dtq9VKl8o0ZZlzhoxz4MTDw3NXiKwhGmWDM7KGaE9kDdGubHBm2eD0MBUia4hGFpx88fUwFTYD8/lcxbWLDz5Sh43HY12qw06Pip14QfDcFSJriEbZ4IysIdoTWUO0KxucWTY4PUyFyBqikQUnX3w9TIX2DOTZ2dl+v1duucIGRu15SW3W5eFwcM6QcQ6ceHh47gqRNUSjbHBG1hDtiawh2pUNziwbnB6mQmQN0ciCky++HqbCavgU8PYOYplim81GHdY+g1Kl9j/4/OcTDxvPXeG5/4H3d/8z2y/y7fkff/ws3f/87BvhPkXXw1T4Y00W3GdH//nkw9XDVGgv218ul9vtVkHmChs4Ztp6vdYe9+/f17Jzhoxz4MTDw3NXiKwhGmWDM7KGaE9kDdGubHBm2eD0MBUia4hGFpx88fUwFXa7nTrs5uZmv9+fnZ25wgaOL9tXh2nD5eWlMs05Q8Y5cOLh4bkrRNYQjbLBGVlDtCeyhmhXNjizbHB6mAqRNUQjC06++HqYCqvVaj6fHw4HRVe+mYW2KcI2w8eBnx4VO/GC4LkrRNYQjbLBGVlDtCeyhmhXNjizbHB6mAqRNUQjC06++HqYCtPp9OLiQh22XC6VW66wgZE2KMJajQnnDBnnwImHh+euEFlDNMoGZ2QN0Z7IGqJd2eDMssHpYSpE1hCNLDj54uthKrS3DFN0tbfdd4UNHP+6sv1dZXujC+cMGefAiYeH564QWUM0ygZnZA3Rnsgaol3Z4MyywelhKkTWEI0sOPni62EqnJ2dtdBarVabzcYVNnBMMXXY6bViJ15APHeFyBqiUTY4I2uI9kTWEO3KBmeWDU4PUyGyhmhkwckXXw9TQRGm1lJoKbfm87krbOD4ZhbaoM3acH5+/t/4/B2c/8DHc1f40X/D+1t/x/a3/wPenv/23U/T/bvPPIX2P3zmSboepsJ3NVlwPzP6O7j/ga6HqbBYLC4uLmaz2dXVlXLLFTZwfFRsNbzVvlJMl84ZMi4aLM4ZMp67QmQN0SgbnJE1RHsia4hG2eCMrCHqYSpE1hDtygZnlg1OD1NBrdVeD6YFZZkrbOD4sn2tPTs7a+944Zwh46LB4pwh47krRNYQjbLBGVlDtCeyhmiUDc7IGqIepkJkDdGubHBm2eD0MBVms1krrul0mq8Vaw+J3blz53L4I0rnDBkXDRbnDBnPXSGyhmiUDc7IGqI9kTVEo2xwRtYQ9TAVImuIdmWDM8sGp4epoMpar9e6PBwOunSFDRzf4rU9Ndne0sI5Q8ZFg8U5Q8ZzV4isIRplgzOyhmhPZA3RKBuckTVEPUyFyBqiXdngzLLB6WEqqLJms5ku1V0X8RmUWqtVjdOjYo8CzhkynrtCZA3RKBuckTVEeyJriEbZ4IysIephKkTWEO3KBmeWDU4PU2Eymai42ov38wlKfa217S8o1WvOGTIuGizOGTKeu0JkDdEoG5yRNUR7ImuIRtngjKwh6mEqRNYQ7coGZ5YNTg9TQbmlFLu+vl6tVlpwhQ0cX7YvWqkpxf4rn7+G8zd8PHeFH/1XvL/112x/+2/w9vzX736a7l9/5im0f/OZJ+l6mArf1WTB/czor+H+DV0PU6G9Ir89R3k4HFxhA8fXimlte9xsuVw6Z8i4aLA4Z8h47gqRNUSjbHBG1hDtiawhGmWDM7KGqIepEFlDtCsbnFk2OD1Mhf1+f3t7e+/evdVqdRGvFdM2ldrZ2ZlSTL3mnCHjosHinCHjuStE1hCNssEZWUO0J7KGaJQNzsgaoh6mQmQN0a5scGbZ4PQwFQ6HgypLqLjyLyivrq7ag2ZCWeacIeOiweKcIeO5K0TWEI2ywRlZQ7QnsoZolA3OyBqiHqZCZA3RrmxwZtng9DAV2ovBdLlcLlerlSts4Pg6sslkstvt1gPOGTIuGizOGTKeu0JkDdEoG5yRNUR7ImuIRtngjKwh6mEqRNYQ7coGZ5YNTg9TQaGlFFOEzWazfFRMgaYC02V78tI5Q8ZFg8U5Q8ZzV/jBf8X7G3/N9jf/Bm9PZA3RKBuckTVEPUyFyBqiXdngzLLB6WEqKL8Wi8Vms5nP58otV9jAcdt+v2+feqQac86QcdFgcc6Q8dwVImuIRtngjKwh2hNZQzTKBmdkDVEPUyGyhmhXNjizbHB6mAo3NzfKLbXWenjPfVfYgD+fUpnW/sDyv/D5Kzj/jo/nrvCD/4L3N/6K7W/+O7w9/+U7n6b7V598Cu2/+9STdD1Mhe9osuB+cvRXaD81+nd0PUwF5dZ8Pj87O1ssFpli6rDD4aDLO3fuaLNzhoyLBotzhoznrhBZQzTKBmdkDdGeyBqiUTY4I2uIepgKkTVEo2xwRtYQ9TAVptPpbDZTaG23W0WXK2xgdP/+/YvhPfjbI2bOGTIuGizOGTKeu0JkDdEoG5yRNUR7ImuIRtngjKwh6mEqRNYQjbLBGVlD1MNUWK1WCq3lcqkO2+12rrABv1bs/PxcNSacM2RcNFicM2Q8d4XIGqJRNjgja4j2RNYQjbLBGVlD1MNUiKwhGmWDM7KGqIepoA5bDKi7lFuusIHRbDa7uLiYTqfaplhzzpBx0WBxzpDx3BUia4hG2eCMrCHaE1lDNMoGZ2QNUQ9TIbKGaJQNzsgaoh6mghJLHabi2g8v3neFDRw/Kny32ynQdKkgc86QcdFgcc6Q8dwVImuIRtngjKwh2hNZQzTKBmdkDVEPUyGyhmiUDc7IGqIepsJq+BRwRdjhcNCyK2zguO329lbbxOkvKB8FnDNkPHeFyBqiUTY4I2uI9kTWEI2ywRlZQ9TDVIisIRplgzOyhqiHqXB9fa3iury8/CkpthjecGw6nbaHx/6ez304z/Px3BV+8Pd4f+M+2998Hm/P33/n03Tvf/IptM9/6km6HqbCdzRZcD85uo/2U6Pn6XqYChcXF+2FYmotXbrCBo4pplXao739q3OGjIsGi3OGjOeuEFlDNMoGZ2QN0Z7IGqJRNjgja4h6mAqRNUSjbHBG1hD1MBWUWO2tKtqCK2zArxWbTqfasN/vnTNkXDRYnDNkPHeFyBqiUTY4I2uI9kTWEI2ywRlZQ9TDVIisIRplgzOyhqiHqaACWw5vtb/ZbPJ9xebzuVJMQabNq9XKOUPGRYPFOUPGc1f487/H+6v32f7a83h7ImuIRtngjKwh6mEqRNYQjbLBGVlD1MNUaA+G6VKou1xhA8eX7WvVzc3N1dWVNjtnyLhosDhnyHjuCpE1RKNscEbWEO2JrCEaZYMzsoaoh6kQWUM0ygZnZA1RD1OhvQysPUGZrxVTih0OB63Vwmw2c86QcdFgcc6Q8dwVImuIRtngjKwh2hNZQzTKBmdkDVEPUyGyhmiUDc7IGqIepkJ7alId1p6mdIUNjNqGH/7wh7oUzhkyLhoszhkynrtCZA3RKBuckTVEeyJriEbZ4IysIephKkTWEI2ywRlZQ9TDVFitVi20tKAac4UNjHa73fn5+WQyubq6ury8/E98ruHc8PHcFf78P+H91Wu2v3aDt+c/ffvTdK9/+Sm0Nx9/kq6HqfBtTRbcXx5do/346Iauh6mwLn8+qRpzhQ2M9vt9+5DwO3funJ2dOWfIuGiwOGfIeO4KkTVEo2xwRtYQ7YmsIRplgzOyhqiHqRBZQzTKBmdkDVEPU6G9VkwRttlstOwKGxjdu3dPq374wx+Ox2MtOGfIuGiwOGfIeO4KkTVEo2xwRtYQ7YmsIRplgzOyhqiHqRBZQzTKBmdkDVEPU2F4cvJIewcxV9jAqD07uVgslsul9nDOkHHRYHHOkPHcFSJriEbZ4IysIdoTWUM0ygZnZA1RD1MhsoZolA3OyBqiHqbCZrNRa63X65+SYuPxeLvdKsK0h3DOkHHRYHHOkPHcFSJriEbZ4IysIdoTWUM0ygZnZA1RD1MhsoZolA3OyBqiHqZCSzFdinzZvn73a5uCrL2OzDlDpgUNF+cMGc9dIbKGaJQNzsgaoj2RNUSjbHBG1hD1MBUia4hG2eCMrCHqYSoosZRb7ZX7qjFX2MDxg4/UYdPpdD6fHw4H5wwZFw0W5wwZz10hsoZolA3OyBqiPZE1RKNscEbWEPUwFSJriEbZ4IysIephKqzXa6WYguynpJg2tMfDdrvd7e3tf+SjbwTNno/nrvD9/4j3V3ZsP7/H2/Mfv/0JurtffhLt/uOvp+thKnxbkwX3l0c7tB8f7el6mArb7XY2oA5Td7nCBo4v6VeHXV1dHQ4HLThnyLhosDhnyHjuCpE1RKNscEbWEO2JrCEaZYMzsoaoh6kQWUM0ygZnZA1RD1NBiSUUYZeXlwoyV9jA8S1eFWjX19ftnfidM2Ra0HBxzpDx3BUia4hG2eCMrCHaE1lDNMoGZ2QNUQ9TIbKGaJQNzsgaoh6mQnu3ikammBrt9vZWBaAg02bnDJkWNFycM2Q8d4XIGqJRNjhr00DtiawhGmWDM7KGqIepEFlDNMoGZ2QNUQ9T4fr6er1e37lzZzqdKr1cYQPH15G1d7JonwjunCHjosHinCHjuStE1hCNssEZWUO0J7KGaJQNzsgaoh6mQmQN0SgbnJE1RD1MBbXWfD5vz1Fut1tX2MDo9vZWgXZ+fq4I0H7OGTItaLg4Z8h47gqRNUSjbHBG1hDtiawhGmWDM7KGqIepEFlDNMoGZ2QNUQ9TYTKZbDab559/XpeKLlfYwPE9x9Ro2qYOu7y8dM6QcdFgcc6Q8dwVImuIRtngjKwh2hNZQzTKBmdkDVEPUyGyhmiUDc7IGqIepoISa7vdKsjm87mWXWEDx0w7HA7avF6v9Uv07/ioKdEojul47grf/zu8v3LB9vMbvD1/981P0L34yJNoNx99PV0PU+Gbmiy4HxldoP3oaEPXw1TY7XbL5XK1WqnDrq+vXWEDxze6UIopwpRii8XCOUPGRYPFOUPGc1eIrCEaZYMzsoZoT2QN0SgbnJE1RD1MhcgaolE2OCNriHqYCoow/X68ublRk2nBFTZwfIJSNdY+FFzLzhkyLhosuhfoeO4KkTVEo2xwRtYQ7YmsIRplgzOyhqiHqRBZQzTKBmdkDVEPU2GxWOz3+8vLy1ZcrrAB/wWl1mqzks05Q6YFDRfnDBnPXSGyhmiUDc7IGqI9kTVEo2xwRtYQ9TAVImuIRtngjKwh6mEqXF9fq7LG4/Hdu3dvbm5cYQPH15Hpd6c2q8lms5lzhoyLBkurGTSeu0JkDdEoG5yRNUR7ImuIRtngjKwh6mEqRNYQjbLBGVlD1MNUOD8/nw/oF/10OnWFDRxfK6bfndqgzadHxR4FWs2g8dwVvvd3eD97AXeDtyeyhmiUDc7IGqIepkJkDdEoG5yRNUQ9TIXZbLZcLsfj8W547zBX2MDxtWLt8bDTX1A+IrSaQeO5K0TWEM2ywdmVDc6eyBqiUTY4I2uIepgKkTVEo2xwRtYQ9TAVttvtauXPN8oPPjocDu3X/+Xl5Xw+/1s+CziqZjqeu8L3/hbvZxdwl3h7/vabn6C7+MiTaJcffT1dD1Phm5osuB8ZLdB+dLSk62EqKLEUWu0PJfW73hU2cHytWEsxxZounTNkWtBwcc6Q8dwVImuIZtng7MoGZ09kDdEoG5yRNUQ9TIXIGqJRNjgja4h6mAr65ajKms1m7eVirrCB45OXor21mGLNOUPGRYOl1Qwaz10hsoZolg3Ormxw9kTWEI2ywRlZQ9TDVIisIRplgzOyhqiHqaD8as9RTiYTLbjCBo5PUAqtVaadHhV7FHDOkPHcFSJriGbZ4OzKBmdPZA3RKBuckTVEPUyFyBqiUTY4I2uIepgKl5eXs9lMKabiyhRTpq3X6/F4rCC7ublxzpBx0WBxzpDx3BUia4hm2eDsygZnT2QN0SgbnJE1RD1MhcgaolE2OCNriHqYCvrl2J6gVI0pulxhA8e/oNQGBdr9+/f3+71zhoyLBkurGTSeu0JkDdEsG5xd2eDsiawhGmWDM7KGqIepEFlDNMoGZ2QNUQ9TYb1ez+fz6XS62+3yUTF9rbX37t1Th52eoHwUcM6Q8dwVImuIZtng7MoGZ09kDdEoG5yRNUQ9TIXIGqJRNjgja4h6mAqz4QX7Nzc37Q0rXGEDx0fF2gv2V6vVxcXFX/OZwFEy0/HcFb7313g/O4E7xdvz19/4BN3Jh59EO/3w6+l6mArf0GTB/fBoAndK18NUWCwWCi112Pn5+dnZmSts4Jhp6jDt0d7uwjlDxkWDxTlDxnNXiKwhmmWDsysbnD2RNUSjbHBG1hD1MBUia4h2ZYMzywanh6mg3Lq6utrv91o4HA6usIHj51OqwLS2PYvpnCHjosHinCHjuStE1hDNssHZlQ3OnsgaolE2OCNriHqYCpE1RLuywZllg9PDVNDv991ud3l5qdxSd7nCBo6vFRPa0B4Yc86QaUHDxTlDxnNX+OO/xvvsBO4Ub09kDdEoG5yRNUQ9TIXIGqJd2eDMssHpYSpcXFwoxe7evTsbcIUNHF8rphTTZftcJOcMGRcNFucMGc9dIbKGaJYNzq5scPZE1hCNssEZWUPUw1SIrCHalQ3OLBucHqZC++PIFmRadoUNHDNtsVhcX1+3d4B1zpBpQcPFOUPGc1eIrCGaZYOzKxucPZE1RKNscEbWEPUwFSJriHZlgzPLBqeHqaDQUoSpxpbLpX5RusIGjinWnrlUownnDBkXDZZWM2g8d4XIGqJZNji7ssHZE1lDNMoGZ2QNUQ9TIbKGaFc2OLNscHqYCuowFddsNtPlarVyhQ2M9LU6TCjIxuPxv+dzF84ZH89d4Y//Pd5n78I9w9vz77/xCbp3P/wk2rMPv56uh6nwDU0W3A+P7sI9o+thKijFlsulUmwymai4XGEDTrH24v35fO6cIeOiweKcIeO5K0TWEM2ywdmVDc6eyBqiUTY4I2uIepgKkTVEu7LBmWWD08NUGI/H+v2oFNtsNqoxV9jA8Z342yv31WjCOUPGRYOl1Qwaz10hsoZolg3Ormxw9kTWEI2ywRlZQ9TDVIisIdqVDc4sG5wepsJyuVRxtcfGtOAKGxjN5/PWYQqyU4o9CjhnyHjuCpE1RLNscHZlg7MnsoZolA3OyBqiHqZCZA3RrmxwZtng9DAVZrOZCkyotfItXluBXV1dabOWnTNkXDRYnDNkPHeFyBqiWTY4u7LB2RNZQzTKBmdkDVEPUyGyhmhXNjizbHB6mArtYa/2WrHxeOwKGzi+0YUibLVaaWE6nTpnyLhosDhnyHjuCpE1RLNscHZlg7MnsoZolA3OyBqiHqZCZA3RrmxwZtng9DAVptOpCqy9cVi+Vqz9deV8Pt9sNqeX7T8KOGfIeO4KkTVEs2xwdmWDsyeyhmiUDc7IGqIepkJkDdGubHBm2eD0MBVms5k6rLWW0ssVNuB321+v19PpVDv9FZ8fwfkxH89d4bt/hfczP4L7Y7w9f/X1j9H90QffgPbHH3wNXQ9T4euaLLgfHP0I7o/pepgKl8N7uJ6dnam7MsXaS8S0x/n5uUrNOUPGRYPFOUPGc1eIrCGaZYOzKxucPZE1RKNscEbWEPUwFSJriHZlgzPLBqeHqdDeVOxi+OCjabzbviKsvbWYOkzbnDNkXDRYnDNkPHeFyBqiWTY4u7LB2RNZQzTKBmdkDVEPUyGyhmhXNjizbHB6mArb7VYdpsv2cjFX2MDxCUpFWEsxXTpnyLhosDhnyHjuCpE1RLNscHZlg7MnsoZolA3OyBqiHqZCZA3RrmxwZtng9DAVlgNnw7u8LhYLV9iAPw68veeYLp0zZFw0WJwzZDx3hcgaolk2OLuywdkTWUM0ygZnZA1RD1MhsoZoVzY4s2xwepgK7WX77anIfIJSBTafzxVk6+Hjj5wzZFw0WJwzZDx3hcgaolk2OLuywdkTWUM0ygZnZA1RD1MhsoZoVzY4s2xwepgKirD2gn2lmHLLFTZwfNm+Sq1lmoLMOUPGRYPFOUPGc1eIrCGaZYOzKxucPZE1RKNscEbWEPUwFSJriHZlgzPLBqeHqaDQ2u/3LcXyCcr2WjFFWFv4Sz7/Fs4P+HjuCt/9S7yf+bdwf4C35y+//jG6//aDb0D7gw++hq6HqfB1TRbcD47+Ldwf0PUwFVqE3blzZzKZKLdcYQPHz6BUh2lz++wj5wwZFw0W5wwZz10hsoZolg3Ormxw9kTWEI2ywRlZQ9TDVIisIdqVDc4sG5wepsJ0oL06f7/fu8IGRu15yc1mc3NzowXnDBkXDRbnDBnPXSGyhmiWDc6ubHD2RNYQjbLBGVlD1MNUiKwh2pUNziwbnB6mwna7XS6X7eVi6/XaFTZwfPJSBXZ1daXN4/HYOUPGRYPFOUPGc1eIrCGaZYOzKxucPZE1RKNscEbWEPUwFSJriHZlgzPLBqeHqaDWmg/vGnY4HNRkrrCB48v2F4tFe45SyeacIeOiweKcIeO5K0TWEM2ywdmVDc6eyBqiUTY4I2uIepgKkTVEu7LBmWWD08NUUH6ptdRhu+Gzv11hA8fXirWXko3HY+3hnCHjosHinCHjuSt85y/xfvLfsv3UD/D2RNYQjbLBGVlD1MNUiKwh2pUNziwbnB6mwuXl5XZATabocoUNjM7Pz29vb6+urrSw2WycM2RcNFicM2Q8d4XIGqJRNjgja4j2RNYQjbLBGVlD1MNUiKwh2pUNziwbnB6mQnvYSx12OBzytWLasN/vtXYymdy7d885Q8ZFg8U5Q8ZzV4isIRplgzOyhmhPZA3RKBuckTVEPUyFyBqiXdngzLLB6WEqqLWm0+l2u1WTnZ+fu8IG/PmU8/n87OxM+93n8304f8bHc1f4zn28n/w+20/9Gd6e+1/7GN3vv/8NaP/s/a+h62EqfE2TBff9o+/D/TO6HqbCYrFYr9ftbyXzCUqtnc1mKrXNZnNKsUcB5wwZz10hsoZolA3OyBqiPZE1RKNscEbWEPUwFSJriHZlgzPLBqeHqTCfzxVaCrLxeLzb7VxhA8cUU4e1pym3261zhoyLBotzhoznrhBZQzTKBmdkDdGeyBqiUTY4I2uIepgKkTVEu7LBmWWD08NUuBjeOOz8/HwymWSKtUbTWqEsc86QcdFgcc6Q8dwVImuIRtngjKwh2hNZQzTKBmdkDVEPUyGyhmhXNjizbHB6mArKrdVq1d5wfxsfB65Mm81m7flL7eecIeOiweKcIeO5K0TWEI2ywRlZQ7QnsoZolA3OyBqiHqZCZA3RrmxwZtng9DAVlgMPissVNnBMMaFS06U2O2fIuGiwOGfIeO4KkTVEo2xwRtYQ7YmsIRplgzOyhqiHqRBZQ7QrG5xZNjg9TIXz8/PxePzggTFX2MDxdWTtzSy22+3pUbFHAecMGc9dIbKGaJQNzsgaoj2RNUSjbHBG1hD1MBUia4h2ZYMzywanh6mgCFNlKbcUZJlik8nkcvjTSm3W5Q2fP4HzPT6eu8J3bvB+8k/Yfup7eHtuvvYxun/y/jeg/d77X0PXw1T4miYL7vtHfwL3e3Q9TIXlcqni0uV2u51Op66wgZG+vnfvXqsx7eGcIeOiweKcIeO5K0TWEI2ywRlZQ7QnsoZolA3OyBqiHqZCZA3RrmxwZtng9DAVlFgqrvbJRpliKjClWIu1w+HgnCHjosHinCHjuSt8+wbvL/8J249/D29PZA3RKBuckTVEPUyFyBqiXdngzLLB6WEqrNfr2WymDlssFiouV9jA8a8rd7vd3bt3tcd8PnfOkHHRYHHOkPHcFSJriEbZ4IysIdoTWUM0ygZnZA1RD1MhsoZoVzY4s2xwepgKSrGzs7PVgHLLFTZw/OCj9qCZmkw15pwh46LB4pwh47krRNYQjbLBGVlDtCeyhmiUDc7IGqIepkJkDdGubHBm2eD0MBXUWiowXSrF8jMolWmHw0Eb1GH7/d45Q8ZFg8U5Q8ZzV4isIRplgzOyhmhPZA3RKBuckTVEPUyFyBqiXdngzLLB6WEqjMfj9ieSZ2dn+ReU2+328vJS29rzl84ZMi4aLM4ZMp67QmQN0SgbnJE1RHsia4hG2eCMrCHqYSpE1hDtygZnlg1OD1NBHabcWg7v8vpT3m1/t9utVittVpBd8fkunD/i47krfPsK7y9/l+3H/whvz9VXP0b3u+97A9o/et9r6HqYCl/VZMF93+i7cP+Iroep0N7DQjWm6Lpz544rbGCkVYfDQR2mJhPOGTIuGizOGTKeu0JkDdEoG5yRNUR7ImuIRtngjKwh6mEqRNYQ7coGZ5YNTg9TYT38BaWiS0EmXGEDI3WYSq09NrbZbJwzZFw0WJwzZDx3hcgaolE2OCNriPZE1hCNssEZWUPUw1SIrCHalQ3OLBucHqbCcrlsrwc7OztTdLnCBo5PUCrF2iv3T4+KPQo4Z8h47gqRNUSjbHBG1hDtiawhGmWDM7KGqIepEFlDtCsbnFk2OD1MBVXW7e2tUmw6ne73e1fYwEiN1p65bAvOGTIuGizOGTKeu0JkDdEoG5yRNUR7ImuIRtngjKwh6mEqRNYQ7coGZ5YNTg9TYTu8d9hkMlFx5aNiyi9tbhtOj4o9CjhnyHjuCpE1RKNscEbWEO2JrCEaZYMzsoaoh6kQWUO0KxucWTY4PUyF1fDOrkLFdffuXVfYwGi/36vAdKkmO/0F5aOAc4aM564QWUM0ygZnZA3RnsgaolE2OCNriHqYCpE1RLuywZllg9PDVGivyx+Px+3DjVxhA8dHxRRoirDNZrNcLtVkdP4NnO/w8dwVvrnH+5F/w/aj38Hbs//qh+j+m/e9Fu133vcquh6mwlc1WXDfN/o3cL9D18NUUIedn59PJhM12c3NjSts4JhpSrH2FKaCzDlDxkWDxTlDxnNXiKwhGmWDM7KGaE9kDdEoG5yRNUQ9TIXIGqJd2eDMssHpYSqcnZ3duXOnRZdaxRU2cHxfsc1mczm8A2x7ppKOiwaLc4aM564QWUM0ygZnZA3RnsgaolE2OCNriHqYCpE1RLuywZllg9PDVPiLv/gLVZaKS92l6HKFDRwfMWuv57937954PHbOkHHRYGk1g8ZzV4isIRplgzOyhmhPZA3RKBuckTVEPUyFyBqiXdngzLLB6WEqKLRWq5UirL2fqyts4Jhi7Z1dteH0qNijgHOGjOeuEFlDNMoGZ2QN0Z7IGqJRNjgja4h6mAqRNUS7ssGZZYPTw1RYLpftQyZ1qVZxhQ2M2t9VqsaUaVpuNYPGRYPFOUPGc1eIrCEaZYMzsoZoT2QN0SgbnJE1RD1Mhcgaol3Z4MyywelhKiixFGFCxaVLV9jAaLFYtIKZzWaXl5dtGY2LBotzhoznrhBZQzTKBmdkDdGeyBqiUTY4I2uIepgKkTVEu7LBmWWD08NUUIotl8v2sv1Msfaa/fv377dnJ7UTnW/B+UM+nrvCN7d4P/Itth/9Q7w92698iO633vNatH/4nlfR9TAVvqLJgvue0bfg/iFdD1PhwUcetdZyhQ0ctynTbm5utG2xWLSaQeOiweKcIeO5K0TWEI2ywRlZQ7QnsoZolA3OyBqiHqZCZA3RrmxwZtng9DAV2vOSaq3ZbJbvtn9xcdHeTkxBps3OGTIuGizOGTKeu0JkDdEoG5yRNUR7ImuIRtngjKwh6mEqRNYQ7coGZ5YNTg9TQbl1eXk5Hcg3sxiPx9fX1y3ItOCcIeOiweKcIeO5K0TWEI2ywRlZQ7QnsoZolA3OyBqiHqZCZA3RrmxwZtng9DAVFovF+fm5KkUdpuhyhQ0ct2ntZqC9oIyOiwaLc4aM567wjS3eD38L7h/i7YmsIRplgzOyhqiHqRBZQ7QrG5xZNjg9TAV12Hq9PhwO7cEvV9iA31dsPuCWgeOiweKcIeO5K0TWEM2ywdmVDc6eyBqiUTY4I2uIepgKkTVEu7LBmWWD08NUUGXd3t4qusRut3OFDYyO73GxWmnDbDZrD53RcdFgcc6Q8dwVImuIZtng7MoGZ09kDdEoG5yRNUQ9TIXIGqJd2eDMssHpYSq0ZyDX67U6TMXlChs4fhz4dDqdTCa6HJ6lxPMNOP+aj+eu8I0N3g9/A+6/xtuz+cqH6H7jPa9F+6/f8yq6HqbCVzRZcN8z+gbcf03Xw1RQhF0Mz0Oen58vl0tX2MDxryu1+erq6ubmZigZPC4aLM4ZMp67QmQN0SwbnF3Z4OyJrCEaZYMzsoaoh6kQWUO0KxucWTY4PUyF9lYVd+/eVahcX1+7wgaOj4pprVJMe/w/44ExFw0W5wwZz10hsoZolg3Ormxw9kTWEI2ywRlZQ9TDVIisIdqVDc4sG5wepoIS686dO5eXl7e3t/kEZXut2NnZmTYfDgfnDBkXDRbnDBnPXSGyhmiWDc6ubHD2RNYQjbLBGVlD1MNUiKwh2pUNziwbnB6mwng8VoQptLSQT1BqlfJlt9vdv3+/PUJGx0WDxTlDxnNXiKwhmmWDsysbnD2RNUSjbHBG1hD1MBUia4h2ZYMzywanh6mw3++vrq6m02l7SwtX2MDxEbP2WrHJZPIXf/EXzhkyLhoszhkynrtCZA3RLBucXdng7ImsIRplgzOyhqiHqRBZQ7QrG5xZNjg9TAWF1mq1au/vqmVX2MAxxXa7nQrmzp07i8Wi1QwaFw0W5wwZz10hsoZolg3Ormxw9kTWEI2ywRlZQ9TDVIisIdqVDc4sG5wepsJy+HhJVYo6TDXmChs4bmtvcaENh8OhvXQMzR/A+Tofz13hGyu8H/4DuF/H27P68ofo/sEvvRbt1595FV0PU+HLmiy4vzT6A7TPjL5O18NUUG6197MQ8/ncFTZw/AvK9tlH9+7dO6XYo4BzhoznrhBZQzTLBmdXNjh7ImuIRtngjKwh6mEqRNYQjbLBGVlD1MNUGI/HirAHn/rtChsYzWYz1Zm23d7ePvfcc84ZMi4aLM4ZMp67wtdXeD/4B3C/jrcnsoZolA3OyBqiHqZCZA3RKBuckTVEPUyFq6ur7XbbHhLLv6CcTqfapkBrf13pnCHjosHinCHjuStE1hDNssHZlQ3OnsgaolE2OCNriHqYCpE1RKNscEbWEPUwFXa7nSprsVjMZrN8VExrtVmZtt/vtc05Q8ZFg8U5Q8ZzV4isIZplg7MrG5w9kTVEo2xwRtYQ9TAVImuIRtngjKwh6mEqqE9UWS208s0s1GFC2+bz+Xa7HWKGjYsGi3OGjOeuEFlDNMsGZ1c2OHsia4hG2eCMrCHqYSpE1hCNssEZWUPUw1RQn6i1JpPJ9fX1YrFwhQ0cX7YvptPpeDzWtlYzaFw0WJwzZDx3hcgaolk2OLuywdkTWUM0ygZnZA1RD1MhsoZolA3OyBqiHqaCOuzs7Ozi4kLRlSm22Wy0tj1HOZvNtJnOv4Tzr/h47gpfX+D94L+E+6/w9iy+/CG6//KXXov2Xz3zKroepsKXNVlwf2n0L9E+M/pXdD1MheVyOR6P21tV5Mv2VWDT6XQymWjD5eWlc4aMiwaLc4aM564QWUM0ywZnVzY4eyJriEbZ4IysIephKkTWEI2ywRlZQ9TDVFCf3L9/X9H14x//WN3lChs4/gWlIkzbNpvNKcUeBZwzZDx3hcgaolk2OLuywdkTWUM0ygZnZA1RD1MhsoZolA3OyBqiHqbCfr9vrwdTa+WjYtc/oX1guHOGjIsGi3OGjOeuEFlDNMsGZ1c2OHsia4hG2eCMrCHqYSpE1hCNssEZWUPUw1RQgdWXhLnCBo7btGo8Hq/Xa+3knCHjosHinCHjuStE1hDNssHZlQ3OnsgaolE2OCNriHqYCpE1RKNscEbWEPUwFdqjXe2NXpVerrCB419XzudzdVjrtVYzaFw0WJwzZDx3hcgaolk2OLuywdkTWUM0ygZnZA1RD1MhsoZolA3OyBqiHqaCKkvFdT188FGm2H5AmabL0xOUjwLOGTKeu0JkDdEsG5xd2eDsiawhGmWDM7KGqIepEFlDNMoGZ2QNUQ9TQR2mRFGHNVxhA8dMWw/v/apLbZvx+Qqcf8HHc1f42gzv+78C91/g7Zl96QN0v/LuV6P9F+96BV0PU+FLmiy47x59Be27Rv+Croep8OCN9DebTb5sv/35pDYfDodTij0KOGfIeO4KkTVEs2xwdmWDsyeyhmiUDc7IGqIepkJkDdEoG5yRNUQ9TAX1yWKxuLy81IKCzBU2cMy09mL+9qr+IWbYuGiwOGfIeO4KkTVEs2xwdmWDsyeyhmiUDc7IGqIepkJkDdEoG5yRNUQ9TAXllliv18qtm5sbV9iA/4KyvamYMs05Q8ZFg8U5Q8ZzV4isIZplg7MrG5w9kTVEo2xwRtYQ9TAVImuIRtngjKwh6mEqtDfSv76+3g24wgaOn0GpDtNaLajXnDNkXDRYnDNkPHeFyBqiWTY4u7LB2RNZQzTKBmdkDVEPUyGyhmiUDc7IGqIepsJkMlFrrVYrLez3e1fYwPEl/co01Zg4vVbsUcA5Q8ZzV4isIZplg7MrG5w9kTVEo2xwRtYQ9TAVImuIRtngjKwh6mEqtGcgp9Pp4XAYj8eusIFjirUPoFyv17p0zpBx0WBxzpDx3BUia4hm2eDsygZnT2QN0SgbnJE1RD1MhcgaolE2OCNriHqYCvv9/vLy8t69e61VXGEDIxXYfD5XkOlSyaZSo/NlOL/Px3NX+NoY7/u/DPf38faMv/QBul9+96vR/v67XkHXw1T4kiYL7rtHX0b7rtHv0/UwFbbbrSqrPex1OBxcYQOjzWbTNihilGytZtC4aLA4Z8h47gqRNUSzbHB2ZYOzJ7KGaJQNzsgaoh6mQmQN0SgbnJE1RD1Mhclk8uBhL3WXK2zg+KhYe63Y2YBzhoyLBotzhoznrhBZQzTLBmdXNjh7ImuIRtngjKwh6mEqRNYQjbLBGVlD1MNUUIftdrvD4dD+StIVNnB8VEwppkZrH3/knCHjosHinCHjuStE1hDNssHZlQ3OnsgaolE2OCNriHqYCpE1RKNscEbWEPUwFW5ubtpzlGqyxWLhChsYHT+1cbFQoLVX7jtnyLhosDhnyHjuCl8d433fl+H+Pt6eyBqiUTY4I2uIepgKkTVEo2xwRtYQ9TAVFGGz2exyeA/XTLHz83NtU4r9P+PZSeGiweKcIeO5K0TWEM2ywdmVDc6eyBqiUTY4I2uIepgKkTVEo2xwRtYQ9TAVnnvuOUXY1dXVcnivV1fYwPGvK1upadt2u3XOkHHRYHHOkPHcFSJriGbZ4OzKBmdPZA3RKBuckTVEPUyFyBqiUTY4I2uIepgKaq3nn39el4vFQrnlChs4vqRfHaZtKjVdthfvo/k9OF/i47krfPUM7/t+D+6X8PacffEDdH/vna9G+6WnX0HXw1T4oiYL7jtHv4f26dGX6HqYCu2pSV1eX1/ny/a1QatUY8q0B39HicZFg8U5Q8ZzV4isIZplg7MrG5w9kTVEo2xwRtYQ9TAVImuIvrOLG5aRNUQ9TIX2Pvt/+Zd/qRrLFNtut+v1erfbqcbcMnBcNFicM2Q8d4XIGqJZNji7ssHZE1lDNMoGZ2QNUQ9TIbKG6Du7uGEZWUPUw1RQaLUXio3H49Vq5Qob8EeFt3ceu3//vnOGjIsGi3OGjOeuEFlDNMsGZ1c2OHsia4hG2eCMrCHqYSpE1hB9Zxc3LCNriHqYCtfX1yquu3fvtjcRc4UNHN9XTBGmS/Xaer12zpBx0WBxzpDx3BUia4hm2eDsygZnT2QN0SgbnJE1RD1Mhcgaou/s4oZlZA1RD1NBrTWbzZRbh8Mhn6DU2u12u9/v1WvazzlDxkWDxTlDxnNXiKwhmmWDsysbnD2RNUSjbHBG1hD1MBUia4i+s4sblpE1RD1MhfPz8+VyeXV1pSDLFGt/Prler7Ww2+2cM2RcNFicM2Q8d4XIGqJZNji7ssHZE1lDNMoGZ2QNUQ9TIbKG6Du7uGEZWUPUw1RorxVTcanD8uPAta2hWNtsNs/x+V04X+TjuSt89Tm87/tduF/E2/PcFz9A93ff+Wq0X3z6FXQ9TIUvarLgvnP0u2ifHn2Rroep0D5ecrVataciXWEDxyco1+v1+fm5LlVjzhkyLhoszhkynrtCZA3RLBucXdng7ImsIRplgzOyhqiHqRBZQzTKBmdkDVEPU2G3202n08vLy/F4fHZ25gobOL6OTBF29+5d7SGcM2RcNFicM2Q8d4WvPIf3Pb8L94t4eyJriEbZ4IysIephKkTWEI2ywRlZQ9TDVFBrqcaUYufn5/lu+9qwGf6I8uLiYr/fO2fIuGiwOGfIeO4KkTVEs2xwdmWDsyeyhmiUDc7IGqIepkJkDdEoG5yRNUQ9TIX2h5NnZ2eKLqWXK2zg+OSl1grtoW3OGTIuGizOGTKeu0JkDdEsG5xd2eDsiawhGmWDM7KGqIepEFlDNMoGZ2QNUQ9TYbvdToc33L+8vMyX7SvCzs/PZ7OZNlxcXDhnyLhosDhnyHjuCpE1RLNscHZlg7MnsoZolA3OyBqiHqZCZA3RKBuckTVEPUyF9uzkcrnUwvX1tSts4PhGF6uB1mvOGTIuGizOGTKeu0JkDdEsG5xd2eDsiawhGmWDM7KGqIepEFlDNMoGZ2QNUQ9ToT0DqQ67vb39Ke+2Pxs+C7x99tGP+PwWnN/m47krfOVHeN/zW3B/G2/Pj37nA3R/6xdfjfa3f+EVdD1Mhd/RZMH9xdFvof2F0W/T9TAVlsvlzc3N4XC4urrKJyiVZhcXF4qwdumcIeOiweKcIeO5K0TWEM2ywdmVDc6eyBqiUTY4I2uIepgKkTVEo2xwRtYQ9TAV1GGttdRk4/HYFTYwmk6ns9lsMplst1vt55wh46LB4pwh47krRNYQzbLB2ZUNzp7IGqJRNjgja4h6mAqRNUSjbHBG1hD1MBXUYe0JShVXppgC7XJgv9/r0jlDxkWDxTlDxnNXiKwhmmWDsysbnD2RNUSjbHBG1hD1MBUia4hG2eCMrCHqYSooxdrfRy6XS126wgaOb3ShTNNasV6vnTNkXDRYnDNkPHeFyBqiWTY4u7LB2RNZQzTKBmdkDVEPUyGyhmiUDc7IGqIepoIqa7vdLhaL9vCYK2xgdHZ2Np/PL4d3udBOzhkyLhoszhkynrtCZA3RLBucXdng7ImsIRplgzOyhqiHqRBZQzTKBmdkDVEPU0GVNZlMWnEpy1xhA8eX9GutAq09NuacIeOiweKcIeO5K0TWEM2ywdmVDc6eyBqiUTY4I2uIepgKkTVEo2xwRtYQ9TAV2nOPu91uO+AKGzh+KFKLMF0qy37A5zfg/CYfz13hyz/A+0u/wfaZ38Tb84PfeS/d3/jFV6L9zV94GV0PU+F3NFlwf3H0G2h/YfSbdD1MBVVWe++w/X6vIHOFDfgl/QoyoZ2cM2RcNFicM2Q8d4XIGqJRNjgja4j2RNYQjbLBGVlD1MNUiKwhGmWDM7KGqIepsFwu5/P5+fl5e3jMFTZwfMSsbVaTbbdb5wwZFw0W5wwZz10hsoZolA3OyBqiPZE1RKNscEbWEPUwFSJriEbZ4IysIephKsxms/a3k2otXbrCBo6PmO12OwXadDpVkDlnyLhosDhnyHjuCpE1RKNscEbWEO2JrCEaZYMzsoaoh6kQWUM0ygZnZA1RD1OhPeC13+/bK/ddYQPH14pNJhN1WKsx5wwZFw0W5wwZz10hsoZolA3OyBqiPZE1RKNscEbWEPUwFSJriEbZ4IysIephKqiylsulLpVi+aiYNiwWi/aafeGcIeOiweKcIeO5K0TWEI2ywRlZQ7QnsoZolA3OyBqiHqZCZA3RKBuckTVEPUyFH//4x/v9frVataciXWEDo+12qw5rjXZ6rdijgHOGjOeuEFlDNMoGZ2QN0Z7IGqJRNjgja4h6mAqRNUSjbHBG1hD1MBUOh4MKTMV17969m5sbV9jA6Pr6WgUmlGIKsj/n86twfo2P567w5T/H+0u/yvaZX8Pb8+dfeC/dX33HK9H+2ttfRtfDVPiCJgvuO0a/ivbto1+j62Eq7HY7ddj9+/eVW3fv3nWFDYzaC8UUYe3lYs4ZMi4aLM4ZMp67QmQN0SgbnJE1RHsia4hG2eCMrCHqYSpE1hCNssEZWUPUw1RQYt27d+/OnTvn5+fL5dIVNjBaLBbarEZrj5s5Z8i4aLA4Z8h47gqRNUSjbHBG1hDtiawhGmWDM7KGqIepEFlDNMoGZ2QNUQ9TQYml1ppMJjc3N/kWr/P5fDwez2YzbVCWOWfIuGiwOGfIeO4KkTVEo2xwRtYQ7YmsIRplgzOyhqiHqRBZQzTKBmdkDVEPU2G73bb3s1CN5aNi7QnKO3fu6FLbnDNkXDRYnDNkPHeFyBqiUTY4I2uI9kTWEI2ywRlZQ9TDVIisIRplgzOyhqiHqbBYLFRZm81mPB4ryFxhA8eX9O92u/ZysYuLC+cMGRcNFucMGc9d4Ut/jvfdv8r2Xb+GtyeyhmiUDc7IGqIepkJkDdEoG5yRNUQ9TIXLy0t1mHLr9vZWxeUKGzi+/atKTYGmPXTpnCHjosHinCHjuStE1hCNssEZWUO0J7KGaJQNzsgaoh6mQmQN0SgbnJE1RD1MBaXYemA2m2WKqcC0SkF2MfB9Pr8C5/N8PHeFL30f77t/he27Po+35/tfeC/dX3nHK9F+/u0vo+thKnxBkwX3HaNfQfv20efpepgKrbLaA2OHw8EVNnDMtO12q0ttUJA5Z8i4aLA4Z8h47gqRNUSjbHBG1hDtiawhGmWDM7KGqIepEFlDNMoGZ2QNUQ9Tob1KbLlc7vd7LbvCBo4v6dfa9fABlKdHxR4FnDNkPHeFyBqiUTY4I2uI9kTWEI2ywRlZQ9TDVIisIRplgzOyhqiHqXD37l2F1vX1tTpMueUKGzi+mcVsNlOmicPh4Jwh46LB4pwh47krRNYQjbLBGVlDtCeyhmiUDc7IGqIepkJkDdEoG5yRNUQ9TIXxeHzv3r32AZTCFTZw/Djw9uTlfsA5Q8ZFg8U5Q8ZzV4isIRplgzOyhmhPZA3RKBuckTVEPUyFyBqiUTY4I2uIepgK9+/fV2vN5/PFYpFv8aoOU4Fp8+XlpbLMOUPGRYPFOUPGc1eIrCEaZYMzsoZoT2QN0SgbnJE1RD1MhcgaolE2OCNriHqYCsqt6XQ6Ho9VXLe3t66wgeObWcxms8lksl6vTy/bfxRwzpDx3BUia4hG2eCMrCHaE1lDNMoGZ2QNUQ9TIbKGaJQNzsgaoh6mwnw+Xy6Xu91OHbbf711hA8dMOz8/XywWlwPf4/PZEw8bz13hS9/D++7Psn0X357v/fp76X7251/J9udeRtfDVPh1TRbcnx99Fu3P8fUwFVar1Wbg6upKTeYKGzj+BaUaTZeHw+GUYideEDx3hcgaolE2OCNriPZE1hDNssHZlQ1OD1MhsoZolA3OyBqiHqaCEms6narDfsprxRRos9lMm1uvOWfIOAdOPDw8d4Uvfg/vOz/L9mm+PZE1RLNscHZlg9PDVIisIRplgzOyhqiHqaAUe/DIl3LLFTZw/AvK9Xo9mUza31E6Z8g4B048PDx3hcgaolE2OCNriPZE1hDNssHZlQ1OD1MhsoZolA3OyBqiHqaCcuvq6qq9metisXCFDfhDkbStPXTmnCHjHDjx8PDcFSJriEbZ4IysIdoTWUM0ywZnVzY4PUyFyBqiUTY4I2uIepgKKrB79+6puNRh+ajYbDbTWqHNwjlDxjlw4uHhuStE1hCNssEZWUO0J7KGaJYNzq5scHqYCpE1RKNscEbWEPUwFbbbrSprOXzw0UW82742tPcVm06n8/ncOUPGOXDi4eG5K0TWEI2ywRlZQ7QnsoZolg3OrmxwepgKkTVEo2xwRtYQ9TAVLi8vF4uFiksoy1xhA8eX7bdSm81muvxjPs+eeNh47gpf/GO873yW7dN8e/74199L99mffyXbn3sZXQ9T4dc1WXB/fvQs2p/j62EqjMfj9qb6y+Uyn6DUhvl8vlqtrq+vr66unDNknAMnHh6eu0JkDdEoG5yRNUR7ImuIZtng7MoGp4epEFlDNMoGZ2QNUQ9TQaHVXpcv1vEZlFq1GzgcDio15wwZ58CJh4fnrhBZQzTKBmdkDdGeyBqiWTY4u7LB6WEqRNYQjbLBGVlD1MNU2O/319fXirDFYnHv3j1X2MAxxVRqs9lMHaZL5wwZ58CJh4fnrhBZQzTKBmdkDdGeyBqiWTY4u7LB6WEqRNYQjbLBGVlD1MNUOBwOSrH2sn0tuMIGji/bn8/n7VJN5pwh4xw48fDw3BUia4hG2eCMrCHaE1lDNMsGZ1c2OD1MhcgaolE2OCNriHqYCiqwi4sL5dZ2u1WQucIGjq8Va09QatvptWInXhA8d4XIGqJRNjgja4j2RNYQzbLB2ZUNTg9TIbKGaJQNzsgaoh6mwmazORwOiq72wjBX2MDxdWRCmTaZTE5PUJ54QfDcFSJriEbZ4IysIdoTWUM0ywZnVzY4PUyFyBqiUTY4I2uIepgKyi+1lmqsvW2FK2zAKaZY0waV2nf5fObEw8ZzV/id7+L9xc+w/QW+Pd/9/DN0P/PWl7P92SfoepgKn9dkwX3r6DNof5avh6mg0FosFhcXF0qxfDMLBZoKrO2hJnPOkHEOnHh4eO4KkTVEo2xwRtYQ7YmsIZplg7MrG5wepkJkDdEoG5yRNUQ9TAUVWHtJmKJLC66wgeMjZvv9vtWY9nPOkHEOnHh4eO4KkTVEo2xwRtYQ7YmsIZplg7MrG5wepkJkDdEoG5yRNUQ9TAXlV0ux6XSaT1C2h8vu3r3bnqZ0zpBxDpx4eHjuCpE1RKNscEbWEO2JrCGaZYOzKxucHqZCZA3RKBuckTVEPUwFVdbhcFB0tbcPc4UNHJ+8FKqx7XY7mUycM2ScAyceHp67QmQN0SgbnJE1RHsia4hm2eDsyganh6kQWUM0ygZnZA1RD1NheFDsYjqdKrpUXK6wgeM2rbocPqVSmeacIeMcOPHw8NwVImuIRtngjKwh2hNZQzTLBmdXNjg9TIXIGqJRNjgja4h6mAoKLXVYiy5dusIGnGLtnceef/555wwZ58CJh4fnrhBZQzTKBmdkDdGeyBqiWTY4u7LB6WEqRNYQjbLBGVlD1MNUaA97HQ6HzWazWq1cYQPH14qdnZ21FJvNZt/h80k4n+LjuSv8znfw/uIn2f7Cp/D2fOfzz9D95FtfjvZTP/sEXQ9T4fOaLLhvHX0S7c+OPkXXw1RQh4nlcjmfz7XgChs4PiqmtQqy9Xo9Ho+dM2RcNFicM2Q8d4XIGqJRNjgja4j2RNYQjbLBGVlD1MNUiKwhGmWDM7KGqIepoAgT7bVis9nMFTZwfF+x1WqlQNvv91pwzpBx0WBxzpDx3BUia4hG2eCMrCHaE1lDNMoGZ2QNUQ9TIbKGaJQNzsgaoh6mwnq9Vodtt9vFYqEFV9jA8VExRZi2aSctO2fIuGiwOGfIeO4KkTVEo2xwRtYQ7YmsIRplgzOyhqiHqRBZQzTKBmdkDVEPU2EzfKzRavioyXxUbLfbtVeJXQ6v7XfOkHHRYHHOkPHcFSJriEbZ4IysIdoTWUM0ygZnZA1RD1MhsoZolA3OyBqiHqaCIky5tVwutaAsc4UNjBRhCjR12GL44CPnDBkXDRbnDBnPXeEL38H7jk+yffun8PZE1hCNssEZWUPUw1SIrCEaZYMzsoaoh6mg/BIP3rPCFTYwurm5UYTN53NtOL1s/1HAOUPGc1eIrCEaZYMzsoZoT2QN0SgbnJE1RD1MhcgaolE2OCNriHqYCiqw5XI5m81UXGdnZ66wgeNrxabT6WQyOT8/V6x9m88vw/k4H89d4QvfxvuOX2b79o/j7fn2556h+8tveTnaj7/pCboepsLnNFlw3zL6ZbRvGn2croepsFgs1FoKrfbwmCts4Pjk5Xg81rb2tmPOGTIuGizOGTKeu0JkDdEoG5yRNUR7ImuIRtngjKwh6mEqRNYQjbLBGVlD1MNU2O121wPn5+eZYlp1Obz963K5vLi4cM6QcdFgcc6Q8dwVImuIRtngjKwh2hNZQzTKBmdkDVEPUyGyhmiUDc7IGqIepoIqa7FY/OhHP2qPjbnCBo6ZplWr1Wq/32vZOUPGRYPFOUPGc1eIrCEaZYMzsoZoT2QN0SgbnJE1RD1MhcgaolE2OCNriHqYCuPx+Pz8XEHW3snVFTZwfM+xFmjaMJ1OnTNkXDRYnDNkPHeFyBqiUTY4I2uI9kTWEI2ywRlZQ9TDVIisIRplgzOyhqiHqdDeO0wdpgV1lytswG90sdls7t69e3Z25pwh46LB4pwh47krRNYQjbLBGVlDtCeyhmiUDc7IGqIepkJkDdEoG5yRNUQ9TIX1ej2fzxVh6q7lcukKGxhNp1OtVaNpp9MTlI8CzhkynrtCZA3RKBuckTVEeyJriEbZ4IysIephKkTWEI2ywRlZQ9TDVDg7O5vNZvv9frPZqMlcYQPHTLu8vLwYPhRcy9/k8xE4H+XjuSt84Zt43/ERtm//KN6eb37uGbofecvL0X70TU/Q9TAVPqfJgvuW0UfQvmn0UboepoJCazswnU6VW66wgeO77SvFFGvKNC04Z8i4aLA4Z8h47gqRNUSjbHBG1hDtiawhGmWDM7KGqIepEFlDNMoGZ2QNUQ9TYT983reCbLlc5qNi7U3F2h4KMucMGRcNFucMGc9dIbKGaJQNzsgaoj2RNUSjbHBG1hD1MBUia4hG2eCMrCHqYSpcXl4qtM7PzyeTiZZdYQMjpZkabbfbbQacM2RcNFicM2Q8d4Vf/yben/8I25/7KN6eyBqiUTY4I2uIepgKkTVEo2xwRtYQ9TAV2uNhQkF2OBxcYQPHFNPa9cBsNnPOkHHRYHHOkPHcFSJriEbZ4IysIdoTWUM0ygZnZA1RD1MhsoZolA3OyBqiHqaCWqvVmBaUW66wgeM2Rdh0OtUep0fFHgWcM2Q8d4XIGqJRNjgja4j2RNYQjbLBGVlD1MNUiKwhGmWDM7KGqIepMJlM2ntWiPF47AobOD552Z6aVIodDgfnDBkXDRbnDBnPXSGyhmiUDc7IGqI9kTVEo2xwRtYQ9TAVImuIRtngjKwh6mEqLJfLm5ub3W6nIMsUW6/XrcMWA9/g8+ETDxvPXeHXv4H35z/M9uf49nzj2WfofviNL2f71BN0PUyFZzVZcN84+jDap/h6mAqXl5fz+fx8YBufQakOU6O1l+0ryJwzZJwDJx4enrtCZA3RKBuckTVEeyJriGbZ4OzKBqeHqRBZQzTKBmdkDVEPU6G9DGw/fN73zc2NK2zg+Fqx9hxle8WYc4aMc+DEw8NzV4isIRplgzOyhmhPZA3RLBucXdng9DAVImuIRtngjKwh6mEqqMDUYULRpeJyhQ347V9ns5kWtJ9zhoxz4MTDw3NXiKwhGmWDM7KGaE9kDdEsG5xd2eD0MBUia4hG2eCMrCHqYSosl0uFliKsvX7fFTZwzDQFWrs8PUF54gXBc1eIrCEaZYMzsoZoT2QN0SwbnF3Z4PQwFSJriEbZ4IysIephKqxWq/aCfeXW/fv3XWEDfh3Zdrttz1E6Z8g4B048PDx3hcgaolE2OCNriPZE1hDNssHZlQ1OD1MhsoZolA3OyBqiHqaCUkzFpdxaLBb5F5TqsPZ42Gw2Wy6XzhkyzoETDw/PXSGyhmiUDc7IGqI9kTVEs2xwdmWD08NUiKwhGmWDM7KGqIepoNZSjanDJpPJnTt3XGEDx9eKabMiTJu18HU+HzzxsPHcFT7/dbxv/SDbn+Xb8/Vnn6b7wTe+lO1Tj9P1MBWe1WTBfePog2if4uthKuz3+9ls1p6g3Gw2rrABv8XrdDpdr9fb7dY5Q8Y5cOLh4bkrRNYQjbLBGVlDtCeyhmiWDc6ubHB6mAqRNUSjbHBG1hD1MBVWq9VkMmkffDSfz11hA8c3s9Aq7aFeu729dc6QcQ6ceHh47gqRNUSjbHBG1hDtiawhmmWDsysbnB6mQmQN0SgbnJE1RD1MhfaYl3Lrueeey9eKKcV2u50yrfWac4aMc+DEw8NzV4isIRplgzOyhmhPZA3RLBucXdng9DAVImuIRtngjKwh6mEqbDab9jYWWri8vHSFDRw/n/Ji+KhwpZh6zTlDxjlw4uHhuStE1hCNssEZWUO0J7KGaJYNzq5scHqYCpE1RKNscEbWEPUwFZRYirBWXEovV9jA8cnL8XisTDs/P9elc4aMc+DEw8NzV4isIRplgzOyhmhPZA3RLBucXdng9DAVImuIRtngjKwh6mEqKLdEe0nY4XBwhQ2MZgPbn3z8kXOGjHPgxMPDc1eIrCEaZYMzsoZoT2QN0SwbnF3Z4PQwFSJriEbZ4IysIephKrTHvJRb9+7dy0fFVGC73U6NdjHwNT7vP/Gw8dwVPv81vG99P9uf5dvztU8/Tff9T72U7ZOP0/UwFT6tyYL71Oj9aJ/k62EqKMXu379/fX09H3CFDRw/FGk2mynQ1GT7/d45Q8Y5cOLh4bkrRNYQjbLBGVlDtCeyhmiWDc6ubHB6mAqRNUSjbHBG1hD1MBVubm6urq7G4/GdO3e04AobOL6kf71eK8LagnOGjHPgxMPDc1eIrCEaZYMzsoZoT2QN0SwbnF3Z4PQwFSJriEbZ4IysIephKiwWi+Vy2R4SW61WrrCB4+vIttvt9fX17e3t4XBwzpBxDpx4eHjuCpE1RKNscEbWEO2JrCGaZYOzKxucHqZCZA3RKBuckTVEPUyF9qJ81dhut8uX7etrdZj2mE6ns9nMOUPGOXDi4eG5K0TWEI2ywRlZQ7QnsoZolg3OrmxwepgKkTVEo2xwRtYQ9TAVLi4u1uu1UkyX+VoxRZjWrlYrbT69bP/EC4LnrvC5r+F9y/vZvolvT2QN0SwbnF3Z4PQwFSJriEbZ4IysIephKiwWi7OzM4VWez2YK2zg+ASlNuwGLi8vnTNknAMnHh6eu0JkDdEoG5yRNUR7ImuIZtng7MoGp4epEFlDNMoGZ2QNUQ9TQYnV2G63qjFX2MDxEbO2oT1o9lU+7zvxsPHcFT73VbxveR/bN/Ht+eqnn6b7vqdeyvbJx+l6mAqf1mTBfWr0PrRP8vUwFVar1XQ63e/3kwFX2MDxLyi1WdsUZFp2zpBxDpx4eHjuCpE1RKNscEbWEO2JrCGaZYOzKxucHqZCZA3RKBuckTVEPUyFH//4x7PZrD0DqehyhQ0cHzG7urpShF1cXGibc4aMc+DEw8NzV4isIRplgzOyhmhPZA3RLBucXdng9DAVImuIRtngjKwh6mEqPHgSsj3y5Qob8Ev6F4uFLrWHc4aMc+DEw8NzV4isIRplgzOyhmhPZA3RLBucXdng9DAVImuIRtngjKwh6mEqtA47HA7qrul06gobOH5UuDa3l+2fUuzEC4LnrhBZQzTKBmdkDdGeyBqiWTY4u7LB6WEqRNYQjbLBGVlD1MNUWK1WCq3FYjGZTPJ9xfb7fXsbCzGfz50zZJwDJx4enrtCZA3RKBuckTVEeyJriGbZ4OzKBqeHqRBZQzTKBmdkDVEPU+Hy8nI2m61/8vlGrrCBkTa0Zyfbu1o4Z8g4B048PDx3hcgaolE2OCNriPZE1hDNssHZlQ1OD1MhsoZolA3OyBqiHqbC+fn51dXV4XBQcd29e9cVNnB8gnK32ynQtKA9vsLnPSceNp67wue+gvct72H7Jr49X/nE03Tf8+RL2b7+cboepsInNFlwnxy9B+3r+XqYCmqti+FVYuPxOB8Vu3///vX19b2BU4qdeEHw3BUia4hG2eCMrCHaE1lDNMsGZ1c2OD1MhcgaolE2OCNriHqYCkqsyWSiFNOCmswVNnD8C8rZbKZGE9rJOUPGOXDi4eG5K0TWEI2ywRlZQ7QnsoZolg3OrmxwepgKkTVEo2xwRtYQ9TAVVsMnTO52O9XY+fm5K2zg+OSlIkybNwPOGTLOgRMPD89d4dmv4H3je9g+xbcnsoZolg3OrmxwepgKkTVEo2xwRtYQ9TAVLob3FVNuLRYLZZkrbOD4bvvX19ftPcf2+71zhoxz4MTDw3NXiKwhGmWDM7KGaE9kDdEsG5xd2eD0MBUia4hG2eCMrCHqYSoot1RjSrHZbJZPUCrCtEqB1t5dzDlDxjlw4uHhuStE1hCNssEZWUO0J7KGaJYNzq5scHqYCpE1RKNscEbWEPUwFabT6d27d8fjsRaUZa6wgZHWrtdr1ZguT68VO/GC4LkrRNYQjbLBGVlDtCeyhmiWDc6ubHB6mAqRNUSjbHBG1hD1MBXOz89VYLe3t7vdbrlcusIGRu3ZSa1VjWmnL/P5JTjP8PHcFZ79Mt43/hLbp57B2/PlTzxN95eefCnaZ17/OF0PU+ETmiy4T45+Ce3rR8/Q9TAVLi8vVVxqrbt376q7XGEDxycoxdWAFpwzZFw0WJwzZDx3hcgaolE2OCNriPZE1hCNssEZWUPUw1SIrCEaZYMzsoaoh6mw3+/bm7uqtdRkrrCB43uOae1meItX4Zwh46LB4pwh47krRNYQjbLBGVlDtCeyhmiUDc7IGqIepkJkDdEoG5yRNUQ9TIXFYqHcunfv3nK5nEwmrrCB4xtdXPzkJf2nJygfBZwzZDx3hcgaolE2OCNriPZE1hCNssEZWUPUw1SIrCEaZYMzsoaoh6lwdXW12+0uLy/VXfmomNJMKMIUa8I5Q8ZFg8U5Q8ZzV4isIRplgzOyhmhPZA3RKBuckTVEPUyFyBqiUTY4I2uIepgK0+lUudVSbD6fu8IGjq8V2+/37S8oZ7OZc4aMiwaLc4aM564QWUM0ygZnZA3RnsgaolE2OCNriHqYCpE1RKNscEbWEPUwFRaLxW5guVwqyFxhA8e3f1WgjcdjNZr2c86QcdFgcc6Q8dwVImuIRtngjKwh2hNZQzTKBmdkDVEPUyGyhmiUDc7IGqIepoLy6+bmZr1ebwZcYQOj2Ww2nU4VZK3JvsTn3XDexcdzV/j0l/A+9W62T74Lb8+XPvY2uu9+wxNo3/Wax+h6mAof02TBfcPo3WhfM3oXXQ9TYbvdqrIUXZPJREHmChsYzedzrXrwHKVzhoyLBotzhoznrhBZQzTKBmdkDdGeyBqiUTY4I2uIepgKkTVEo2xwRtYQ9TAVVGAqrvbKfWWZK2zgmGntXV7VYdrsnCHjosHinCHjuStE1hCNssEZWUO0J7KGaJQNzsgaoh6mQmQN0SgbnJE1RD1MBVVW67Cf8hmUm81GG1qHKcicM2RcNFicM2Q8d4XIGqJRNjgja4j2RNYQjbLBGVlD1MNUiKwhGmWDM7KGqIepcHV1pdZShym38s0sVqtV2yZOrxV7FHDOkPHcFSJriEbZ4IysIdoTWUM0ygZnZA1RD1MhsoZolA3OyBqiHqZCy632qNh0OnWFDRyfoNztdm2P06NijwLOGTKeu0JkDdEoG5yRNUR7ImuIRtngjKwh6mEqRNYQjbLBGVlD1MNUWCwWirDNZjMejxVkrrCB4wcfaYMu2yv3nTNkXDRYnDNkPHeFyBqiUTY4I2uI9kTWEI2ywRlZQ9TDVIisIRplgzOyhqiHqaDEUm7d3t6uhxeNucIGjo+Ktb+dPD8/V699kc874TzNx3NX+PQX8T71TrZPPo2354sfexvdd77hCbRPv+Yxuh6mwsc0WXDfMHon2teMnqbrYSosl8v2Lq8qrtVq5QobGKnAtFY1dvfu3clk4pwh46LB4pwh47krRNYQjbLBGVlDtCeyhmiUDc7IGqIepkJkDdEoG5yRNUQ9TIXtdtteKKYFNZkrbOD4oUj7/V6x1p6gdM6QcdFgcc6Q8dwVImuIRtngjKwh2hNZQzTKBmdkDVEPUyGyhmiUDc7IGqIepsJueCeLu3fv6vKnfAZle5fXzWajBecMGRcNFucMGc9dIbKGaJQNzsgaoj2RNUSjbHBG1hD1MBUia4hG2eCMrCHqYSooxVbDB4ErtxRdrrCB44ciTadTbTs/Pz+l2KOAc4aM564QWUM0ygZnZA3RnsgaolE2OCNriHqYCpE1RKNscEbWEPUwFS6Gj5dUdGlhG++2f3Z2pg3L5VKNpmRzzpBx0WBxzpDx3BU+8UW8T6pmyL7+abw9kTVEo2xwRtYQ9TAVImuIRtngjKwh6mEqzOfz/X6/WCy0oBpzhQ0cM00pttlsVGPT6dQ5Q8ZFg8U5Q8ZzV4isIRplgzOyhmhPZA3RKBuckTVEPUyFyBqiUTY4I2uIepgKqqzb29vxeDyZTPJRMa2aDZ8TrkxTrP0On1+E8wt8PHeFT/wO3id/ke3rfwFvz+986G10f/G1T6D9hVc9RtfDVPiQJgvua0e/iPZVo1+g62EqbDabw+Gg4lKT5QcfaZUK7Pz8fDXgnCHjosHinCHjuStE1hCNssEZWUO0J7KGaJQNzsgaoh6mQmQN0SgbnJE1RD1MBSVWe8G+LrXsChvwG12097M4pdijgHOGjOeuEFlDNMoGZ2QN0Z7IGqJRNjgja4h6mAqRNUSjbHBG1hD1MBWUWAqt3W53dXU1Ho9dYQMjBdps+CBwLcznc+cMGRcNFucMGc9dIbKGaJQNzsgaoj2RNUSjbHBG1hD1MBUia4hG2eCMrCHqYSpst9v2kNh+v1duucIGRuqw6XR6fn6uWNNOzhkyLhoszhkynrtCZA3RKBuckTVEeyJriEbZ4IysIephKkTWEI2ywRlZQ9TDVFBlqcAOA+ouV9jA8S8oVWCKNaH9nDNkXDRYnDNkPHeFyBqiUTY4I2uI9kTWEI2ywRlZQ9TDVIisIRplgzOyhqiHqbBYLFRgu91O3TWbzVxhA8dtlwPqMO3knCHjosHinCHjuStE1hCNssEZWUO0J7KGaJQNzsgaoh6mQmQN0SgbnJE1RD1Mhfbc42azaW8i5gobOH4Gperszp07k8lEO32BzzvgvJ2P567wiS/gffIdbF//drw9X/jQ2+i+47VPoH37qx6j62EqfEiTBfe1o3egfdXo7XQ9TIXVarXdbpViulRuucIGjh+KtN/vh+cnj09QOmfIuGiwOGfIeO4KkTVEo2xwRtYQ7YmsIRplgzOyhqiHqRBZQzTKBmdkDVEPU0G51d7MQq11fn7uChs4/gWlIqztoQXnDBkXDRbnDBnPXSGyhmiUDc7IGqI9kTVEo2xwRtYQ9TAVImuIRtngjKwh6mEq7Pf7FlpKsfwLSqWYOkzb2pOXzhkyLhoszhkynrvCx76A9w3vYPuat+PtiawhGmWDM7KGqIepEFlDNMoGZ2QNUQ9TQYm1WCxUY8eX58drxdrryJRiupxOp84ZMi4aLM4ZMp67QmQN0SgbnJE1RHsia4hG2eCMrCHqYSpE1hCNssEZWUPUw1RQaE0mk3v37im3fsq77SvTfjhwdnbmnCHjosHinCHjuStE1hCNssEZWUO0J7KGaJQNzsgaoh6mQmQN0SgbnJE1RD1Mhdlspty6vb3VpWrMFTYwur6+bk9Qtjfcd86QcdFgcc6Q8dwVImuIRtngjKwh2hNZQzTKBmdkDVEPUyGyhmiUDc7IGqIepsJ8Pm/PQCq68glKZdrFxYUaTZfa7Jwh46LB4pwh47krRNYQjbLBGVlDtCeyhmiUDc7IGqIepkJkDdEoG5yRNUQ9TIXpdLoZ3lTs6upK0eUKGzhm2nJAm/f7/a/z+Xk4P8fHc1f42K/jfcPPs33Nz+Ht+fUPvI3uz7/6CbQ/94rH6HqYCh/QZMF99ejn0b5i9HN0PUyFu3fvzmYzdZiCbDKZuMIG/KFI2qCF7XbrnCHjosHinCHjuStE1hCNssEZWUO0J7KGaJQNzsgaoh6mQmQN0SgbnJE1RD1MBXWYcuvy8nK1Wl1cXLjCBvzBR9fX16qx9XrtnCHjosHinCHjuStE1hCNssEZWUO0J7KGaJQNzsgaoh6mQmQN0SgbnJE1RD1MBaWYckuXSrHdbucKGzj+BWV7t/3hWcqlc4aMiwaLc4aM564QWUM0ygZnZA3RnsgaolE2OCNriHqYCpE1RKNscEbWEPUwFdRhKjClmFB0ucIGjo+KTSaT9tjYdDp1zpBx0WBxzpDx3BUia4hG2eCMrCHaE1lDNMoGZ2QNUQ9TIbKGaJQNzsgaoh6mgvLr4uJCoaXLfF8xFdhms1GjnV62/4jgnCHjuStE1hCNssEZWUO0J7KGaJQNzsgaoh6mQmQN0SgbnJE1RD1MhfmAUuz29jY/g3K5XCrFhHrt5ubGOUPGRYPFOUPGc1eIrCEaZYMzsoZoT2QN0SgbnJE1RD1MhcgaolE2OCNriHqYCsotddjl5aVyK1NMq4RSbL1eX1xcfJ7PW+H8LB/PXeFDn8f72reyfdXP4u35/AfeTPetr34c7c++4iV0PUyFD2iy4L569Fa0rxj9LF0PU0Edtlqtrq6u1GTz+DhwbdvtdtqmINM25wwZFw0W5wwZz10hsoZolA3OyBqiPZE1RKNscEbWEPUwFSJriEbZ4IysIephKqjDDofDer0ej8e6dIUNjPYDqrGL4R1gnTNkXDRYnDNkPHeFyBqiUTY4I2uI9kTWEI2ywRlZQ9TDVIisIRplgzOyhqiHqTCZTLbbrXLr7t27+bL9B09NTqdTLThnyLhosDhnyHjuCpE1RKNscEbWEO2JrCEaZYMzsoaoh6kQWUM0ygZnZA1RD1NBKabKUnSdn5/no2L6ej6fK9AuLy9PKfYo4Jwh47krRNYQjbLBGVlDtCeyhmiUDc7IGqIepkJkDdEoG5yRNUQ9TIXFYqEOa498zWYzV9jA8SX9ijDRnqN0zpBx0WBxzpDx3BUia4hG2eCMrCHaE1lDNMoGZ2QNUQ9TIbKGaJQNzsgaoh6mwnrg6uqqPVPpChs4blutVrpUpinLnDNkXDRYnDNkPHeFyBqiUTY4I2uI9kTWEI2ywRlZQ9TDVIisIRplgzOyhqiHqbAZmM/nKq5dfPCROmw8HutSHXZxcfE5Pm+B8yY+nrvChz6H97VvYfuqN+Ht+dx730z3La98HO2bXvYSuh6mwns1WXBfOXoL2peN3kTXw1Roz0CenZ3t93vllitsYNSel9RmXR4OB+cMGRcNFucMGc9dIbKGaJQNzsgaoj2RNUSjbHBG1hD1MBUia4hG2eCMrCHqYSqshk8Bb+8glim22WzUYe0zKFVqzhkyLhoszhkynrtCZA3RKBuckTVEeyJriEbZ4IysIephKkTWEI2ywRlZQ9TDVGgv218ul9vtVkHmChs4Ztp6vdYe9+/f17JzhoyLBotzhoznrlCbBmqUDc7IGqI9kTVEo2xwRtYQ9TAVImuIRtngjKwh6mEq7HY7ddjNzc1+vz87O3OFDRxftq8O04bLy0tlmnOGjIsGi3OGjOeu8IHP4X31W9i+4k14eyJriEbZ4IysIephKkTWEI2ywRlZQ9TDVFitVvP5/HA4KLryzSy0TRG2GT4O/PSo2KOAc4aM564QWUM0ygZnZA3RnsgaolE2OCNriHqYCpE1RKNscEbWEPUwFabT6cXFhTpsuVwqt1xhAyNtUIS1GhPOGTIuGizOGTKeu0JkDdEoG5yRNUR7ImuIRtngjKwh6mEqRNYQjbLBGVlD1MNUaG8Zpuhqb7vvChs4/nVl+7vK9kYXz/J5I5yn+HjuCh94Fu+r38j2FU/h7Xn2vW+m+8ZXPo72qZe9hK6HqfBeTRbcV47eiPZlo6foepgKZ2dnLbRWq9Vms3GFDRxTTB324LVizhkyLhoszhkynrtCZA3RKBuckTVEeyJriEbZ4IysIephKkTWEI2ywRlZQ9TDVFCEqbUUWsqt+XzuChs4vpmFNmizNpyfnztnyLhosDhnyHjuCpE1RKNscEbWEO2JrCEaZYMzsoaoh6kQWUM0ygZnZA1RD1NhsVhcXFzMZrOrqyvllits4Pio2Gp4q32lmC6dM2RcNFicM2Q8d4XIGqJRNjgja4j2RNYQjbLBGVlD1MNUiKwhGmWDM7KGqIepoNZqrwfTgrLMFTZwfNm+1p6dnbV3vHDOkHHRYHHOkPHcFSJriEbZ4IysIdoTWUM0ygZnZA1RD1MhsoZolA3OyBqiHqbCbDZrxTWdTvO1Yu0hsTt37lwOf0TpnCHjosHinCHjuStE1hCNssEZWUO0J7KGaJQNzsgaoh6mQmQN0SgbnJE1RD1MBVXWer3W5eFw0KUrbOD4Fq/tqcn2lhbOGTIuGizOGTKeu0JkDdEoG5yRNUR7ImuIRtngjKwh6mEqRNYQjbLBGVlD1MNUUGXNZjNdqrsu4jMotVarGpvN5tN8nANYnuTjuSt84NN4X/0U21c8ibfn08+8me5TL38c7ZNPvISuh6nwjCYL7stHT6F9YvQkXQ9TYTKZqLjai/fzCUp9rbXtLyjVa84ZMi4aLM4ZMp67QmQN0SgbnJE1RHsia4hG2eCMrCHqYSpE1hCNssEZWUPUw1RQbinFrq+vV6uVFlxhA8eX7YtWaqcUexRwzpDx3BXe+2m8r3yK7cuexNsTWUM0ygZnZA1RD1MhsoZolA3OyBqiHqZCe0V+e47ycDi4wgaOrxXT2va42XK5dM6QcdFgcc6Q8dwVImuIRtngjKwh2hNZQzTKBmdkDVEPUyGyhmiUDc7IGqIepsJ+v7+9vb13795qtbqI14ppm0rt7OxMKXZ6rdijgHOGjOeuEFlDNMoGZ2QN0Z7IGqJRNjgja4h6mAqRNUSjbHBG1hD1MBUOh4MqS6i48i8or66u2oNmQlnmnCHjosHinCHjuStE1hCNssEZWUO0J7KGaJQNzsgaoh6mQmQN0SgbnJE1RD1MhfZiMF0ul8vVauUKGzi+jmwymex2u/WAc4aMiwaLc4aM564QWUM0ygZnZA3RnsgaolE2OCNriHqYCpE1RKNscEbWEPUwFRRaSjFF2Gw2y0fFFGgqMF22Jy8/wcc5gOX1fDx3hfd+Au8rn2T7stfj7fnEM2+m+6Rqhuzrn3gJXQ9T4RlNFtyXj55E+8To9XQ9TAXl12Kx2Gw28/lcueUKGzhu2+/37VOPVGPOGTIuGizOGTKeu0JkDdEoG5yRNUR7ImuIRtngjKwh6mEqRNYQjbLBGVlD1MNUuLm5UW6ptdbDe+67wgb8+ZTKtPYHls4ZMi4aLM4ZMp67QmQN0SgbnJE1RHsia4hG2eCMrCHqYSpE1hCNssEZWUPUw1RQbs3n87Ozs8VikSmmDjscDrq8c+eONjtnyLhosDhnyHjuCpE1RKNscEbWEO2JrCEaZYMzsoaoh6kQWUM0ygZnZA1RD1NhOp3OZjOF1na7VXS5wgZG9+/fvxjeg789YuacIeOiweKcIeO5K0TWEI2ywRlZQ7QnsoZolA3OyBqiHqZCZA3RKBuckTVEPUyF1Wql0Foul+qw3W7nChvwa8XOz89VY8I5Q8ZFg8U5Q8ZzV4isIRplgzOyhmhPZA3RKBuckTVEPUyFyBqiUTY4I2uIepgK6rDFgLpLueUKGxjNZrOLi4vpdKptijXnDBkXDRbnDBnPXSGyhmiUDc7IGqI9kTVEo2xwRtYQ9TAVImuIRtngjKwh6mEqKLHUYSqu/fDifVfYwPGjwne7nQJNlwqyj/F5A5zX8PHcFZ75GN6Xv4HtE6/B2/Oxp19H9w0vfQztax7/GboepsLTmiy4Lx29Ae3jo9fQ9TAVVsOngCvCDoeDll1hA8dtt7e32ia0k3OGjIsGi3OGjOeuEFlDNMoGZ2QN0Z7IGqJRNjgja4h6mAqRNUSjbHBG1hD1MBWur69VXJeXlz8lxRbDG45Np9P28JhzhoyLBotzhoznrhBZQzTKBmdkDdGeyBqiUTY4I2uIepgKkTVEo2xwRtYQ9TAVLi4u2gvF1Fq6dIUNHFNMq7RHe/tX5wwZFw0W5wwZz10hsoZolA3OyBqiPZE1RKNscEbWEPUwFSJriEbZ4IysIephKiix2ltVtAVX2IBfKzadTrVhv987Z8i4aLA4Z8h47gqRNUSjbHBG1hDtiawhGmWDM7KGqIepEFlDNMoGZ2QNUQ9TQQW2HN5qf7PZ5PuKzedzpZiCTJtXq5VzhoyLBotzhoznrhBZQzTKBmdkDdGeyBqiUTY4I2uIepgKkTVEo2xwRtYQ9TAV2oNhuhTqLlfYwPFl+1p1c3NzdXWlzc4ZMi4aLM4ZMp67QmQN0SgbnJE1RHsia4hG2eCMrCHqYSpE1hCNssEZWUPUw1RoLwNrT1Dma8WUYofDQWu1MJvNPsTntXBexcdzV3jmQ3hf/lq2T7wKb8+Hnn4d3de+9DG0r3r8Z+h6mApPa7LgvnT0WrSPj15F18NUaE9NqsPa05SusIFR2/DDH/5Ql8I5Q8ZFg8U5Q8ZzV4isIRplgzOyhmhPZA3RKBuckTVEPUyFyBqiUTY4I2uIepgKq9WqhZYWVGOusIHRbrc7Pz+fTCZXV1eXl5fOGTIuGizOGTKeu0JkDdEoG5yRNUR7ImuIRtngjKwh6mEqRNYQjbLBGVlD1MNUWJc/n1SNucIGRvv9vn1I+J07d87OzpwzZFw0WJwzZDx3hcgaolE2OCNriPZE1hCNssEZWUPUw1SIrCEaZYMzsoaoh6nQXiumCNtsNlp2hQ2M7t27p1U//OEPx+OxFpwzZFw0WJwzZDx3hac/hPelr2X7+Kvw9kTWEI2ywRlZQ9TDVIisIRplgzOyhqiHqTA8OXmkvYOYK2xg1J6dXCwWy+VSezhnyLhosDhnyHjuCpE1RKNscEbWEO2JrCEaZYMzsoaoh6kQWUM0ygZnZA1RD1Nhs9motdbr9U9JsfF4vN1uFWHaQzhnyLhosDhnyHjuCpE1RKNscEbWEO2JrCEaZYMzsoaoh6kQWUM0ygZnZA1RD1OhpZguRb5s//r6WtsUZO11ZB/g82o4r+DjuSs8/QG8L30128dfgbfnA297Hd1XP/EY2lc89jN0PUyFt2my4D4xejXax0avoOthKiixlFvtlfuqMVfYwPGDj9Rh0+l0Pp8fDgfnDBkXDRbnDBnPXSGyhmiUDc7IGqI9kTVEo2xwRtYQ9TAVImuIRtngjKwh6mEqrNdrpZiC7KekmDa0x8N2u93t7a1zhoyLBotzhoznrhBZQzTKBmdkDdGeyBqiUTY4I2uIepgKkTVEo2xwRtYQ9TAVttvtbEAdpu5yhQ0cX9KvDru6ujocDqcnKB8FnDNkPHeFyBqiUTY4I2uI9kTWEI2ywRlZQ9TDVIisIRplgzOyhqiHqaDEEoqwy8tLBZkrbOD4Fq8KtOvr6/ZO/M4ZMi4aLM4ZMp67QmQN0SgbnJE1RHsia4hG2eCMrCHqYSpE1hCNssEZWUPUw1Ro71bRyBRTo93e3rYg02bnDBkXDRbnDBnPXSGyhmiUDc7IGqI9kTVEo2xwRtYQ9TAVImuIRtngjKwh6mEqXF9fr9frO3fuTKdTpZcrbOD4OrL2ThbtE8GdM2RcNFicM2Q8d4XIGqJRNjgja4j2RNYQjbLBGVlD1MNUiKwhGmWDM7KGqIepoNaaz+ftOcrtdusKGxjd3t4q0M7Pz3e7nfZ7L59XwnkZH89d4en34n3pK9k+/jK8Pe992+vovvKJx9C+7LGfoethKrxNkwX3idEr0T42ehldD1NhMplsNpvnn39el4ouV9jA8T3H1Gjapg67vLx0zpBx0WBxzpDx3BUia4hG2eCMrCHaE1lDNMoGZ2QNUQ9TIbKGaJQNzsgaoh6mghJru90qyObzuZZdYQPHTDscDtq8Xq/3+71zhoyLBotzhoznrvC29+J94pVsH3sZ3p7IGqJRNjgja4h6mAqRNUSjbHBG1hD1MBV2u91yuVytVuqw6+trV9jA8Y0ulGKKMKXYYrFwzpBx0WBxzpDx3BUia4hG2eCMrCHaE1lDNMoGZ2QNUQ9TIbKGaJQNzsgaoh6mgiJss9nc3Ny0P5R0hQ0cn6BUjbUPBdeyc4aMiwaLc4aM564QWUM0ygZnZA3RnsgaolE2OCNriHqYCpE1RKNscEbWEPUwFRaLxX6/v7y8bMXlChvwX1BqrTYr2ZwzZFw0WJwzZDx3hcgaolE2OCNriPZE1hCNssEZWUPUw1SIrCEaZYMzsoaoh6lwfX2tyhqPx3fv3r25uXGFDRxfR9Zeua8mm81mzhkyLhoszhkynrtCZA3RKBuckTVEeyJriEbZ4IysIephKkTWEI2ywRlZQ9TDVDg/P58PXFxcTKdTV9jA8bViSrEHb3fxDJ+Xw3mCj+eu8LZn8D7xcraPPYG355k3v47uyx9/DO0TL/kZuh6mwps1WXAfH70c7UtGT9D1MBVms9lyuRyPx+29w1xhA8fXirXHw9pfUDpnyLhosDhnyHjuCpE1RKNscEbWEO2JrCEaZYMzsoaoh6kQWUM0ygZnZA1RD1Nhu92ufvL5RvnBR4fDQXWmILu8vJzP584ZMi4aLM4ZMp67QmQN0SgbnJE1RHsia4hG2eCMrCHqYSpE1hCNssEZWUPUw1RQYim02h9KLhYLV9jA8bViLcUUa7p0zpBx0WBxzpDx3BUia4hG2eCMrCHaE1lDNMoGZ2QNUQ9TIbKGaJQNzsgaoh6mwnK5VGXNZrP2cjFX2MDxyUvR3lpMseacIeOiweKcIeO5K0TWEI2ywRlZQ7QnsoZolA3OyBqiHqZCZA3RKBuckTVEPUwF5Vd7jnIymWjBFTZwfIJSaK0y7fSo2KOAc4aM564QWUM0ygZnZA3RnsgaolE2OCNriHqYCpE1RKNscEbWEPUwFS4vL2ezmVJMxZUppkxbr9fj8VhBdnNz45wh46LB4pwh47krRNYQjbLBGVlDtCeyhmiUDc7IGqIepkJkDdEoG5yRNUQ9TIUHT1CqxhRdrrCB419QaoMC7f79+/v9/mk+L4XzOB/PXeHNT+N9/KVsX/I43p6n34z3pY+zffwleHu6e4lnd0fB7O4lnh6mwnq9ns/n0+l0t9vlo2L6Wmvv3bunDlOWOWfIuGiwOGfIeO4KkTVEo2xwRtYQ7cnfP0DzVxDN/P0DtKe7l3h2dxTM7l7i6WEqzIYX7N/c3LQ3rHCFDRwfFWsv2F+tVhcXF84ZMi4aLM4ZMp67QmQN0SgbnJE1RHvy9w/Q/BVEM3//AO3p7iWe3R0Fs7uXeHqYCovFQqGlDjs/Pz87O3OFDRwzTR2mPdrbXThnyLhosDhnyHjuCpE1RKNscEbWEO3J3z9A81cQzfz9A7Snu5d4dncUzO5e4ulhKii3rq6u9vu9Fg6Hgyts4Pj5lCowrW3PYjpnyLhosDhnyHjuCpE1RKNscEbWEO3J3z9A81cQzfz9A7Snu5d4dncUzO5e4ulhKkwmk91ud3l5qdxSd7nCBo6vFRPa0B4Yc86QcdFgcc6Q8dwVImuIRtngjKwh2pO/f4DmryCa+fsHaE93L/Hs7iiY3b3E08NUuLi4UIrdvXt3NuAKGzi+Vkwppsv2uUjOGTIuGizOGTKeu0JkDdEoG5yRNUR78vcP0PwVRDN//wDt6e4lnt0dBbO7l3h6mArtjyNbkGnZFTZwzLTFYnF9fd3eAfZtfPzeVlge4+O5K7z5bXgff4LtSx7D2/O21+F94jG2j/0M3p7uXuLZ3VEwu3uJp4epoNBShKnGlsvldDp1hQ0cU6w9c6lGE84ZMi4aLM4ZMp67QmQN0SgbnJE1RHvy9w/Q/BVEM3//AO3p7iWe3R0Fs7uXeHqYCuowFddsNtPlarVyhQ2M9LU6TCjIxuOxc4aMiwaLc4aM564QWUM0ygZnZA3Rnvz9AzR/BdHM3z9Ae7p7iWd3R8Hs7iWeHqaCUmy5XCrFJpOJissVNuAUay/en8/nzhkyLhoszhkynrtCZA3RKBuckTVEe/L3D9D8FUQzf/8A7enuJZ7dHQWzu5d4epgK4/H47OxMKbbZbFRjrrCB4zvxt1fuq9GEc4aMiwaLc4aM564QWUM0ygZnZA3Rnvz9AzR/BdHM3z9Ae7p7iWd3R8Hs7iWeHqbCcrlUcbXHxrTgChsYzefz1mEKslOKPQo4Z8h47gqvexve+GhqnD/zGN6e/P0DNH8F0czfP0B7unuJZ3dHwezuJZ4epsJsNlOBCbVWvsVrK7Crqytt1rJzhoyLBotzhoznrhBZQzTKBmdkDdGe/P0DNH8F0czfP0B7unuJZ3dHwezuJZ4epkJ72Ku9Vmw8HrvCBo5vdKEIW61WWphOp2/m4/e2wvISPp67wuvejPexx9n+zEvw9rz5dXgff4ztS34Gb093L/Hs7iiY3b3E08NUUGKpwNobh+VrxdpfV87n881mo0vnDBkXDRbnDBnPXSGyhmiUDc7IGqI9+fsHaP4Kopm/f4D2dPcSz+6OgtndSzw9TIXZbKYOa62l9HKFDfjd9tfrtXpNOzlnyLhosDhnyHjuCpE1RKNscEbWEO3J3z9A81cQzfz9A7Snu5d4dncUzO5e4ulhKlwO7+F6dnam7soUay8R0x7n5+enR8UeBZwzZDx3hcgaolE2OCNriPbk7x+g+SuIZv7+AdrT3Us8uzsKZncv8fQwFdqbil0MH3yU77avCGtvLaYOO71W7FHAOUPGc1eIrCEaZYMzsoZoT/7+AZq/gmjm7x+gPd29xLO7o2B29xJPD1Nhu92qw3TZXi7mChs4PkGpCGsppkvnDBkXDRbnDBnPXSGyhmiUDc7IGqI9+fsHaP4Kopm/f4D2dPcSz+6OgtndSzw9TIXlQHuX18Vi4Qob8MeBt/cc06VzhoyLBotzhoznrhBZQzTKBmdkDdGe/P0DNH8F0czfP0B7unuJZ3dHwezuJZ4epkJ72X57KjKfoFSBzedzBdl6+Pij1/Hxe1th+Rk+nrvC616H97HH2OpuodvzOr6PwdXdQvenEfcS0bijcMa9RDRRhLUX7CvFlFuusIHjy/ZVai3TFGTOGTIuGizOGTKeu0JkDdEoG5y1aaD2xC8fovH7B+eDXztcfxpxLxGNOwpn3EtEE4XWfr9vKZZPULbXiinC2oJzhoyLBotzhoznrhL/ShCNfyhw1n8ioHbEXUQ07iWccRcR/WnEvUQ07iiccS8RTVqE3blzZzKZKLdcYQPHz6BUh2lz++wj5wwZFw0W5wwZz10l/pUgGv9Q4Kz/REDtiLuIaNxLOOMuIvrTiHuJaNxROONeIppMB9qr8/f7vStsYNSel9xsNjc3N6cnKB8FnDNkPHeV+FeCaPxDgbP+EwG1I+4ionEv4Yy7iOhPI+4lonFH4Yx7iWiy3W6Xy2V7udh6vXaFDRyfvFSBXV1dafN4PHbOkHHRYHHOkPHcVeJfCaLxDwXO+k8E1I64i4jGvYQz7iKiP424l4jGHYUz7iWiiVprPrxr2OFwUJO5wgaOL9tfLBbtOcrTX1A+CjhnyHjuKvGvBNH4hwJn/ScCakfcRUTjXsIZdxHRn0bcS0TjjsIZ9xLRRPml1lKH7YbP/naFDRxfK9ZeSjYej7WHr3HixIkTJ06cOHHiBeLy8nI7oCZTdLnCBkbn5+e3t7dXV1da2Gw2vsaJEydOnDhx4sSJF4j2sJc67HA45GvFtGG/32vtZDK5d++er3HixIkTJ06cOHHiBUKtNZ1Ot9utmuz8/NwVNuDPp5zP52dnZ9rP1zhx4sSJEydOnDjxArFYLNbrdftbyXyCUmtns5lKbbPZnFLsxIkTJ06cOHHiBWc+nyu0FGTj8Xi327nCBo4ppg5rT1Nut1tf48SJEydOnDhx4sQLxMXwxmHn5+eTySRTrDWa1gplma9x4sSJEydOnDhx4gVCubVardob7m/j48CVabPZrD1/qf3+/sSJEydOnDhx4sQLynLgQXG5wgaOKSZUarrUZl/jxIkTJ06cOHHixAvE+fn5eDx+8MCYK2zg+Dqy9mYW2+329KjYiRMnTpw4ceLEC44iTJWl3FKQZYpNJpPL4U8rtVmXvsajxz//5//8b//2b/3FiRMnTpw4ceJEx2g08tIjxnK5VHHpcrvdTqdTV9jASF/fu3ev1Zj28DX+j/Fbv/VbXvr/Ef1wVWP+4sSJEydOnDjx/26GV8P/38IrvnykUGKpuNonG/3fUux//+//LyHN0I8L6pFwAAAAAElFTkSuQmCC><br><br>Don't skimp here - do it right. GPUs are impressively fast at maths these days, and the speed difference between proper sRGB and pow(2.2) is trivial in most cases. In most cases you will actually be using the built-in hardware support, making proper sRGB even cheaper to use.<br><br><strong>It's not a gamma curve, it's a compression format</strong><br><br>The important thing to remember when adopting sRGB, or indeed any gamma representation, is that it is not a sensible place to do maths in. You can't add sRGB numbers together, or blend them, or multiply them. Before you do any of that, you have to convert it into a linear space, and only then can you do sensible maths.<br><br>If it helps, you can think of sRGB as being an opaque compression format. You wouldn't try to add two ZIP files together, and you wouldn't try to multiply a CRC32 result by 2 and expect to get something useful, so don't do it with sRGB! The fact that you can get something kinda reasonable out is a red herring, and will lead you down the path of pain and deep deep bugs. Before doing any maths, you have to "decompress" from sRGB to linear, do the maths, and then "recompress" back.<br><br>It is also important that you do not think of sRGB data as being "in gamma-space". That implies the shader has done some sort of gamma transform when using the data - it has not! The shader writes linear-space values, and the hardware "compresses" to sRGB. Later, when reading, the hardware will "decompress" from sRGB and present the shader with linear-space values. The fact that the sRGB "compression format" resembles the gamma 2.2 curve is not relevant when thinking about what the data means, only when thinking about its relative precision. For those of you familiar with the binary format of floating-point numbers, we do not think of them as being "gamma 2.0" - they are still just linear values, we just bear in mind that their precision characteristics are similar to those of a gamma 2.0 curve.<br><br><strong>Hardware support for sRGB on the desktop</strong><br><br>All remotely modern desktop GPUs have comprehensive and fast support for sRGB. It has been mandatory since DirectX10 in 2008, so there's been plenty of time for them to get this right.<br><br>When you bind an sRGB texture and sample from it, all the pixels are converted from sRGB to linear, and THEN filtering happens. This is the right way to do things! Filtering is a mathematical operation, so you can't do it to the raw sRGB values and expect to get the right result. Hardware does this correctly and very quickly these days.<br><br>Similarly, when rendering to an sRGB surface, the shader outputs standard linear data. If alpha-blending is enabled, the hardware reads the sRGB destination data, converts it to linear values, performs the alpha-blending in linear space, and then converts the result into sRGB data and writes it out.<br><br>To say it again for emphasis, at no time do we deal with "gamma-space" data - we can continue thinking of sRGB as an opaque compression format that the hardware deals with for us on both read and write.<br><br><strong>Gamma is not a new thing, in fact it's the old thing!</strong><br><br>It is important to note that gamma-space images are not a new thing. Until about 1990, all images were gamma space. Monitors were (and still are) gamma-space display devices, and so all images were implicitly gamma, and all image operations were as well. Even today all common image formats (GIF, JPEG, PNG, etc) are assumed to be in gamma space. This is typically 2.2, though some formats are so old they can't even specify it - the gamma curve is just assumed to be whatever your monitor is!<br><br>Academics certainly did know this was "wrong", but there were no available clock cycles or spare transistors to do it right, and there were plenty of other image problems to deal with first, like basic alpha blending and texture filtering. And since the input textures were in gamma space, and the output data was displayed on a gamma-space monitor, it all kinda matched up. The obvious problem came along with lighting. People tended to calculate lighting in linear space (which is fine), but then they would multiply gamma-space texture data with linear-space lighting data, and then show the result on a gamma-space monitor. This multiply is technically wrong - but until about 2002 nobody really cared enough to worry about it.<br><br>Once our rendering pipelines hit high enough quality, and hardware had enough gates to spare, gamma correction and sRGB were added to the hardware. However, it's important to understand that all along, these images had been sRGB (or at least in gamma space) - we had just never had the hardware support available, and so we ignored it. But the concept of gamma-space buffers has been there all along. In fact the NEW thing invented by the High Dynamic Range pipeline is the concept of buffers in linear space! This means that if you're starting to port an existing pipeline to HDR and you're trying to decide whether a given buffer should be declared as sRGB or linear, the answer in 90% of the cases is sRGB.<br><br>Technically, this also includes the final framebuffer. Given the choice between a linear format and an sRGB format, sRGB is a much much closer match to the response of a real monitor than linear. However, even better is if the app performs an explicit tone-mapping step and matches the gamma response of the monitor more precisely (since as mentioned, sRGB and gamma 2.2 are slightly different). As a result, and for backward-compatibility reasons, OSes expect apps to provide them with a buffer that is declared as a linear format buffer, but which will contain gamma-space data. This special case is extremely counter-intuitive to many people, and causes much confusion - they think that because this is a "linear" buffer format, that it does not contain gamma-space data.<br><br>I have not tried to create sRGB or higher-precision framebuffers to see what the OS does with them. One option is that it still assumes they are in the same gamma space as the monitor. Another would be to assume they really are in linear space (especially for floating-point data) and apply a gamma-2.2 ramp (or thereabouts) during processing. It would be an interesting experiment to do, just be aware that the results are not obvious.<br><br><strong>Oculus Rift support</strong><br><br>The Oculus Rift (desktop) support for sRGB buffers is somewhat different to the standard OS support. Unlike fullscreen display on a monitor, the application does not supply a framebuffer that is directly applied to the Head Mounted Display. Instead, the app supplies buffers that then have distortion, chromatic aberration, and a bunch of other post-processing operations applied to them by the SDK and Oculus' Display Service before they can be shown on the HMD. Oculus have been very careful with quality and calibration, and the Display Service knows a great deal about the HMD's characteristics, so we can apply a very precise gamma ramp as part of the distortion process.<br><br>Because the buffers supplied by the app must be filtered and blended as part of the distortion and chromatic aberration processing, and filtering is maths, it is important that the data in the buffers is in linear space, not gamma space, because you can only do maths correctly in linear space. Starting with version 0.7, the Oculus SDK expects the application to supply data in linear space, in whatever format the buffer is declared as. The Display Service will apply the required filtering and distortion, and then apply a precise gamma curve to match the actual response of the HMD. Because we know the precise characteristics of the display, we also play various tricks to extend its precision a little. We support most standard image formats, including float16, as input buffers - so don't be afraid to feed us your HDR data. <br><br>This means the application does not need to know the exact gamma response of the HMD, which is excellent. But it does mean some applications will get a surprise. They are used to the OS accepting a buffer that is declared as a "linear" buffer, but then silently interpreting that data as gamma-space (whatever gamma the monitor is set to). But now, if the buffer is declared as a linear buffer, the Display Service takes the application literally and interprets the data as if it was indeed in linear space, producing an image that is typically far brighter than expected.<br><br>For an application that is fully gamma-aware and applying its own gamma curve as a post-process, the solution is simple - don't do that! Leave the data in linear space in the shader, do not apply a gamma ramp (tone-mapping and brightness correction are fine, just remove the linear-to-gamma part), write the data to an sRGB or HDR surface to preserve low-end precision, and the Display Service will do the rest. Again, it is important to remember that if using an sRGB surface, it is not "in gamma space" - it is still a surface with data in linear-space, it is just that its representation in memory looks very similar to a gamma curve.<br><br>For an application that is not gamma-aware, and that has been happily (if naively) using gamma data throughout its entire shader pipeline forever, the solution is only a tiny bit more complex. Here, the application uses an sRGB buffer, but creates a rendertarget view that pretends the buffer is linear, and uses that to write to it. This allows the shaders to continue to produce gamma-space data the way they always have. Because the rendertarget view is set to linear, no remapping is performed while writing to the surface, and gamma-space data goes directly to memory. But when the Display Service reads the data, it interprets it as sRGB data. Because sRGB is very close to a gamma 2.2 representation, this works out almost perfectly - the Display Service reads the gamma-space data, the hardware converts it to linear-space, and then filtering and blending happens as it should. This process is also explained in the Oculus SDK docs. It is a hack, but it works well, and is much simpler than converting the application to use a fully gamma-aware pipeline from start to end.<br><br><strong>Alternatives to sRGB</strong><br><br>sRGB is a great format, but it's limited to 8 bits per channel. What if you want a little more precision? This subject could occupy a blog post all by itself (and might well do in the future!), but here's a brief list of interesting alternatives:<br><br><ul><li> float16. Simple, robust, and excellent API and platform support. Sadly it's significantly larger and so can cause performance problems.</ul><br><ul><li> 10:10:10:2 linear. Looks promising, however note that it has less precision in the dark areas than sRGB! In fact because at the low end sRGB is a line with slope 1/12.92, it effectively has about 3-and-a-half-bits of extra precision, making it almost as good as 12-bit linear!</ul><br><ul><li> 10:10:10:2 gamma 2.0. This uses the standard 10:10:10:2 format, but you apply the gamma 2.0 manually in the shader - squaring the data after reading, and taking the square root before writing it. This gives significantly higher precision than 8-bit sRGB throughout the range. However, because the square and square-root are done in the shader, texture filtering and alpha-blending will not work correctly. This may still be acceptable in some use cases.</ul><br><ul><li> float11:float11:float10. Similar to float16 but smaller and less accurate. Note that unlike float16 it cannot store negative numbers. I have not used this myself, but it looks useful for the same sort of data as sRGB stores.</ul><br><ul><li> Luma/chroma buffers. This is a really advanced topic with lots of variants. One example is transforming the data to YCgCo and storing Y at higher precision than Cg and Co. Again, filtering and alpha blending may not work correctly without some effort.</ul><br><strong>Cross-platform support</strong><br><br>On the desktop it's pretty simple. Although sRGB support was introduced in previous versions, DirectX10 finally required full, correct, fast support. As a result all useful graphics cards shipped since 2008 (in both PC and Mac) have included excellent sRGB support and for all real-world purposes you can regard support as being free.<br><br>I don't know the details of Nintendo's hardware, but PS4 and Xbox One have the same high-quality sRGB support as their PC counterparts. PS3 does sRGB conversion before alpha-blending, so the blending is done in gamma space, which is not quite right. And ~Xbox360 was notorious for having a really terrible approximation of sRGB - while better than linear, it was a totally different-shaped response to actual sRGB, and required special authoring steps to avoid significant artefacts.<br><br>On mobile, John Carmack informs me that "Adreno and Mali are both very high quality. There is a small perf penalty on the Adreno Note 4, none on newer ones." Unlike DirectX10, mobile parts are permitted to perform sRGB conversion after texture filtering, rather than on each raw texel before filtering. This is much cheaper in hardware, but can cause slightly incorrect results. It is unclear which parts, if any, actually take this shortcut, but it's something to watch out for. Also note that the Oculus mobile SDK handles sRGB slightly differently than on desktop, so check the deocs for details.<br><br><strong>Simple rules to follow when making a pipeline sRGB-correct</strong><br><br><ul><li> Any image format you can display on a monitor without processing (e.g. in MSPaint or a browser) is almost certainly in either gamma 2.2 or sRGB space. This means GIFs, JPEGs, PNGs, TGAs, BMPs, etc. The same is true of anything that an artist made, coming out of a paint package.</ul><br><ul><li> Any time you are storing "thing that looks like a picture" in 8 bits per channel, use sRGB. It will give you much less banding in the dark areas. But always use the hardware to "decompress" to linear before doing anything maths-like with the data (e.g. in a shader).</ul><br><ul><li> Any time you are storing "thing that is mathy" e.g. lookup tables, normal maps, material IDs, roughness maps, just use linear formats. It is rare that sRGB compression will do what you want without deeper thought.</ul><br><ul><li> Lightmaps and shadowmaps are an interesting case. Are they "like a picture" or not? Opinions differ, and some experimentation may be required. Similarly specular maps - sRGB may or may not do what you want depending on context and content. Keep your pipeline flexible, and try it both ways.</ul><br><ul><li> Floating-point formats are conceptually linear, and no conversion is needed for them, you can just use the values in maths immediately. However, the way floats are encoded gives you many of the precision advantages of gamma 2.0 format, so you can safely store "things that look like pictures" in floating point formats and you will get higher precision in darker areas.</ul><br><strong>In conclusion</strong><br><br>Hopefully this has given you an overview of the occasionally confusing world of sRGB and gamma-correct rendering. Don’t worry — I’ve been doing it a while and I still get confused at times. Once you know the right lingo, you will be forever correcting others and being a real pedant about it. But the persistence pays off in the end by having robust, controllable colour response curves that don’t suddenly do strange things in very bright or dark areas. In VR, when used with a well-calibrated HMD and display software, carefully controlling the colour spaces of your data and pipeline can give the user more convincing and realistic experiences.</div>
<div class=tagClear></div>
</div><div class=tiddler id=tiddlerNaNs_cause_the_craziest_bugs refresh=tiddler tags="Blog Coding Debugging" tiddler="NaNs cause the craziest bugs" template=ViewTemplate>
<div class=toolbar role=navigation><a href=https://tomforsyth1000.github.io/blog.wiki.html title="Close this tiddler" class="button command_closeTiddler" commandname=closeTiddler tiddler="NaNs cause the craziest bugs">close</a><a href=https://tomforsyth1000.github.io/blog.wiki.html title="Close all other tiddlers" class="button command_closeOthers" commandname=closeOthers tiddler="NaNs cause the craziest bugs">close others</a><a href=https://tomforsyth1000.github.io/blog.wiki.html title="View the source of this tiddler" class="button command_editTiddler defaultCommand" commandname=editTiddler tiddler="NaNs cause the craziest bugs">view</a><a href=https://tomforsyth1000.github.io/blog.wiki.html title="Show additional commands" class="button moreCommand">more</a><span class=moreCommand style=display:none></span></div>
<div class=title>NaNs cause the craziest bugs</div>
<div class=subtitle><span><a href=https://tomforsyth1000.github.io/blog.wiki.html title="TomForsyth - TomForsyth, 2006/4/12 上午11:10:00" class="tiddlyLink tiddlyLinkExisting" refresh=link tiddlylink=TomForsyth>TomForsyth</a></span>, <span>10 September 2015</span> (<span>created</span> <span>10 September 2015</span>)</div>
<div class="tagging sf-hidden"></div>
<div class=tagged><ul><li class=listTitle>tags: <li><a href=https://tomforsyth1000.github.io/blog.wiki.html title="Show tiddlers tagged with 'Blog'" class=button tag=Blog tiddler="NaNs cause the craziest bugs">Blog</a></li> <li><a href=https://tomforsyth1000.github.io/blog.wiki.html title="Show tiddlers tagged with 'Coding'" class=button tag=Coding tiddler="NaNs cause the craziest bugs">Coding</a></li> <li><a href=https://tomforsyth1000.github.io/blog.wiki.html title="Show tiddlers tagged with 'Debugging'" class=button tag=Debugging tiddler="NaNs cause the craziest bugs">Debugging</a></ul></div>
<div class=viewer>This is the story of a fun bug. The challenge for the reader here is twofold. First, spot the bug before I give the secret away (and the title should have given a huge clue already, and filled those in the know with both dread and giggles). But second, and more pragmatically interesting to working programmers - figure out why this one took me several hours to narrow down and fix, rather than being immediately obvious after a bit of standard single stepping and sprinkling of asserts and all the standard bug triage that usually works pretty quickly.<br><br>So the context is some simple image processing. The high-level flow is this:<br><pre>Read RGB image
Convert to YUV
Do some simple processing
Convert to sRGB
Quantise to lower-bit-per-pixel format
Dequantise and display to verify it all worked
</pre>The result was that the image was kinda right, but the quantisation was very jumpy, and the contrast of the image tended to go up and down unpredictably. I expected it to slowly change as the dynamic range in the visible scene changed - as very bright or dark things came in and out of view - that's what it's meant to do. But what actually happened was even tiny changes in the input caused large changes in the quantisation quality. The first thing I tried was disabling the "simple processing" part so it did nothing (which was the normal state anyway - it was for special effects). Same result.<br><br>I then narrowed it down to the part of the quantisation where I scanned the image and found the min and max of each channel. If I didn't do that and just set the min and max values to 0.0 and 1.0 for each channel, everything was stable - though obviously the quantisation isn't giving particularly good results if we do that. Now as it happens, what the code actually did was step through each pixel, do the YUV conversion and processing, and while there I found the min/max values, i.e.<br><pre>    vec3 max = -FLT_MAX;
    vec3 min = FLT_MAX;
    for ( int i = 0; i &lt; imagesize; i++ )
    {
        vec3 pix = image[i];
        pix = to_yuv(pix);
        pix = processing(pix);
        pix = to_rgb(pix);
        vec3 gamma = powf ( pix, 1.0f/2.2f );
        max = Max ( gamma, max );
        min = Min ( gamma, min );
        ... more stuff ...
    }
    ... use min+max to quantise the image... 
</pre>(note the use of -FLT_MAX, and <strong>not</strong> FLT_MIN. That has bitten me before as well. Go look it up. It's not the value you think it is! Use of FLT_MIN is almost always a bug. Maybe go grep your codebase for it just to check. Anyway, that's not the bug here)<br><br>Well, debugging a bunch of input images showed pretty sensible values for min and max coming out, so it wasn't horribly broken. But it was still unstable, and further investigation showed the quantisation was having to clamp values outside the range of min...max (that code was in there as a safety net, but shouldn't have been needed in this case). I single-stepped through this loop for a bunch of representative pixels and it all seemed to be working as expected, and yet min and max were clearly not producing the right answers in the end. How could this possibly be? The code's just not that complex! I started to worry about a memory scribbler playing with the values of min and max on the stack, and other terrifying thoughts.<br><br>Then I happened to pick an image where the very first pixel was a fairly primary colour - let's say it was red: (1,0,0). It gets gets converted into YUV, which is some uintuitive triplet of numbers, and then back to RGB. The conversion to and from YUV was not quite perfect, because hey welcome to floating point, and what we got back was more like (0.99997, 0.00001, -0.00001). But that's easily close enough for image work, especially if we're going to quantise the result. But then we convert to sRGB by the standard method of raising each number to the power of 1.0/2.2 (this is not strictly correct, but for these purposes it was close enough).<br><br><ul><li> Hey fellow floating-point nerds - spidey-sense tingling yet? Good. So that's the first part - the what - but why did it take so long for me to track this down? What would you expect the end results to have been? Surely I would have spotted that almost immediately, no? So there's clearly more fun to come.</ul><br>For those not as familiar with floating-point arcana, let me explain. -0.00001 isn't very negative. Only a tiny bit. But that's enough. If you raise a negative number to a fractional power like 1.0/2.2, the result is undefined. powf() gives you back a result called a "NaN" which stands for "not a number" and it's a floating point value that... isn't a number. That is, it's a value that says "you screwed up - we have no idea what this is". Other examples of where they come up is dividing zero by zero (1/0 is infinity, but 0/0 just has no sensible answer). In practice in "normal" code I also regard infinity ("inf") in the same category as NaN. In theory inf is slightly better-behaved, but in practice it rapidly turns into a NaN, since 0.0*inf=NaN. inf-inf=NaN, and so on. They're still usually a sign you have buggy unstable code.<br><br>And once you have a NaN, usually they spread through your data like wildfire, because unless you're deliberate about filtering them out, you can't easily get rid of them. 1+Nan=NaN. 0*NaN=NaN, and so on. So once you get one NaN, almost any operation it does with another value will produce a NaN, and then any operations it does will cause NaNs and so on - they "infect" your data.<br><br>In one respect this is maddening, but in other ways you do start to rely on it. If you see a NaN in the output of a function, you know that somewhere in that function you screwed up, and there's only a few places you can generate a NaN, so you check them first. Square roots, divides, power functions - things like that. Normal add/sub/mul can't make a NaN/inf without first being fed a NaN/inf. And if you don't see a NaN in the result, you're probably fine - because if one <strong>ever</strong> got generated, they're usually pretty hard to get rid of and they hang around.<br><br>And that's what should intuitively have happened here. I took the power of a negative number, got a NaN, oops my bad, and of course taking the min and max of a range of numbers, one of which is junk, is clearly also junk, and then all the stages after that should have produced utter gibberish, and I would have tracked it down really quickly, right? Of course! Except that didn't happen. The min and max results weren't junk - they were totally plausible values for an image - they were just not the correct values.<br><br><ul><li> You hard-core floating-point nerds are all laughing your asses off by now. But if you think you have the whole story - I promise - there's still more subtlety to come! For the rest - lemme 'splain some more.</ul><br>I said NaNs don't usually keep quiet and stay where they are in your data - they infect and spread. But there is one very notable exception. Well, I guess two. The functions min() and max(). In fact there are lots and lots of versions of min() and max(), and all do subtly different things in the presence of NaNs. I could write a long and deeply nerdy post on all the varieties because we spent a few days figuring them all out when devising the Larrabee instruction set (and no less than three of those variants are IEEE754. That's the good thing about standards - there's so many of them!)<br><br>The details don't really matter to most coders, just be aware that all standard lessthan/equals/greaterthan comparisons with NaNs return false, except for "not equals" which is true. That is, when you ask the question "is x greater than a NaN" the answer is "no" because we have literally no idea what a NaN is - we don't even know its sign. Additionally, two NaNs of exactly the same bit pattern don't equal each other either, because they're not a "number" - not even a strange one like infinity - they're "don't know".<br><br>OK, so the burning question is - how were Min() and Max() implemented? It turns out, in a fairly obvious way, by doing result=(x&lt;y)?x:y. Some people don't like the ?: operator, and I'm not a great fan, but it turns out not to be the problem here, you'd get the same result with traditional if() statements. For ease of discussion, let me expand those macros out, and also change the loop so it's scalar rather than vector, and give it a very small input "image".<br><pre>    float image[5] = { 0.0f, 0.1f, -0.0001f, 1.0f, 0.9f };
    float max = -FLT_MAX;
    float min = FLT_MAX;
    for ( int i = 0; i &lt; 5; i++ )
    {
        float pix = image[i];
        float gamma = powf ( pix, 1.0f/2.2f );
        max = ( max &gt; gamma ) ? max : gamma;
        min = ( min &lt; gamma ) ? min : gamma;
    }
</pre>OK, well that's pretty simple - any decent coder should be able to have a go at figuring out the various possible values of min and max it might produce. This example also compiles, and you could run it and print out min and max and try to figure out why you get the results you do. I'll save you the bother - the answer is min=0.953 and max=1.0. How nerdy you are should determine how many layers of WTF this should cause.<br><br>The first quick scan would expect something like min=-0.0001, max = 1.0.<br><br>But I've already pointed out that raising -0.0001f to a power will produce a NaN, so next guess is you'd expect max and min to end up with NaNs, right? Perfectly reasonable guess. Just wrong. That would have been far too quick to track down, and I wouldn't have written this post about it.<br><br>OK, but I also told you how special Min() and Max() are, and indeed in some definitions they explicitly discard NaNs, giving you the other answer - the one that <strong>is</strong> a number. So as I said, the floating-point nerds probably thought they had got this solved it long ago. They'd expect the NaNs to be ignored, and so the expected result there is min=0.0, max=1.0. And that would have been a very subtle bug as well, but probably so subtle we'd have never even seen it, because that is really really close to the actual range of those numbers, and this being image-processing (especially with quantisation), close enough is just fine.<br><br>Ah, but this isn't IEE754-2008 Min() and Max(), this is just ?: And they do <strong>awesome</strong> things in the face of NaNs. Let's single-step.<br><br>After the first loop, min=0.0, max=0.0. Easy, no problems.<br><br>After the second loop, min=0.0, max=0.351 (which is the surprisingly large result of gamma-correcting 0.1). So far so good.<br><br>Third loop, gamma=NaN, and here's the obvious problem.<br><pre>max = ( max &gt; gamma ) ? max : gamma;
min = ( min &lt; gamma ) ? min : gamma;
</pre>Is (0.351 &gt; NaN)? No, it is not. Comparisons with NaN return false. So the new value of max is gamma, i.e. max=NaN. Same happens with min. Well, that's what we were expecting alright. Our data is now screwed. Same thing happens with min - they're both NaN, the world is a disaster, game over, the output is junk.<br><br>But wait, the answer wasn't junk. Eh? Somewhere, the NaNs vanished again. Let's do the next loop. So now gamma = 1.0, min&amp;max=NaN, and again:<br><pre>max = ( max &gt; gamma ) ? max : gamma;
min = ( min &lt; gamma ) ? min : gamma;
</pre>Is (NaN &gt; 1.0)? Again, it is not - comparisons with NaN return false. So the new value of max is... oh, it's actually 1.0. The NaN vanished! And again, same with min. So now they're both 1.0.<br><br>And last loop is as you'd expect, max=1.0, min=0.953 (the result of gamma-correcting 0.9)<br><br>So if you think through the overall behaviour, the effect of the specific way this was coded was that NaNs <strong>were</strong> discarded (as long as the very last pixel wasn't a NaN-producer) and we <strong>did</strong> get the min/max of a range of values - but only the range of values <strong>after the last NaN</strong>. How subtle is that? And the NaNs were due to slight math wobbles on certain colours during RGB-&gt;YUV-&gt;RGB conversion, so they'd pop up in random places and come and go and unpredictably, and every time they did an entire chunk of the image suddenly got ignored or added for the purpose of min/max and the quantisation and contrast would pop. This finally explains everything!<br><br>It's worth pointing out that this only happened because of the specific way min() and max() happened to be implemented in the library I was using. It is left as an exercise for the reader to consider what the results would have been for the equally valid, and you'd think <strong>completely identical</strong>:<br><pre>max = ( gamma &gt; max ) ? gamma : max;
min = ( gamma &lt; min ) ? gamma : min;
</pre>or a number of other possible alternatives such as using the SSE min/max assembly intrinsics.<br><br>Oh, and the actual bugfix - the solution to all this? Very simple - just clamp the result of the YUV-&gt;RGB conversion to 0.0 to 1.0, and a nice chunky comment block about WHY.</div>
<div class=tagClear></div>
</div><div class=tiddler id=tiddlerMemory_stacks_and_more_resizable_arrays refresh=tiddler tags="Blog Coding DMT" tiddler="Memory stacks and more resizable arrays" template=ViewTemplate>
<div class=toolbar role=navigation><a href=https://tomforsyth1000.github.io/blog.wiki.html title="Close this tiddler" class="button command_closeTiddler" commandname=closeTiddler tiddler="Memory stacks and more resizable arrays">close</a><a href=https://tomforsyth1000.github.io/blog.wiki.html title="Close all other tiddlers" class="button command_closeOthers" commandname=closeOthers tiddler="Memory stacks and more resizable arrays">close others</a><a href=https://tomforsyth1000.github.io/blog.wiki.html title="View the source of this tiddler" class="button command_editTiddler defaultCommand" commandname=editTiddler tiddler="Memory stacks and more resizable arrays">view</a><a href=https://tomforsyth1000.github.io/blog.wiki.html title="Show additional commands" class="button moreCommand">more</a><span class=moreCommand style=display:none></span></div>
<div class=title>Memory stacks and more resizable arrays</div>
<div class=subtitle><span><a href=https://tomforsyth1000.github.io/blog.wiki.html title="TomForsyth - TomForsyth, 2006/4/12 上午11:10:00" class="tiddlyLink tiddlyLinkExisting" refresh=link tiddlylink=TomForsyth>TomForsyth</a></span>, <span>25 April 2015</span> (<span>created</span> <span>24 April 2015</span>)</div>
<div class="tagging sf-hidden"></div>
<div class=tagged><ul><li class=listTitle>tags: <li><a href=https://tomforsyth1000.github.io/blog.wiki.html title="Show tiddlers tagged with 'Blog'" class=button tag=Blog tiddler="Memory stacks and more resizable arrays">Blog</a></li> <li><a href=https://tomforsyth1000.github.io/blog.wiki.html title="Show tiddlers tagged with 'Coding'" class=button tag=Coding tiddler="Memory stacks and more resizable arrays">Coding</a></li> <li><a href=https://tomforsyth1000.github.io/blog.wiki.html title="Show tiddlers tagged with 'DMT'" class=button tag=DMT tiddler="Memory stacks and more resizable arrays">DMT</a></ul></div>
<div class=viewer>This is another in the series of posts where I discuss things that are really common and well-known inside the games industry, but which don't seem to be well-documented outside it, and may be useful to people who have learned to code and are now starting on some larger projects. As always with these, there are loads of different ways to do things, and there's no "always right" answer, so feel free to tailor them to your specific situation.<br><br><br>My game world mechanics are now far enough along that I'm trying bigger worlds. This leads to two obvious problems - memory and performance. After a bunch of neat algorithmic stuff which I'll write up in good time, both were still annoyingly poor. In particular, loading, saving and even quitting the game was annoyingly slow. Quitting the game took up to 90 seconds on a large world even in release build! What could it be?<br><br>The answer was memory allocations, and the lion's share of that time was in the C runtime (CRT) debug heap. Every time you run under the debugger (release or debug build), it hooks your allocations and does things like fill new allocations with 0xCDCDCDCD, and on free it checks you haven't scribbled off the end. This is great and catches some otherwise really hard-to-find bugs, but costs performance.<br><br>You can turn it off if you really need to, but I prefer not to. Finding evil scribblers or helping find uninitialized data is really useful, but I find the performance hit also emphasizes when you're doing way too much memory management and burning performance. It's much better to know about the problem early than to hide it and discover it late in the day. And it did indeed help me find the problem! So let's fix it now, rather than wait until the code is so complex that doing something as fundamental as changing memory allocation strategies is too terrifying to contemplate.<br><br>It turns out the reason I'm doing so much memory allocation and freeing is due to two patterns that will crop up many times in many projects. It's really no surprise to see them here, and I always knew I'd have to address this eventually. Now is a good a time as any.<br><br><strong>Fixed-size block pools, aka "Memory Stacks"</strong><br><br>Every object in the game - a tree, a puddle of water, a rock, and so on - is in a single struct called a MapObject. Some special objects need more specialized storage for more data, such as dwarves and trains, and they have pointers to optional data structures hanging off MapObjects. But the vast majority of things in the world share this one structure. And of course as things move around - trees grow fruit, the fruit falls on the ground then becomes a seed and then a tree, rain falls and forms puddles, puddles merge to form water that flows - there's a lot of allocation and freeing of these structures. But there's really no need to return this data to the general heap all the time - these objects comprise the majority of memory in the game, and it's unlikely that I'll need a ton of memory at some point when there ISN'T also a ton of objects in the world.<br><br>The solution is to keep a special pool of just these fixed-size objects - of just MapObjects. These have lots of names, but I call them "memory stacks" because the free items are kept in a LIFO stack. (the words "pool" "heap" "stack" and "arena" in theory have specific technical meanings, but in practice everyone means a completely different specific thing by them, and even dusty old textbooks disagree, so the nomenclature is a complete mess)<br><br>The first item in the free stack is pointed to by a global inside the MapObject class:<br><pre>    static MapObject *g_pFirstFreeObject;
</pre>When I "free" a MapObject, instead of calling free() or delete(), instead I push it onto the stack like so:<br><pre>    *((MapObject**)this) = g_pFirstFreeObject;
    g_pFirstFreeObject = this;
</pre>...that is, I reuse the first 4/8 bytes of my now-unused MapObject memory as a pointer to the next item in the free heap.<br><br>To "allocate" a new MapObject is usually the reverse - return the top of the stack, and move the top-of-stack pointer down the linked list.<br><pre>    if ( g_pFirstFreeObject == NULL )
    {
        ...allocate some more...
    }

    MapObject *pObj = g_pFirstFreeObject;
    ASSERT ( pObj != NULL );
    g_pFirstFreeObject = *((MapObject**)g_pFirstFreeObject);
</pre>The details of "allocate some more" vary according to your taste, and right now I'm just being greedy and grabbing another chunk of (<code>PoolBlockAllocCount</code> == 256), with no attempt to be able to recover the data in the future and actually free it. I can change this later, since it's now hidden from the rest of the code. So the full allocation routine is as follows:<br><pre>    if ( g_pFirstFreeObject == NULL )
    {
        char *pMemBlock = (char*)malloc ( sizeof(MapObject) * PoolBlockAllocCount );
        g_pFirstFreeObject = (MapObject*)pMemBlock;
        for ( int i = 0; i &lt; PoolBlockAllocCount-1; i++ )
        {
            char *pNextBlock = pMemBlock + sizeof(MapObject);
            *((MapObject**)pMemBlock) = (MapObject*)pNextBlock;
            pMemBlock = pNextBlock;
        }
        *(MapObject**)pMemBlock = NULL;    // end of the linked list of free objects
        g_TotalNumObjectsAllocated += PoolBlockAllocCount;     // just for debug information
    }

    MapObject *pObj = g_pFirstFreeObject;
    ASSERT ( pObj != NULL );
    g_pFirstFreeObject = *((MapObject**)g_pFirstFreeObject);
</pre><br>Note that recovering this memory later is tricky - you'd need to look at each chunk of 256 objects and search for them all on the free stack. If you find them, unlink them all and only then can you actually free() that chunk. In my case that's far more effort than I'm willing to put in right now, and I'm unlikely to need to recover the memory.<br><br>I could also add debugging features just like the CRT, so that I write 0xCDCDCDCD when I pop new MapObjects off the free stack, and write 0xDDDDDDDD to them when I push them back on the free stack. But I haven't had any scribbler problems with MapObject-related code, so it seems low-priority. I can do this later if I need to.<br><br>This helps in four ways:<br>1. I never free() this memory, so the perf hit from that is gone.<br>2. Most of the malloc() calls now just happen at start of day rather than every turn, so that perf his is almost gone.<br>3. When I do malloc() more, I do so in big blocks of 256 at a time, so it's called far less frequently.<br>4. When you malloc() any chunk of memory, there's some extra memory used inside the allocator to track that block. Doing 256 fewer allocations means there's much less of that overhead, so less total memory is used for a given map size.<br><br>So this was a nice win. On highly dynamic scenes (floods, rain, landslides) where there's a lot of MapObjects being created and freed, I get a decent perf win. Also, on larger maps the memory saving is handy - it's only about 5%, but every little helps.<br><br>This technique can be used for any fixed-size block, and usually you'll have a separate heap for each size of block, and there's a few other things in the game I might apply this method to later. One standard thing everyone uses these for first in a game are particle systems, since the number of those can bounce up and down dramatically in just a few frames, but they're all pretty tiny. But I don't have any particles in this game yet (which is a total pixel-porn fail, I know), so that's yet to come. And as it turned out, a much bigger win came from the second very common data structure:<br><br><strong>Revisiting resizable arrays</strong><br><br>I've talked about these before in my post on <a href=https://tomforsyth1000.github.io/blog.wiki.html title="Resizable arrays without using STL - TomForsyth, 2014/2/16 下午2:13:00" class="tiddlyLink tiddlyLinkExisting" refresh=link tiddlylink="Resizable arrays without using STL">Resizable arrays without using STL</a>. And I use them all over the place, and they're great. The specific place I use it most is that each hex in the world has a list of pointers to the MapObjects in that hex. Each hex can have many objects in it at once, for example a single hex can contain a tree, a dwarf, a log of wood and a puddle of water all at the same time. Hexes that are store-rooms can contain tens or hundreds of objects. That's why I need a resizable list of pointers.<br><br>The thing is that 99% of my hexes don't contain multiple things - they contain either nothing, or a bit of dirt/rock/sand, or a bit of water. And 0.9999% of the remainder contain maybe only two or three items. As noted in the other post, my resizable arrays have a reserved size and a used size that can be different, and a pointer to the allocated list itself. It looks like this:<br><pre>template &lt;class T&gt;
class ArbitraryList
{
    int iReservedSize;          // The current reserved size of the list.
    int iSize;                  // The current size of the list.
    T   *pT;                    // The list.
</pre>...where T in this case is (MapObject*), i.e. pT points to an array of pointers. The memory that pT references needs to be a separate allocation so I can resize it if I need a bigger array.<br><br>Having a separate used-size and reserved-size means I start the array off at 4 pointers in size, so when an object moves from one hex to another, although the used size might change from 1 to 2, I'm not resizing the array itself, that remains 4 pointers long. But nevertheless every hex on the map that has anything at all in it not only has the ArbitraryList object inside it, it also has that allocated block of memory pointed to by pT, and that is a call to the allocator, and a memory-tracking overhead, just to (in the usual case) get space for 4 pointers.<br><br>The change I made to reduce this cost is to have a small amount of space pre-reserved inside the ArbitraryList structure itself - it gains one new member:<br><pre>template &lt;class T&gt;
class ArbitraryList
{
    T   Static[PreallocSize];   // pT may point to the start of this.
    int iReservedSize;          // The current reserved size of the list.
    int iSize;                  // The current size of the list.
    T   *pT;                    // The list.
</pre>The Static[] array is new, and is a place to store data if the list is small. Previously, at start of day pT=NULL and iReservedSize=0. Now, pT=Static and iReservedSize=PreallocSize. Almost all the list-manipulation functions don't know or care - they just indirect off pT as usual. If we ever need to resize the allocated list (either up or down), all we need to do is instead of always calling free(pT), we first check if pT==Static, and if it does, don't try to free that memory! When allocating space for the new list, if the new size is PreallocSize or less, instead of allocating new memory, just point pT back at Static.<br><br>But why is this a win? I just grew every list in the game by sizeof(T)*PreallocSize - isn't that a waste of memory? Well, not really. Most of the times I use a list, it has at least one item in it - very few lists are actually empty. And I already have a minimum size that I allocate that list to, to avoid constant reallocation. So almost all my lists previously had an array of that same size allocated - it was just a separate chunk of memory instead of being inline. And whenever you allocate memory, the memory manager needs to reserve a header to track that allocation, which is extra overhead. So the only time I actually waste memory is if the list is larger than PreallocSize, at which point I have that static array AND the real allocated list that pT is pointing to. But this is the uncommon case, and of course if I do have a large list, I also have a large number of things hanging off that list, so the overhead of the static array (in this case, it's the size of 4 pointers) isn't that significant. But the common case is improved in a bunch of ways:<br><br>1. When allocating the object containing the ArbitraryList, it's a single allocation, not two, so it's faster.<br>2. Similarly when freeing the object, it's only one free, not two.<br>3. Avoiding the list allocation means we avoid the memory-manager header overhead.<br>4. If the ArbitraryList is inside something that uses fixed-size object pools (see above), there's no malloc()/free() calls at all, the whole chunk just gets pushed or popped from the stack of free objects.<br><br>There are lots of extra enhancements you can make. If zero-sized lists are a common thing and the static array is too much of a memory hit, you could combine the two techniques. Instead of each list having a static array inside it, have a fixed-size-block heap of sizeof(T)*PreallocSize. Then each list can be in three states:<br><br>If iReservedSize == 0, pT is NULL.<br>If iReservedSize == PreallocSize, pT points to a fixed-size-block from that heap.<br>If iReservedSize &gt; PreallocSize, pT points to a actual allocated memory.<br><br>Alternatively you could hide iReservedSize inside the Static[] block, since you never need both at once. Which saves 4 bytes, but makes the logic and debugging trickier.<br><br>However do realize that good memory managers also have things like fixed-size-block heaps internally, so don't get too complex or you're just replicating work - and they've probably done far more analysis than you have on memory allocation patterns. The reason to do simple things like these two techniques is because you have implicit semantic knowledge at compile time that a general allocator can't get at, or can take assumptions (such as never needing to aggressively free up MapObject memory) that a general system can't.<br><br>The end result of both these bits of work was that a large map roughly halved in memory footprint, which is pretty dramatic, and the time taken to delete everything in the world dropped from 90 seconds to 10 (which still sounds a lot, but it's using a very generic routine that maintains the consistency of the world after removing every single object, which is obviously a waste when just destroying the entire thing).</div>
<div class=tagClear></div>
</div><div class=tiddler id=tiddlerPremultiplied_alpha_part_2 refresh=tiddler tags="Blog Rendering Alphablending Toolchain VideoCards OffendOMatic" tiddler="Premultiplied alpha part 2" template=ViewTemplate>
<div class=toolbar role=navigation><a href=https://tomforsyth1000.github.io/blog.wiki.html title="Close this tiddler" class="button command_closeTiddler" commandname=closeTiddler tiddler="Premultiplied alpha part 2">close</a><a href=https://tomforsyth1000.github.io/blog.wiki.html title="Close all other tiddlers" class="button command_closeOthers" commandname=closeOthers tiddler="Premultiplied alpha part 2">close others</a><a href=https://tomforsyth1000.github.io/blog.wiki.html title="View the source of this tiddler" class="button command_editTiddler defaultCommand" commandname=editTiddler tiddler="Premultiplied alpha part 2">view</a><a href=https://tomforsyth1000.github.io/blog.wiki.html title="Show additional commands" class="button moreCommand">more</a><span class=moreCommand style=display:none></span></div>
<div class=title>Premultiplied alpha part 2</div>
<div class=subtitle><span><a href=https://tomforsyth1000.github.io/blog.wiki.html title="TomForsyth - TomForsyth, 2006/4/12 上午11:10:00" class="tiddlyLink tiddlyLinkExisting" refresh=link tiddlylink=TomForsyth>TomForsyth</a></span>, <span>18 March 2015</span> (<span>created</span> <span>18 March 2015</span>)</div>
<div class="tagging sf-hidden"></div>
<div class=tagged><ul><li class=listTitle>tags: <li><a href=https://tomforsyth1000.github.io/blog.wiki.html title="Show tiddlers tagged with 'Blog'" class=button tag=Blog tiddler="Premultiplied alpha part 2">Blog</a></li> <li><a href=https://tomforsyth1000.github.io/blog.wiki.html title="Show tiddlers tagged with 'Rendering'" class=button tag=Rendering tiddler="Premultiplied alpha part 2">Rendering</a></li> <li><a href=https://tomforsyth1000.github.io/blog.wiki.html title="Show tiddlers tagged with 'Alphablending'" class=button tag=Alphablending tiddler="Premultiplied alpha part 2">Alphablending</a></li> <li><a href=https://tomforsyth1000.github.io/blog.wiki.html title="Show tiddlers tagged with 'Toolchain'" class=button tag=Toolchain tiddler="Premultiplied alpha part 2">Toolchain</a></li> <li><a href=https://tomforsyth1000.github.io/blog.wiki.html title="Show tiddlers tagged with 'VideoCards'" class=button tag=VideoCards tiddler="Premultiplied alpha part 2">VideoCards</a></li> <li><a href=https://tomforsyth1000.github.io/blog.wiki.html title="Show tiddlers tagged with 'OffendOMatic'" class=button tag=OffendOMatic tiddler="Premultiplied alpha part 2">OffendOMatic</a></ul></div>
<div class=viewer>A long time ago I wrote a post on why <a href=https://tomforsyth1000.github.io/blog.wiki.html title="Premultiplied alpha - TomForsyth, 2015/3/18 下午7:26:00" class="tiddlyLink tiddlyLinkExisting" refresh=link tiddlylink="Premultiplied alpha">Premultiplied alpha</a> was the right way to do blending. It's worth a re-read, so go have a look. The summary is that PMA does two important things:<br><br>1. It makes texture filtering and mipmapping work correct even when the textures have an alpha channel, and avoids black/purple edges.<br><br>2. It makes alpha-blending associative. That is, ((A blend B) blend C) == (A blend (B blend C)). This is an important properly of many modern engines, especially when working with particle systems, impostor rendering, and some varieties of deferred rendering.<br><br>It's arguable that these are actually the same property expressed different ways, but in terms of how they are implemented in the hardware, they're still two very different bits of the chip and worth considering separately. And the fact that they're at "opposite ends" of the pipeline - one in texture filtering, the other in alpha-blending - actually has some interesting properties. In fact there's a bunch of places in the overall gamedev asset-to-pixels production pipeline that you can think of as being either traditional "lerp" blending, or using PMA. And to an extent you can mix and match them and convert from one to the other. There's lots of other styles of blending of course, notably additive blending (and PMA combines both lerp and additive blending in a single operation - see the other post for details), but just put that aside for the moment as it complicates this particular discussion.<br><br>Converting from lerp to PMA is pretty simple - you just multiply the RGB channels by the alpha channel. Converting the other way is harder, since you need to divide the RGB channels by the alpha. Obviously, two bad things can happen. The first is that alpha could be zero, in which case the new RGB values are undefined. Which wouldn't be a problem as any actual use of lerp blending then zeros them again - unless you want to filter them with other RGB neighbours, in which case it does matter - and this is exactly the problem with filtering non-PMA data mentioned above. The other problem is that the new RGB values can be bigger than 1.0, which is a problem if you want to store them in a limited-precision buffer. This happens when the data you have is expressing a blend that isn't just a lerp - it was more like an additive operation. In this case it's unsurprising that you have problems expressing it as a lerp! For both those reasons, let's just say that PMA-&gt;lerp conversion is full of problems, and only consider the lerp-&gt;PMA conversion.<br><br>So, the areas of the production and rendering pipeline to consider are the following:<br><br>1. Texture authoring in a paint package.<br><br>2. Export via various processes to the final shipping images on a disk (or card or streamed over the internet or whatever).<br><br>3. The textures stored in memory after being loaded off disk at runtime. These will be sampled &amp; filtered by the GPU's texture units.<br><br>4. The math inside the shader pipeline.<br><br>5. The alpha-blend unit that blends shaded pixels with the rendertarget buffer.<br><br>In current pipelines, it turns out to be annoying and difficult to author data directly in PMA format. Paint packages don't really understand it, many artists have a tough time getting their heads around it, and it's just generally an uphill struggle, so in practice phase #1 almost always results in lerp-blended format data.<br><br>Many development studios then convert to PMA format almost immediately in their internal toolchain, and everything from stage #2 onwards is PMA. This is a fantastic way to do things, and gives you all the advantages of PMA - good filtering, good compression, a flexible rendering architecture, and everything is consistent and you never get confused about whether you're dealing with lerp or PMA data. This is the recommended way to do things if you can. However, there are some cases where this is not possible.<br><br><strong>When disk images might not be PMA</strong><br><br>The most obvious case is where for whatever reason you don't have a conversion step in the middle. The most common example of this is user-generated content, where users can supply their own textures and import them straight into the engine. Now you need to keep track of which image formats are PMA and which are lerp. Sometimes this can be as simple as a naming or format convention - for example maybe all DDS files are PMA because they've been through the asset-processing pipeline, but all TGAs are lerp because they've come straight out of a paint package. The other reason to do this is so that artists can skip a preprocessing step during development and get textures directly from art package to screen as quickly as possible (this is a good thing!). Either way, when you load a file, you may need to convert it to PMA after loading, and still keep the rest of the pipeline (#3 onwards) fully PMA. This is still good - it means most of the pipeline is still all PMA, and only the file loaders need to know about lerp blending. And that's fine because anything dealing with file formats is generally pretty messy anyway.<br><br><strong>When textures might not be PMA</strong><br><br>But there's cases where that won't work either. Sean Barrett raised this problem in a tweet that started this recent discussion - he has a texture with an alpha channel, but he's not using alpha blending, he's using alpha test instead - presumably against a value such as 0.5. In this case, he's after a nice clean "cutout" look with the full texture colour right up to the edge where the alpha-test happens. But he also wants texture filtering to get round curves on that alpha-test edge, rather than a pixellated look. If he does the PMA preprocessing, this will turn the texels off the edge to RGB=0, and that will be filtered inwards, turning his edges black, or at least darker. So this is a reason not to automatically PMA textures - because what the alpha channel represents is not the concept of blending, it's something else. Of course we have this all over the place in modern engines - we pack lots of arbitrary data in the four channels known as RGBA or XYZW that are nothing to do with colours, positions or directions. But in this case it's still slightly surprising because alpha test is a similar concept to blending.<br><br>There is another case where this can happen which I came across a while back. The texture was an image with alpha-blending data, but in some cases it would be used with the blending, and others it would be used without. Converting it to PMA would have broken the non-blended case, since all the blended areas would be darkened or black. Note that here the first advantage of PMA format textures - that you don't get weird edges when the texture is filtered - doesn't matter here because the source art has already been specifically authored to make sure those alpha=0 pixels still contain sensible data when alpha-blending is turned off.<br><br>One solution to this dual-mode problem would be to create two copies of the texture - one converted to PMA and used for the blending case, and the other left alone and used when not blending (we could even not store the alpha channel at all, since it's not used). But that duplication is a waste of texture memory, and it complicates some asset-handling systems to have two copies of a texture around. The alternative - of storing it just once in lerp format and having a flag that warns me of that - is also complexity, but it's a far simpler thing to deal with. So that's a reason for stage #3 to not be pure PMA - to have some textures in PMA format and others in lerp format.<br><br>Even so, we can still keep most of stage #4 and #5 in pure PMA form by changing the shaders a little. After sampling a lerp-form texture, we convert to PMA form simply by multiplying RGB by the alpha value using shader code. Three multiplies is really cheap on even mobile hardware, so this isn't a big deal. Then the rest of the shader math is all done assuming PMA data, and this may include compositing with other textures, and those textures can be PMA or lerp as long as we also convert those appropriately after sampling. There's obviously complication that we need to do the multiplies or not depending on the source texture type, and this can mean a significant growth in the number of shaders, but many engines already have to deal with this combinatorial explosion for other reasons anyway, so it's just one more option to include in that system. Note we've now lost the nice filtering properties of PMA textures, so the folks authoring them need to remember the old rules about edges and mipmaps.<br><br><strong>And the last two stages...</strong><br><br>But maybe there's some funky math in the shader that does require lerp data. I can't really think of an example, but never say never. Even then, it's obvious the RGB multiply could be done after that in the shader, and we still preserve the alpha-blend stage #5 in PMA form, and so still retain the nice associativity property, meaning we can mix and match shaders in a scene and not worry that some are using PMA blending and some are not.<br><br>If even adding that final multiply causes problems (maybe because of shader combinations), then we can change the alpha-blend mode to cope. As a reminder, PMA blending performs this operation to all four channels - sometimes called ONE:INVSRCALPHA blending:<br><pre>for x=RGBA: Rendertarget(x) := Shader(x)*1 + Rendertarget(x)*(1-Shader(A))
</pre>It is important to note that the specified blending happens on the alpha channel as well, otherwise we lose the associativity property - the framebuffer alpha result is important because it can be used later to blend the framebuffer onto other things with PMA.<br><br>But if the shader doesn't want to multiply RGB by alpha before it sends it to the alpha-blend unit to do PMA blending, we could get the alpha-blend unit to do it for us. We just need to change the blending equation to this:<br><pre>for x=RGB: Rendertarget(x) := Shader(x)*Shader(A) + Rendertarget(x)*(1-Shader(A))
for x=A:   Rendertarget(x) := Shader(x)*1         + Rendertarget(x)*(1-Shader(A))
</pre>Note the alpha channel didn't change! That's important. So this uses SRCALPHA:INVSRCALPHA blending for the RGB channels, in other words standard lerp blending. But it retains the PMA blending for the alpha channel. To do this uses a little-known feature of graphics cards usually called "separate alpha blending". It may be little-known, but it's been around a long time, and it's required for DirectX10 cards, so it's basically ubiquitous on desktop.<br><br>DX9: set D3DRS_SEPARATEALPHABLENDENABLE to true and set D3DRS_SRCBLENDALPHA / D3DRS_DESTBLENDALPHA appropriately.<br>DX10: specify the RGB and alpha blends separately in D3D10_BLEND_DESC<br>DX11: specify the RGB and alpha blends separately in D3D11_RENDER_TARGET_BLEND_DESC1<br>OpenGL: depending on version, use GL_EXT_blend_func_separate or the more modern ~glBlendFuncSeparate()<br><br>So there's lots of options for adopting PMA filtering and blending, and ways to adopt it bit by bit to satisfy some of the more traditional parts of the authoring pipeline. There's even a few cases where you actually don't want to force the entire pipeline to be all PMA all the time. But those are the exceptions rather than the defaults, and modern engines really should be using PMA as standard, or at the very least giving you the option. It's just the right thing to do and removes so many annoying problems with translucency. It's now thirty years since Porter &amp; Duff's paper - let's get the job done properly.</div>
<div class=tagClear></div>
</div><div class=tiddler id=tiddlerTexture_coordinate_origin refresh=tiddler tags="Blog Rendering VideoCards Toolchain" tiddler="Texture coordinate origin" template=ViewTemplate>
<div class=toolbar role=navigation><a href=https://tomforsyth1000.github.io/blog.wiki.html title="Close this tiddler" class="button command_closeTiddler" commandname=closeTiddler tiddler="Texture coordinate origin">close</a><a href=https://tomforsyth1000.github.io/blog.wiki.html title="Close all other tiddlers" class="button command_closeOthers" commandname=closeOthers tiddler="Texture coordinate origin">close others</a><a href=https://tomforsyth1000.github.io/blog.wiki.html title="View the source of this tiddler" class="button command_editTiddler defaultCommand" commandname=editTiddler tiddler="Texture coordinate origin">view</a><a href=https://tomforsyth1000.github.io/blog.wiki.html title="Show additional commands" class="button moreCommand">more</a><span class=moreCommand style=display:none></span></div>
<div class=title>Texture coordinate origin</div>
<div class=subtitle><span><a href=https://tomforsyth1000.github.io/blog.wiki.html title="TomForsyth - TomForsyth, 2006/4/12 上午11:10:00" class="tiddlyLink tiddlyLinkExisting" refresh=link tiddlylink=TomForsyth>TomForsyth</a></span>, <span>27 February 2015</span> (<span>created</span> <span>27 February 2015</span>)</div>
<div class="tagging sf-hidden"></div>
<div class=tagged><ul><li class=listTitle>tags: <li><a href=https://tomforsyth1000.github.io/blog.wiki.html title="Show tiddlers tagged with 'Blog'" class=button tag=Blog tiddler="Texture coordinate origin">Blog</a></li> <li><a href=https://tomforsyth1000.github.io/blog.wiki.html title="Show tiddlers tagged with 'Rendering'" class=button tag=Rendering tiddler="Texture coordinate origin">Rendering</a></li> <li><a href=https://tomforsyth1000.github.io/blog.wiki.html title="Show tiddlers tagged with 'VideoCards'" class=button tag=VideoCards tiddler="Texture coordinate origin">VideoCards</a></li> <li><a href=https://tomforsyth1000.github.io/blog.wiki.html title="Show tiddlers tagged with 'Toolchain'" class=button tag=Toolchain tiddler="Texture coordinate origin">Toolchain</a></ul></div>
<div class=viewer>The other day <a class=externalLink href=https://twitter.com/tom_forsyth/status/570841117727420416 title="External link to https://twitter.com/tom_forsyth/status/570841117727420416" target=_blank>I asked</a><br><blockquote>Quick straw poll - UV(0,0) at top-left of texture bitmap or bottom-left? (and yes I know some APIs are switchable - choose!)<br></blockquote><br>Direct reply results:<br>33 for top-left<br>12 for bottom-left<br><br>Favourites/retweets of direct replies (I'm far too lazy to remove duplicates, so take with a pinch of salt): <br>11 for top-left<br>5 for bottom-left<br><br>So there you have it - a victory for top-left, and even if I disagreed and got out the Veto Pen it would still be motion carried. So say we all.<br><br>A few of the interesting supporting/dissenting/hatstand comments:<br><br>Oliver Franzke @p1xelcoder<br><blockquote>Definitely top-left. It makes image debugging in Photoshop much easier.<br></blockquote><br>Richard Mitton ‏@grumpygiant<br><blockquote>Top-left of course, everything OpenGL does is backwards and wrong :)<br></blockquote><br>David Farrell ‏@Nosferalatu<br><blockquote>Top left. I still imagine there's an electron gun that begins each frame at the top left corner.<br></blockquote><br>Jon Watte ‏@jwatte<br><blockquote>Some people think Direct3D and OpenGL differ on this, which is nonsense.<br></blockquote><br>Joel de Vahl ‏@joeldevahl<br><blockquote>I think we should learn from economics and swap x and y.<br></blockquote><br>Philip Rideout ‏@prideout<br><blockquote>bottom-left, because Descartes was French, and the French know their shit.<br></blockquote><br>Tim Sweeney @TimSweeneyEpic<br><blockquote>Top left if user language is English, top right if Chinese, Arabic, or Hebrew.<br></blockquote><br>Kevin Francis ‏@pinbender<br><blockquote>Top-left, because if it were consistent, it would be easy, and then nobody would pay us to do this stuff.<br></blockquote><br>And there were also a couple of votes for "center", i.e. they're the same thing as NDC, which is actually a pretty reasonable answer to be honest. Though it still ducks the question of whether positive V is up or down, just like NDC, and people have just the same arguments about that.<br><br>There's also the question of what you even mean by "top" of the image - is it the first byte or the last? That's relatively easy - there are many file formats that allow you to switch (BMP and TGA go bottom-up by default, but can be switched), but the file formats that do not allow you to switch (e.g. PNG) are top-down only - the first byte is at the top-left of the image when displayed on-screen.</div>
<div class=tagClear></div>
</div><div class=tiddler id=tiddlerAll_blog_entries refresh=tiddler tags=Blog tiddler="All blog entries" template=ViewTemplate>
<div class=toolbar role=navigation><a href=https://tomforsyth1000.github.io/blog.wiki.html title="Close this tiddler" class="button command_closeTiddler" commandname=closeTiddler tiddler="All blog entries">close</a><a href=https://tomforsyth1000.github.io/blog.wiki.html title="Close all other tiddlers" class="button command_closeOthers" commandname=closeOthers tiddler="All blog entries">close others</a><a href=https://tomforsyth1000.github.io/blog.wiki.html title="View the source of this tiddler" class="button command_editTiddler defaultCommand" commandname=editTiddler tiddler="All blog entries">view</a><a href=https://tomforsyth1000.github.io/blog.wiki.html title="Show additional commands" class="button moreCommand">more</a><span class=moreCommand style=display:none></span></div>
<div class=title>All blog entries</div>
<div class=subtitle><span><a href=https://tomforsyth1000.github.io/blog.wiki.html title="TomForsyth - TomForsyth, 2006/4/12 上午11:10:00" class="tiddlyLink tiddlyLinkExisting" refresh=link tiddlylink=TomForsyth>TomForsyth</a></span>, <span>16 December 2019</span> (<span>created</span> <span>29 October 2007</span>)</div>
<div class="tagging sf-hidden"></div>
<div class=tagged><ul><li class=listTitle>tags: <li><a href=https://tomforsyth1000.github.io/blog.wiki.html title="Show tiddlers tagged with 'Blog'" class=button tag=Blog tiddler="All blog entries">Blog</a></ul></div>
<div class=viewer>The rest have been removed from the front page to save space. Here are all my blog entries in chronological order:<br><br><a href=https://tomforsyth1000.github.io/blog.wiki.html title="VR optics and why IPD means too many things - TomForsyth, 2019/12/16 上午11:35:00" class="tiddlyLink tiddlyLinkExisting" refresh=link tiddlylink="VR optics and why IPD means too many things">VR optics and why IPD means too many things</a><br><a href=https://tomforsyth1000.github.io/blog.wiki.html title="Why didn't Larrabee fail? - TomForsyth, 2016/8/16 下午1:24:00" class="tiddlyLink tiddlyLinkExisting" refresh=link tiddlylink="Why didn't Larrabee fail?">Why didn't Larrabee fail?</a><br><a href=https://tomforsyth1000.github.io/blog.wiki.html title="The sRGB learning curve - TomForsyth, 2015/12/1 上午8:21:00" class="tiddlyLink tiddlyLinkExisting" refresh=link tiddlylink="The sRGB learning curve">The sRGB learning curve</a><br><a href=https://tomforsyth1000.github.io/blog.wiki.html title="NaNs cause the craziest bugs - TomForsyth, 2015/9/10 下午11:28:00" class="tiddlyLink tiddlyLinkExisting" refresh=link tiddlylink="NaNs cause the craziest bugs">NaNs cause the craziest bugs</a><br><a href=https://tomforsyth1000.github.io/blog.wiki.html title="Memory stacks and more resizable arrays - TomForsyth, 2015/4/25 上午3:17:00" class="tiddlyLink tiddlyLinkExisting" refresh=link tiddlylink="Memory stacks and more resizable arrays">Memory stacks and more resizable arrays</a><br><a href=https://tomforsyth1000.github.io/blog.wiki.html title="Premultiplied alpha part 2 - TomForsyth, 2015/3/18 下午7:27:00" class="tiddlyLink tiddlyLinkExisting" refresh=link tiddlylink="Premultiplied alpha part 2">Premultiplied alpha part 2</a><br><a href=https://tomforsyth1000.github.io/blog.wiki.html title="Texture coordinate origin - TomForsyth, 2015/2/27 下午1:59:00" class="tiddlyLink tiddlyLinkExisting" refresh=link tiddlylink="Texture coordinate origin">Texture coordinate origin</a><br><a href=https://tomforsyth1000.github.io/blog.wiki.html title="Elite Dangerous on the Rift - TomForsyth, 2016/8/16 上午1:16:00" class="tiddlyLink tiddlyLinkExisting" refresh=link tiddlylink="Elite Dangerous on the Rift">Elite Dangerous on the Rift</a><br><a href=https://tomforsyth1000.github.io/blog.wiki.html title="Display rate, rendering rate, and persistence - TomForsyth, 2014/10/6 下午1:38:00" class="tiddlyLink tiddlyLinkExisting" refresh=link tiddlylink="Display rate, rendering rate, and persistence">Display rate, rendering rate, and persistence</a><br><a href=https://tomforsyth1000.github.io/blog.wiki.html title="Wrangling enums - TomForsyth, 2016/8/16 上午1:23:00" class="tiddlyLink tiddlyLinkExisting" refresh=link tiddlylink="Wrangling enums">Wrangling enums</a><br><a href=https://tomforsyth1000.github.io/blog.wiki.html title="Simple Perforce setup for the solo coder - TomForsyth, 2014/2/17 上午3:54:00" class="tiddlyLink tiddlyLinkExisting" refresh=link tiddlylink="Simple Perforce setup for the solo coder">Simple Perforce setup for the solo coder</a><br><a href=https://tomforsyth1000.github.io/blog.wiki.html title="Even more precision - TomForsyth, 2014/2/5 上午1:42:00" class="tiddlyLink tiddlyLinkExisting" refresh=link tiddlylink="Even more precision">Even more precision</a><br><a href=https://tomforsyth1000.github.io/blog.wiki.html title="Resizable arrays without using STL - TomForsyth, 2014/2/16 下午2:13:00" class="tiddlyLink tiddlyLinkExisting" refresh=link tiddlylink="Resizable arrays without using STL">Resizable arrays without using STL</a><br><a href=https://tomforsyth1000.github.io/blog.wiki.html title="Polynomial interpolation - TomForsyth, 2013/9/19 下午12:56:00" class="tiddlyLink tiddlyLinkExisting" refresh=link tiddlylink="Polynomial interpolation">Polynomial interpolation</a><br><a href=https://tomforsyth1000.github.io/blog.wiki.html title="How not to interview - TomForsyth, 2013/5/20 上午3:22:00" class="tiddlyLink tiddlyLinkExisting" refresh=link tiddlylink="How not to interview">How not to interview</a><br><a href=https://tomforsyth1000.github.io/blog.wiki.html title="Sparse-world storage formats - TomForsyth, 2013/6/10 下午1:23:00" class="tiddlyLink tiddlyLinkExisting" refresh=link tiddlylink="Sparse-world storage formats">Sparse-world storage formats</a><br><a href=https://tomforsyth1000.github.io/blog.wiki.html title="Matrix maths and names - TomForsyth, 2012/9/17 上午6:55:00" class="tiddlyLink tiddlyLinkExisting" refresh=link tiddlylink="Matrix maths and names">Matrix maths and names</a><br><a href=https://tomforsyth1000.github.io/blog.wiki.html title="New Job - TomForsyth, 2012/6/24 上午9:24:00" class="tiddlyLink tiddlyLinkExisting" refresh=link tiddlylink="New Job">New Job</a><br><a href=https://tomforsyth1000.github.io/blog.wiki.html title="A sprintf that isn't as ugly - TomForsyth, 2011/8/9 上午3:55:00" class="tiddlyLink tiddlyLinkExisting" refresh=link tiddlylink="A sprintf that isn't as ugly">A sprintf that isn't as ugly</a><br><a href=https://tomforsyth1000.github.io/blog.wiki.html title="Saving, loading, replaying and debugging - TomForsyth, 2014/6/23 上午9:40:00" class="tiddlyLink tiddlyLinkExisting" refresh=link tiddlylink="Saving, loading, replaying and debugging">Saving, loading, replaying and debugging</a><br><a href=https://tomforsyth1000.github.io/blog.wiki.html title="StarTopia love - TomForsyth, 2011/4/21 下午6:52:00" class="tiddlyLink tiddlyLinkExisting" refresh=link tiddlylink="StarTopia love">StarTopia love</a><br><a href=https://tomforsyth1000.github.io/blog.wiki.html title="Logging, asserts and unit tests - TomForsyth, 2011/3/13 下午1:28:00" class="tiddlyLink tiddlyLinkExisting" refresh=link tiddlylink="Logging, asserts and unit tests">Logging, asserts and unit tests</a><br><a href=https://tomforsyth1000.github.io/blog.wiki.html title="Data Oriented Luddites - TomForsyth, 2011/1/1 上午2:50:00" class="tiddlyLink tiddlyLinkExisting" refresh=link tiddlylink="Data Oriented Luddites">Data Oriented Luddites</a><br><a href=https://tomforsyth1000.github.io/blog.wiki.html title="Moore's Law vs Duck Typing - TomForsyth, 2011/1/1 上午12:51:00" class="tiddlyLink tiddlyLinkExisting" refresh=link tiddlylink="Moore's Law vs Duck Typing">Moore's Law vs Duck Typing</a><br><a href=https://tomforsyth1000.github.io/blog.wiki.html title="Platform-agnostic types - TomForsyth, 2011/1/1 上午1:01:00" class="tiddlyLink tiddlyLinkExisting" refresh=link tiddlylink="Platform-agnostic types">Platform-agnostic types</a><br><a href=https://tomforsyth1000.github.io/blog.wiki.html title="Texture streaming systems with two levels of cache - TomForsyth, 2010/12/9 下午8:52:00" class="tiddlyLink tiddlyLinkExisting" refresh=link tiddlylink="Texture streaming systems with two levels of cache">Texture streaming systems with two levels of cache</a><br><a href=https://tomforsyth1000.github.io/blog.wiki.html title="Visibility and priority tests for streaming assets - TomForsyth, 2010/12/9 下午7:51:00" class="tiddlyLink tiddlyLinkExisting" refresh=link tiddlylink="Visibility and priority tests for streaming assets">Visibility and priority tests for streaming assets</a><br><a href=https://tomforsyth1000.github.io/blog.wiki.html title="Squares or hexes - TomForsyth, 2010/5/11 上午12:18:00" class="tiddlyLink tiddlyLinkExisting" refresh=link tiddlylink="Squares or hexes">Squares or hexes</a><br><a href=https://tomforsyth1000.github.io/blog.wiki.html title="Dwarf Minecart Tycoon - TomForsyth, 2010/5/11 上午12:06:00" class="tiddlyLink tiddlyLinkExisting" refresh=link tiddlylink="Dwarf Minecart Tycoon">Dwarf Minecart Tycoon</a><br><a href=https://tomforsyth1000.github.io/blog.wiki.html title="Larrabee talk roundup and media attention - TomForsyth, 2010/1/12 下午4:36:00" class="tiddlyLink tiddlyLinkExisting" refresh=link tiddlylink="Larrabee talk roundup and media attention">Larrabee talk roundup and media attention</a><br><a href=https://tomforsyth1000.github.io/blog.wiki.html title="GDC 09 - TomForsyth, 2009/4/1 下午7:55:00" class="tiddlyLink tiddlyLinkExisting" refresh=link tiddlylink="GDC 09">GDC 09</a><br><a href=https://tomforsyth1000.github.io/blog.wiki.html title="How to walk better - TomForsyth, 2009/2/16 下午5:16:00" class="tiddlyLink tiddlyLinkExisting" refresh=link tiddlylink="How to walk better">How to walk better</a><br><a href=https://tomforsyth1000.github.io/blog.wiki.html title="Larrabee ISA unveiled at GDC 2009 - TomForsyth, 2009/2/16 上午1:45:00" class="tiddlyLink tiddlyLinkExisting" refresh=link tiddlylink="Larrabee ISA unveiled at GDC 2009">Larrabee ISA unveiled at GDC 2009</a><br><a href=https://tomforsyth1000.github.io/blog.wiki.html title="CAs in cloud formation - TomForsyth, 2009/2/16 上午1:04:00" class="tiddlyLink tiddlyLinkExisting" refresh=link tiddlylink="CAs in cloud formation">CAs in cloud formation</a><br><a href=https://tomforsyth1000.github.io/blog.wiki.html title="Regular mesh vertex cache ordering - TomForsyth, 2009/2/2 下午7:36:00" class="tiddlyLink tiddlyLinkExisting" refresh=link tiddlylink="Regular mesh vertex cache ordering">Regular mesh vertex cache ordering</a><br><a href=https://tomforsyth1000.github.io/blog.wiki.html title="Siggraph Asia 2008 - TomForsyth, 2009/1/10 上午7:38:00" class="tiddlyLink tiddlyLinkExisting" refresh=link tiddlylink="Siggraph Asia 2008">Siggraph Asia 2008</a><br><a href=https://tomforsyth1000.github.io/blog.wiki.html title="Plague - TomForsyth, 2009/1/7 上午10:10:00" class="tiddlyLink tiddlyLinkExisting" refresh=link tiddlylink=Plague>Plague</a><br><a href=https://tomforsyth1000.github.io/blog.wiki.html title="Siggraph 2008 - TomForsyth, 2008/8/16 下午11:23:00" class="tiddlyLink tiddlyLinkExisting" refresh=link tiddlylink="Siggraph 2008">Siggraph 2008</a><br><a href=https://tomforsyth1000.github.io/blog.wiki.html title="ShaderX2 available for free - TomForsyth, 2008/7/19 下午10:34:00" class="tiddlyLink tiddlyLinkExisting" refresh=link tiddlylink="ShaderX2 available for free">ShaderX2 available for free</a><br><a href=https://tomforsyth1000.github.io/blog.wiki.html title="Larrabee and raytracing - TomForsyth, 2008/4/18 上午8:56:00" class="tiddlyLink tiddlyLinkExisting" refresh=link tiddlylink="Larrabee and raytracing">Larrabee and raytracing</a><br><a href=https://tomforsyth1000.github.io/blog.wiki.html title="Renderstate change costs - TomForsyth, 2008/1/28 上午7:06:00" class="tiddlyLink tiddlyLinkExisting" refresh=link tiddlylink="Renderstate change costs">Renderstate change costs</a><br><a href=https://tomforsyth1000.github.io/blog.wiki.html title="Larrabee decloak - TomForsyth, 2008/1/8 下午8:59:00" class="tiddlyLink tiddlyLinkExisting" refresh=link tiddlylink="Larrabee decloak">Larrabee decloak</a><br><a href=https://tomforsyth1000.github.io/blog.wiki.html title="Blog linkage - TomForsyth, 2008/1/1 下午9:24:00" class="tiddlyLink tiddlyLinkExisting" refresh=link tiddlylink="Blog linkage">Blog linkage</a><br><a href=https://tomforsyth1000.github.io/blog.wiki.html title="Smart coder priorities - TomForsyth, 2008/1/1 下午10:54:00" class="tiddlyLink tiddlyLinkExisting" refresh=link tiddlylink="Smart coder priorities">Smart coder priorities</a><br><a href=https://tomforsyth1000.github.io/blog.wiki.html title="Rasteriser vs Raytracer - TomForsyth, 2007/12/27 上午3:49:00" class="tiddlyLink tiddlyLinkExisting" refresh=link tiddlylink="Rasteriser vs Raytracer">Rasteriser vs Raytracer</a><br><a href=https://tomforsyth1000.github.io/blog.wiki.html title="Texture formats for faster compression - TomForsyth, 2007/10/29 上午1:04:00" class="tiddlyLink tiddlyLinkExisting" refresh=link tiddlylink="Texture formats for faster compression">Texture formats for faster compression</a><br><a href=https://tomforsyth1000.github.io/blog.wiki.html title="Knowing which mipmap levels are needed - TomForsyth, 2008/1/27 下午8:14:00" class="tiddlyLink tiddlyLinkExisting" refresh=link tiddlylink="Knowing which mipmap levels are needed">Knowing which mipmap levels are needed</a><br><a href=https://tomforsyth1000.github.io/blog.wiki.html title="SSE - TomForsyth, 2007/8/31 下午10:59:00" class="tiddlyLink tiddlyLinkExisting" refresh=link tiddlylink=SSE>SSE</a><br><a href=https://tomforsyth1000.github.io/blog.wiki.html title="Patently evil - TomForsyth, 2007/8/28 下午2:18:00" class="tiddlyLink tiddlyLinkExisting" refresh=link tiddlylink="Patently evil">Patently evil</a><br><a href=https://tomforsyth1000.github.io/blog.wiki.html title="Trilights - TomForsyth, 2007/3/22 上午9:23:00" class="tiddlyLink tiddlyLinkExisting" refresh=link tiddlylink=Trilights>Trilights</a><br><a href=https://tomforsyth1000.github.io/blog.wiki.html title="Bitangents - TomForsyth, 2007/3/22 上午6:46:00" class="tiddlyLink tiddlyLinkExisting" refresh=link tiddlylink=Bitangents>Bitangents</a><br><a href=https://tomforsyth1000.github.io/blog.wiki.html title="More vertex cache optimisation - TomForsyth, 2007/3/13 上午9:19:00" class="tiddlyLink tiddlyLinkExisting" refresh=link tiddlylink="More vertex cache optimisation">More vertex cache optimisation</a><br><a href=https://tomforsyth1000.github.io/blog.wiki.html title="Reinventing the wheel - again! - TomForsyth, 2007/3/11 上午6:50:00" class="tiddlyLink tiddlyLinkExisting" refresh=link tiddlylink="Reinventing the wheel - again!">Reinventing the wheel - again!</a><br><a href=https://tomforsyth1000.github.io/blog.wiki.html title="Shadowbuffers and shaders - TomForsyth, 2007/3/11 上午1:46:00" class="tiddlyLink tiddlyLinkExisting" refresh=link tiddlylink="Shadowbuffers and shaders">Shadowbuffers and shaders</a><br><a href=https://tomforsyth1000.github.io/blog.wiki.html title="Utah Teapot - TomForsyth, 2007/3/4 上午3:13:00" class="tiddlyLink tiddlyLinkExisting" refresh=link tiddlylink="Utah Teapot">Utah Teapot</a><br><a href=https://tomforsyth1000.github.io/blog.wiki.html title="GDC survival guide - TomForsyth, 2007/2/18 下午11:51:00" class="tiddlyLink tiddlyLinkExisting" refresh=link tiddlylink="GDC survival guide">GDC survival guide</a><br><a href=https://tomforsyth1000.github.io/blog.wiki.html title="Pixomatic slides - TomForsyth, 2007/2/7 上午6:37:00" class="tiddlyLink tiddlyLinkExisting" refresh=link tiddlylink="Pixomatic slides">Pixomatic slides</a><br><a href=https://tomforsyth1000.github.io/blog.wiki.html title="Notepad++ - TomForsyth, 2007/2/5 上午9:57:00" class="tiddlyLink tiddlyLinkExisting" refresh=link tiddlylink=Notepad++>Notepad++</a><br><a href=https://tomforsyth1000.github.io/blog.wiki.html title="More on SH - TomForsyth, 2007/2/5 上午9:35:00" class="tiddlyLink tiddlyLinkExisting" refresh=link tiddlylink="More on SH">More on SH</a><br><a href=https://tomforsyth1000.github.io/blog.wiki.html title="Licenses - TomForsyth, 2007/2/5 上午9:28:00" class="tiddlyLink tiddlyLinkExisting" refresh=link tiddlylink=Licenses>Licenses</a><br><a href=https://tomforsyth1000.github.io/blog.wiki.html title="Added some hindsights and notes on Spherical Harmonics - TomForsyth, 2007/1/17 上午9:33:00" class="tiddlyLink tiddlyLinkExisting" refresh=link tiddlylink="Added some hindsights and notes on Spherical Harmonics">Added some hindsights and notes on Spherical Harmonics</a><br><a href=https://tomforsyth1000.github.io/blog.wiki.html title="Cellular Automata article added - TomForsyth, 2006/12/30 上午2:38:00" class="tiddlyLink tiddlyLinkExisting" refresh=link tiddlylink="Cellular Automata article added">Cellular Automata article added</a><br><a href=https://tomforsyth1000.github.io/blog.wiki.html title="Impostor article added - TomForsyth, 2006/11/20 下午5:31:00" class="tiddlyLink tiddlyLinkExisting" refresh=link tiddlylink="Impostor article added">Impostor article added</a><br><a href=https://tomforsyth1000.github.io/blog.wiki.html title="Shadowmap vs shadowbuffer - TomForsyth, 2006/10/8 上午8:23:00" class="tiddlyLink tiddlyLinkExisting" refresh=link tiddlylink="Shadowmap vs shadowbuffer">Shadowmap vs shadowbuffer</a><br><a href=https://tomforsyth1000.github.io/blog.wiki.html title="Vertex Cache Optimisation - TomForsyth, 2006/9/30 上午6:42:00" class="tiddlyLink tiddlyLinkExisting" refresh=link tiddlylink="Vertex Cache Optimisation">Vertex Cache Optimisation</a><br><a href=https://tomforsyth1000.github.io/blog.wiki.html title="Strippers - TomForsyth, 2006/8/12 上午11:13:00" class="tiddlyLink tiddlyLinkExisting" refresh=link tiddlylink=Strippers>Strippers</a><br><a href=https://tomforsyth1000.github.io/blog.wiki.html title="Scene Graphs - just say no - TomForsyth, 2011/1/1 上午12:53:00" class="tiddlyLink tiddlyLinkExisting" refresh=link tiddlylink="Scene Graphs - just say no">Scene Graphs - just say no</a><br><a href=https://tomforsyth1000.github.io/blog.wiki.html title="Dodgy demos - TomForsyth, 2006/8/1 上午8:05:00" class="tiddlyLink tiddlyLinkExisting" refresh=link tiddlylink="Dodgy demos">Dodgy demos</a><br><a href=https://tomforsyth1000.github.io/blog.wiki.html title="Premultiplied alpha - TomForsyth, 2015/3/18 下午7:26:00" class="tiddlyLink tiddlyLinkExisting" refresh=link tiddlylink="Premultiplied alpha">Premultiplied alpha</a><br><a href=https://tomforsyth1000.github.io/blog.wiki.html title="Babbage was a true genius - TomForsyth, 2006/7/7 上午8:10:00" class="tiddlyLink tiddlyLinkExisting" refresh=link tiddlylink="Babbage was a true genius">Babbage was a true genius</a><br><a href=https://tomforsyth1000.github.io/blog.wiki.html title="Someone cited my VIPM article - TomForsyth, 2006/8/12 上午5:47:00" class="tiddlyLink tiddlyLinkExisting" refresh=link tiddlylink="Someone cited my VIPM article">Someone cited my VIPM article</a><br><a href=https://tomforsyth1000.github.io/blog.wiki.html title="VIPM article in HTML - TomForsyth, 2006/8/12 上午5:47:00" class="tiddlyLink tiddlyLinkExisting" refresh=link tiddlylink="VIPM article in HTML">VIPM article in HTML</a><br><a href=https://tomforsyth1000.github.io/blog.wiki.html title="RSS part 3 - TomForsyth, 2006/5/6 上午6:29:00" class="tiddlyLink tiddlyLinkExisting" refresh=link tiddlylink="RSS part 3">RSS part 3</a><br><a href=https://tomforsyth1000.github.io/blog.wiki.html title="VGA was good enough for my grandfather - TomForsyth, 2006/5/6 上午6:29:00" class="tiddlyLink tiddlyLinkExisting" refresh=link tiddlylink="VGA was good enough for my grandfather">VGA was good enough for my grandfather</a><br><a href=https://tomforsyth1000.github.io/blog.wiki.html title="RSS part 2 - TomForsyth, 2006/5/2 下午12:22:00" class="tiddlyLink tiddlyLinkExisting" refresh=link tiddlylink="RSS part 2">RSS part 2</a><br><a href=https://tomforsyth1000.github.io/blog.wiki.html title="A matter of precision - TomForsyth, 2014/11/29 上午9:37:00" class="tiddlyLink tiddlyLinkExisting" refresh=link tiddlylink="A matter of precision">A matter of precision</a><br><a href=https://tomforsyth1000.github.io/blog.wiki.html title="Game Middleware list - TomForsyth, 2006/4/16 上午11:42:00" class="tiddlyLink tiddlyLinkExisting" refresh=link tiddlylink="Game Middleware list">Game Middleware list</a><br><a href=https://tomforsyth1000.github.io/blog.wiki.html title="RSS banditry - TomForsyth, 2006/4/16 上午11:40:00" class="tiddlyLink tiddlyLinkExisting" refresh=link tiddlylink="RSS banditry">RSS banditry</a><br><a href=https://tomforsyth1000.github.io/blog.wiki.html title="...there was a load of words - TomForsyth, 2006/4/16 上午11:40:00" class="tiddlyLink tiddlyLinkExisting" refresh=link tiddlylink="...there was a load of words">...there was a load of words</a><br><a href=https://tomforsyth1000.github.io/blog.wiki.html title="In the beginning... - TomForsyth, 2006/4/16 上午11:40:00" class="tiddlyLink tiddlyLinkExisting" refresh=link tiddlylink="In the beginning...">In the beginning...</a></div>
<div class=tagClear></div>
</div><div class=tiddler id=tiddlerRenderstate_change_costs refresh=tiddler tags="Blog Rendering" tiddler="Renderstate change costs" template=ViewTemplate>
<div class=toolbar role=navigation><a href=https://tomforsyth1000.github.io/blog.wiki.html title="Close this tiddler" class="button command_closeTiddler" commandname=closeTiddler tiddler="Renderstate change costs">close</a><a href=https://tomforsyth1000.github.io/blog.wiki.html title="Close all other tiddlers" class="button command_closeOthers" commandname=closeOthers tiddler="Renderstate change costs">close others</a><a href=https://tomforsyth1000.github.io/blog.wiki.html title="View the source of this tiddler" class="button command_editTiddler defaultCommand" commandname=editTiddler tiddler="Renderstate change costs">view</a><a href=https://tomforsyth1000.github.io/blog.wiki.html title="Show additional commands" class="button moreCommand">more</a><span class=moreCommand style=display:none></span></div>
<div class=title>Renderstate change costs</div>
<div class=subtitle><span><a href=https://tomforsyth1000.github.io/blog.wiki.html title="TomForsyth - TomForsyth, 2006/4/12 上午11:10:00" class="tiddlyLink tiddlyLinkExisting" refresh=link tiddlylink=TomForsyth>TomForsyth</a></span>, <span>28 January 2008</span> (<span>created</span> <span>27 January 2008</span>)</div>
<div class="tagging sf-hidden"></div>
<div class=tagged><ul><li class=listTitle>tags: <li><a href=https://tomforsyth1000.github.io/blog.wiki.html title="Show tiddlers tagged with 'Blog'" class=button tag=Blog tiddler="Renderstate change costs">Blog</a></li> <li><a href=https://tomforsyth1000.github.io/blog.wiki.html title="Show tiddlers tagged with 'Rendering'" class=button tag=Rendering tiddler="Renderstate change costs">Rendering</a></ul></div>
<div class=viewer>Renderstate changes cost valuable clock cycles on both the CPU and GPU. So it's a good idea to sort your rendering order by least-cost. But you need to be careful you know what "least-cost" means - it's not just the number of SetRenderState calls you send down!<br><br>(note - I'm going to suggest some numbers in this section - all numbers are purely hypothetical - they are realistic, but I have deliberately avoided making them the same as any hardware I know about - they're just for illustration)<br><br>Typically, graphics hardware is driven by a bunch of internal bits that control the fixed-function units and the flow of the overall pipeline. The mapping between those bits and the renderstates exposed by the graphics API is far from obvious. For example, the various alpha-blend states look simple in the API, but they have large and wide-ranging implications for the hardware pipeline - depending on what you set, various types of early, hierarchical and late Z will be enabled or disabled. In general, it is difficult to predict how some render states will affect the pipeline - I have written graphics drivers, I have an excellent knowledge of graphics hardware, and I'm responsible for some right now, and I <em>still</em> have a hard time predicting what a change in a single renderstate will do to the underlying hardware.<br><br>To add to the complexity, a lot of modern hardware can have a certain limited number of rendering pipeline states (sometimes called "contexts", in a slightly confusing manner) in flight. For further complexity, this number changes at different points in the pipeline. For example, some hardware may be able to have 2 pixel shaders, 2 vertex shaders, 4 sets of vertex shader constants in flight at once, and 8 different sets of textures (again, numbers purely for illustration). If the driver submits one more than this number at the same time, the pipeline will stall. Note the differing numbers for each category!<br><br>In general, there are some pipeline changes which are cheaper than others. These are "value" changes rather than "functional" changes. For example, changing the alpha-blend state is, as mentioned, a functional change. It enables or disables different things - the ordering of operations in the pipeline changes. This can be expensive. But changing e.g. the fog colour is not a functional change, it's a value change. Fog is still on (or off), but there's a register that changes its value from red to blue - that's not a functional change, so it is usually fairly cheap. Be aware that there are some that look like "value" changes that can be both. For example, Z-bias looks like just a single value that changes from - should be cheap, right? But if you change that value to 0, then the Z-bias circuitry can be switched off entirely, and maybe the pipeline can be reconfigured to go faster. So although this looks like a value change, it can be a functional change as well.<br><br>With that in mind, here's a very general guide to state change costs for the hardware, ordered least to most:<br><br><ul><li> Changing vertex, index or constant buffers (DX10) for another one <strong>of the same format</strong>. Here, you are simply changing the pointer to where the data starts. Because the description of the contents hasn't changed, it's usually not a large pipeline change.</ul><br><ul><li> Changing a texture for another texture identical in every way (format, size, number of mipmaps, etc) except the data held. Again, you're just changing the pointer to the start of the data, not changing anything in the pipeline. Note that the "same format" requirement is important - in some hardware, the shader hardware has to do float32 filtering, whereas fixed-function (i.e. fast) hardware can do float16 and smaller. Obviously changing from one to the other requires new shaders to be uploaded!</ul><br><ul><li> Changing constants, e.g. shader constants, fog color, transform matrices, etc. Everything that is a *value* rather than an enum or bool that actually changes the pipeline. Note that in DX10 hardware, the shader constants are cheap to change. But in DX9 hardware, they can be quite expensive. A "phase change" happened there, with shader constants being moved out of the core and into general memory.</ul><br><ul><li> Everything else - shaders, Z states, blend states, etc. These tend to cause widescale disruption to the rendering pipeline - units get enabled, disabled, fast paths turned on and off. Big changes. I'm not aware of that much cost difference between all these changes.</ul><br>(note that changing render target is even more expensive than all of the above - it's not really a "state change" - it's a major disruption to the pipeline - first and foremost, order by render target)<br><br>OK, so that's the <strong>hardware</strong> costs. what about the <strong>software</strong> costs?<br><br>Well, there's certainly the cost of actually making the renderstate change call. But that's usually pretty small - it's a function call and storing a DWORD in an array. Do not try to optimise for the least number of SetRenderState calls - you'll spend more CPU power doing the sorting than save by minimising the number of calls. Total false economy.<br><br>Also note that the actual work of state changes doesn't happen when you do the SetRenderState. It happens the next time you do a draw call, when the driver looks at the whole state vector and decides how the hardware has to change accordingly - this is caled "lazy state changes", and every driver does it these days. Think of it as a mini-compile stage - the driver looks at the API specification of the pipeline and "compiles" it to the hardware description. In some cases this is literally a compile - the shaders have to be changed in some way to accommodate the state changes. This mini-compile is obviously expensive, but the best drivers cache states from previous frames so that it doesn't do the full thinking every time. Of course, it still has to actually send the new pipeline to the card, and stall when the card has too many contexts in flight (see above). So what tends to happen is that on the CPU side, there's states that cause a new pipeline (tend to be higher on the list above), and states that don't (tend to be lower). But there's a much lower difference in cost between top and bottom.<br><br>(note that although the <a href=https://tomforsyth1000.github.io/blog.wiki.html title="SuperSecretProject - TomForsyth, 2008/7/19 下午10:29:00" class="tiddlyLink tiddlyLinkExisting" refresh=link tiddlylink=SuperSecretProject>SuperSecretProject</a> is a software renderer, you still have a certain cost to state changes, and those costs are reflected in the above data. It's not exactly a coincidence that a software renderer and hardware renderers have similar profiles - they have to do the same sort of things. Our consolation is that we don't have any hard limits, so in general the cost of changing renderstates is much lower than hardware).<br><br>Of course it's also a good idea to sort front-to-back (for opaque objects), so that has to be reconciled with sorting by state. The way I do it is to sort renderstates hierarchically - so there's four levels according to the above four items. Generally I assign a byte of hash per list item, and I concatenate the bytes to form a uint32 (it's a lucky accident there's four items - I didn't plan it that way). Also note this hash is computed at mesh creation time - I don't go around making hashes at runtime.<br><br>So now I have a bunch of hashed renderstates, what order do I put them in? What I generally do is assume the first two types of state change - changing constant buffers and texture pointers - are much cheaper than the others (also, you don't tend to change shader without changing shader constants and textures anyway, so it's a reasonable approximation). So I make some "sub-buckets" of the objects that share the same state in the last two items. In each sub-bucket I pick the closest object to the camera. Then I sort the sub-buckets according to that distance (closest first), and draw them in that order. Within each bucket, I draw all the objects that have each renderstate in whatever order they happen to be - all I care about is getting all the objects for one state together. This gets me a fair bit of early-Z rejection without spamming the hardware with too many expensive changes.<br><br>In theory by sorting within each sub-bucket you could get slightly better driver/hardware efficiency, but I suspect the effort of sorting will be more expensive than the savings you get. I've not measured this, so this is just my experience talking. By all means if you have the time, test these hunches and let me know if my intuition is wide of the mark. It wouldn't be the first time.<br><br>Note that obviously I do the "first nearest object" as I'm putting the objects into the sub-bins, not as a later sorting stage, and there's a bunch of other obvious implementation efficiencies. And I use a bucket-sort for Z rather than trying for high precision. So although it sounds complex (it's surprisingly difficult to explain in text!), the implementation is actually fairly simple and the runtime cost is very low.</div>
<div class=tagClear></div>
</div></div>
</div>
</div>
<div id=contentStash></div>
<div id=shadowArea class=sf-hidden>
</div>
<div id=storeArea class=sf-hidden>
</div>
<div id=HUABAN_WIDGETS><div class=HUABAN-f-button style=display:none>采集</div><style class=sf-hidden>#HUABAN_WIDGETS{font-family:"helvetica neue",arial,sans-serif;color:#444;font-size:14px}#HUABAN_WIDGETS *{box-sizing:content-box}#HUABAN_WIDGETS .HUABAN-f-button{position:absolute;z-index:9999999999998;box-shadow:0 0 0 2px rgba(255,255,255,.2);background:rgba(0,0,0,.3);color:white;cursor:pointer;padding:0 12px;height:30px;line-height:30px;border-radius:2px;font-size:14px}#HUABAN_WIDGETS .HUABAN-f-button:hover{background-color:#999;background-color:rgba(0,0,0,.5)}#HUABAN_WIDGETS .HUABAN-f-button:active{background-color:rgba(0,0,0,.6)}<!--</style></div>